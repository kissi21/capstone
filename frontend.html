
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Database Technology College (DBTC)</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    /* All existing styles remain the same */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
      background-image: url('');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      min-height: 100vh;
    }
    .navbar {
      background-color: #ffffff;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
      width: 100%;
      z-index: 999;
    }
    .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 40px;
      max-width: 1200px;
      margin: auto;
      flex-wrap: wrap;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo img {
      height: 60px;
    }
    .logo span {
      font-size: 22px;
      font-weight: bold;
      color: #006400;
    }
    .nav-links {
  list-style: none;
  display: flex;
  align-items: center;   /* ito ang nagpapagitna vertically */
  justify-content: flex-end;  /* optional: para nasa kanan */
  gap: 25px;
  margin: 0;
  padding: 0;
}

    .nav-links li {
      position: relative;
    }
   .nav-links li a,
.dropbtn {
  text-decoration: none;
  color: #333;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  height: 100%;
  padding: 8px 12px;
}

    .dropdown {
      position: absolute;
      top: 100%px;
      left: 0;
      background-color: #fff;
      border: 1px solid #ddd;
      display: none;
      flex-direction: column;
      min-width: 120px;
      z-index: 1000;
    }
    .nav-links li:hover .dropdown {
      display: flex;
    }
    .dropdown a {
      padding: 8px 12px;
      border-bottom: 1px solid #eee;
      color: #333;
    }
    .dropdown a:hover {
      background-color: #f1f1f1;
    }
    .hero, .section, .content-section, #pre-enrollment, #fileSubmission {
      display: none;
      padding: 60px 20px;
    }
    .hero.active, .section.active, .content-section.active, #pre-enrollment.active, #fileSubmission.active {
      display: block;
    }
    .hero {
      height: 70vh;
      background: url('https://tse2.mm.bing.net/th/id/OIP.Aa9ZmQSUmKEmOxJDKqhz1AHaJ4?cb=ucfimg2ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3') center center/cover no-repeat;
      position: relative;
    }
    .overlay {
      background-color: rgba(26, 2, 2, 0.6);
      height: auto;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      padding: 40px;
    }
    .hero-content {
      text-align: left;
      max-width: 800px;
      margin-right: auto;
      margin-left: 10%;
    }
    .hero-content h1 {
      font-size: 3rem;
      margin-bottom: 20px;
    }
    .hero-content p {
      font-size: 1.2rem;
      margin-bottom: 30px;
    }
    .btn.enroll-now {
      display: inline-block;
      padding: 15px 30px;
      background-color: #388e3c;
      color: white;
      text-decoration: none;
      border: 2px solid #388e3c;
      border-radius: 35px;
      font-weight: bold;
      font-size: 1.5rem;
      margin-top: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s ease, border-color 0.3s ease;
      margin-right: 15px;
    }
    .btn.enroll-now:hover {
      background-color: #2e7d32;
      border-color: #2e7d32;
    }
    .section h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #007BFF;
    }
    .section p {
      text-align: center;
      max-width: 700px;
      margin: auto;
      font-size: 1.1rem;
    }
    .contact-info {
      margin-top: 30px;
      text-align: center;
      font-size: 1rem;
      color: #333;
      line-height: 1.6;
    }
    .form-container {
      padding: 60px 20px;
      background-color: #cbe6c7;
    }
    .form-wrapper {
      max-width: 650px;
      margin: auto;
      background-color: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    .form-wrapper h1 {
      text-align: center;
      color: #1a1a1a;
      margin-bottom: 15px;
    }
    .form-wrapper p {
      text-align: center;
      font-style: italic;
      margin-top: 0;
      color: #333;
    }
    .form-wrapper label {
      display: block;
      font-weight: bold;
      margin: 20px 0 8px;
    }
    .form-wrapper input[type="text"],
    .form-wrapper input[type="number"],
    .form-wrapper input[type="tel"],
    .form-wrapper input[type="date"],
    .form-wrapper input[type="email"],
    .form-wrapper select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }
    .form-wrapper .radio-group, .form-wrapper .checkbox-group {
      padding-left: 20px;
      margin-top: 10px;
    }
    .form-wrapper .radio-group label,
    .form-wrapper .checkbox-group label {
      display: block;
      margin: 6px 0;
      font-weight: normal;
    }
    .form-wrapper button {
      background-color: #388e3c;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 20px;
    }
    .form-wrapper button:hover {
      background-color: #2e7d32;
    }
    .form-wrapper .reset-btn {
      background-color: #f1f1f1;
      color: #333;
      margin-left: 10px;
    }
    .form-wrapper .note {
      font-size: 0.9em;
      margin-top: 20px;
      color: #777;
      text-align: center;
    }
    .content-section {
      padding: 60px 20px;
      background-color: #f9f9f9;
    }
    .content-section .container {
      max-width: 1100px;
      margin: 50px auto;
      padding: 20px;
      display: flex;
      gap: 40px;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    .content-section .text-content {
      flex: 1;
      color: #333;
    }
    .content-section .text-content h2,
    .content-section .text-content h3 {
      font-size: 32px;
      font-weight: 700;
      color: #1b2a4e;
      margin-bottom: 20px;
      text-align: center;
    }
    .content-section .text-content p {
      line-height: 1.6;
      margin-bottom: 10px;
    }
    .content-section .text-content strong {
      font-weight: 700;
      display: block;
      margin-top: 10px;
    }
    .content-section .explore-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #49cd6d;
      color: white;
      text-decoration: none;
      font-weight: bold;
      border-radius: 5px;
    }
    @media (max-width: 768px) {
      .content-section .container {
        flex-direction: column;
      }
      .content-section .text-content, .content-section .image-content {
        flex: unset;
        width: 100%;
      }
      .content-section .text-content h2,
      .content-section .text-content h3 {
        text-align: center;
      }
    }
    .main-footer {
      background-color: #14532d;
      color: #fff;
      font-family: 'Roboto', sans-serif;
    }
    .main-footer .footer-top {
      background-color: #166534;
      padding: 25px 20px;
    }
    .main-footer .footer-content-wrapper {
  display: flex;
  flex-direction: column; 
  align-items: center;
  justify-content: center; 
  text-align: center;
  gap: 10px; 
  color: #fff;
}
   .main-footer .footer-column {
  flex: unset;
  margin-bottom: 10px;
  padding: 0;
}
    .main-footer .footer-column p,
    .main-footer .footer-column ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .main-footer .footer-column ul li a {
      color: #fff;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    .main-footer .footer-column ul li a:hover {
      color: #bbf7d0;
    }
    .main-footer .footer-bottom {
      background-color: #064e3b;
      text-align: center;
      padding: 10px 0;
    }
    .main-footer .footer-bottom p {
      margin: 0;
    }
    .main-footer .social-icons {
  justify-content: center;
}
    .main-footer .social-icons a {
      color: #fff;
      font-size: 1.2rem;
      text-decoration: none;
    }
    .main-footer .subscribe-form {
      display: flex;
      margin-top: 10px;
    }
    .main-footer .subscribe-form input[type="email"] {
      padding: 8px;
      border: none;
      border-radius: 4px 0 0 4px;
      flex-grow: 1;
    }
    .main-footer .subscribe-form button {
      padding: 8px 15px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
    }
    @media (max-width: 768px) {
      .main-footer .footer-content-wrapper {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .main-footer .footer-column {
        flex: 1 1 100%;
        margin-bottom: 20px;
      }
      .main-footer .social-icons {
        justify-content: center;
      }
    }
    #about .grid-container {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }
    #about .grid-container img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
    #about .about-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: left;
    }
    #about h2 {
      color: #006400;
      margin-bottom: 30px;
      font-size: 2.5rem;
      text-align: center;
    }
    #about h3 {
      color: #007BFF;
      margin-top: 25px;
      margin-bottom: 15px;
      font-size: 1.8rem;
      text-align: center;
    }
    #about ul {
      list-style: none;
      padding-left: 0;
      margin-bottom: 20px;
    }
    #about ul li {
      margin-bottom: 10px;
      line-height: 1.6;
      padding-left: 25px;
      position: relative;
    }
    #about ul li::before {
      content: 'â€¢';
      color: #006400;
      font-size: 1.2em;
      position: absolute;
      left: 0;
      top: 0;
    }
    #about .core-values {
      text-align: center;
      margin-top: 30px;
    }
    #about .core-values p {
      font-style: italic;
      font-size: 1.1rem;
      color: #555;
    }
    #about .core-values strong {
      display: block;
      font-size: 1.3rem;
      color: #333;
      margin-top: 10px;
    }
    #contacts {
      padding: 80px 20px;
      background-color: #f8f8f8;
      color: #333;
    }
    #contacts .contact-container {
      max-width: 1000px;
      margin: 0 auto;
      text-align: center;
    }
    #contacts .contact-header h2 {
      font-size: 2.8rem;
      color: #1b2a4e;
      margin-bottom: 15px;
    }
    #contacts .contact-header p {
      font-size: 1.1rem;
      color: #555;
      margin-bottom: 40px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    #contacts .contact-content-wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      align-items: flex-start;
    }
    #contacts .contact-info-block,
    #contacts .contact-form-block {
      flex: 1;
      min-width: 300px;
      padding: 30px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      text-align: left;
    }
    #contacts .contact-info-block p {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 10px;
    }
    #contacts .contact-info-block .view-map {
      margin-top: 15px;
    }
    #contacts .contact-info-block .view-map a {
      color: #007bff;
      text-decoration: none;
      font-weight: bold;
      display: inline-block;
      transition: color 0.3s ease;
    }
    #contacts .contact-info-block .view-map a:hover {
      color: #0056b3;
    }
    #contacts .contact-form-block .form-group {
      margin-bottom: 20px;
    }
    #contacts .contact-form-block label {
      display: block;
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #444;
    }
    #contacts .contact-form-block input[type="text"],
    #contacts .contact-form-block input[type="email"],
    #contacts .contact-form-block textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
      font-family: 'Roboto', sans-serif;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    #contacts .contact-form-block input[type="text"]:focus,
    #contacts .contact-form-block input[type="email"]:focus,
    #contacts .contact-form-block textarea:focus {
      border-color: #88b0a9;
      outline: none;
      box-shadow: 0 0 0 3px rgba(136, 176, 169, 0.3);
    }
    #contacts .contact-form-block textarea {
      resize: vertical;
    }
    #contacts .contact-form-block .submit-btn {
      background-color: #63bf84;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    #contacts .contact-form-block .submit-btn:hover {
      background-color: #4a9e62;
    }
    @media (max-width: 768px) {
      #contacts {
        padding: 60px 15px;
      }
      #contacts .contact-header h2 {
        font-size: 2.2rem;
      }
      #contacts .contact-header p {
        font-size: 1rem;
      }
      #contacts .contact-content-wrapper {
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }
      #contacts .contact-info-block,
      #contacts .contact-form-block {
        min-width: unset;
        width: 100%;
        padding: 25px;
      }
      #contacts .contact-info-block {
        text-align: center;
      }
    }
    .dashboard-content {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .card {
      flex: 1 1 200px;
      padding: 20px;
      background-color: #e6f4ea;
      border-radius: 12px;
      text-align: center;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s ease, background-color 0.2s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      background-color: #d4f3dc;
    }
    #loginMessage {
      text-align: center;
    }
    
    /* Admin Dashboard Specific Styles - HIDDEN BY DEFAULT */
    #admin-dashboard {
      display: none; /* Hidden by default */
      flex-direction: row; /* Side by side layout */
      min-height: calc(100vh - 80px);
      background-color: #f0f2f5;
      padding: 0;
      text-align: left;
    }
    #admin-dashboard.active {
      display: flex; /* Only show when active */
    }
    #admin-dashboard .admin-sidebar {
      width: 250px;
      background-color: #056731;
      color: white;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      flex-shrink: 0;
      position: sticky; /* Make sidebar sticky */
      top: 0; /* Stick to top of viewport */
      height: 100vh; /* Full viewport height */
      overflow-y: auto; /* Enable scrolling if content is too long */
      z-index: 100; /* Ensure it stays above other content */
    }
    #admin-dashboard .admin-sidebar h2 {
      color: white;
      margin-bottom: 30px;
      font-size: 1.8rem;
      text-align: center;
    }
    #admin-dashboard .admin-sidebar ul {
      list-style: none;
      padding: 0;
    }
    #admin-dashboard .admin-sidebar ul li {
      margin-bottom: 10px;
    }
    #admin-dashboard .admin-sidebar ul li a {
      display: block;
      padding: 12px 15px;
      text-decoration: none;
      color: #ecf0f1;
      font-weight: 500;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    #admin-dashboard .admin-sidebar ul li a:hover,
    #admin-dashboard .admin-sidebar ul li a.active {
      background-color: #34495e;
      color: #ffffff;
    }
    #admin-dashboard .admin-main-content {
      flex: 1;
      padding: 30px;
      background-color: #ffffff;
      margin: 0;
      overflow-y: auto;
    }
    #admin-dashboard .admin-main-content h1 {
      color: #34495e;
      margin-bottom: 25px;
      font-size: 2.2rem;
    }
    .admin-dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .admin-card {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .admin-card h3 {
      color: #2c3e50;
      margin-bottom: 15px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    .admin-card ul {
      list-style: none;
      padding: 0;
    }
    .admin-card ul li {
      margin-bottom: 8px;
      color: #555;
    }
    /* New Dashboard Styles */
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
    }
    .dashboard-title h1 {
      font-size: 2rem;
      color: #333;
      margin: 0;
    }
    .dashboard-date {
      color: #666;
      font-size: 0.9rem;
      margin-left: 20px;
    }
    .admin-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #666;
      font-size: 0.9rem;
    }
    .profile-avatar {
      width: 32px;
      height: 32px;
      background-color: #f0b27a;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 0.9rem;
    }
    /* Admin Management Styles */
    .admin-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .admin-actions {
      display: flex;
      gap: 10px;
    }
    .add-btn {
      background-color: #2563eb;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .add-btn:hover {
      background-color: #1d4ed8;
    }
    .admin-table-container {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e0e0e0;
    }
    .admin-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    .admin-table th {
      background-color: #f8fafc;
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
    }
    .admin-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #f3f4f6;
      color: #374151;
    }
    .admin-table tbody tr:hover {
      background-color: #f9fafb;
    }
    .action-btn {
      padding: 6px 12px;
      margin: 0 3px;
      border: none;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .edit-btn {
      background-color: #fbbf24;
      color: white;
    }
    .edit-btn:hover {
      background-color: #f59e0b;
    }
    .view-btn {
      background-color: #17a2b8;
      color: white;
    }
    .view-btn:hover {
      background-color: #138496;
    }
    .delete-btn {
      background-color: #ef4444;
      color: white;
    }
    .delete-btn:hover {
      background-color: #dc2626;
    }
    .approve-btn {
      background-color: #10b981;
      color: white;
    }
    .approve-btn:hover {
      background-color: #059669;
    }
    .reject-btn {
      background-color: #6b7280;
      color: white;
    }
    .reject-btn:hover {
      background-color: #4b5563;
    }
    .status-badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .status-active {
      background-color: #dcfce7;
      color: #166534;
    }
    .status-inactive {
      background-color: #fee2e2;
      color: #991b1b;
    }
    .status-pending {
      background-color: #fef3c7;
      color: #92400e;
    }
    .status-approved {
      background-color: #dcfce7;
      color: #166534;
    }
    .status-rejected {
      background-color: #fee2e2;
      color: #991b1b;
    }
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      overflow-y: auto;
      padding: 20px 0;
    }
    .modal-content {
      background-color: white;
      margin: 3% auto;
      padding: 30px;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      position: relative;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .modal-header h2 {
      margin: 0;
      color: #333;
    }
    .close {
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      color: #666;
    }
    .close:hover {
      color: #333;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #374151;
      font-weight: 500;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
    }
    .form-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 20px;
    }
    .btn-primary {
      background-color: #2563eb;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .btn-primary:hover {
      background-color: #1d4ed8;
    }
    .btn-secondary {
      background-color: #6b7280;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .btn-secondary:hover {
      background-color: #4b5563;
    }
    .btn-danger {
      background-color: #ef4444;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .btn-danger:hover {
      background-color: #dc2626;
    }
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }
    .error {
      color: #dc2626;
      font-size: 0.8rem;
      margin-top: 5px;
    }
    /* Responsive Modal */
    @media (max-height: 600px) {
      .modal-content {
        margin: 1% auto;
        max-height: 95vh;
        padding: 20px;
      }
      .form-group {
        margin-bottom: 10px;
      }
    }
    @media (max-width: 768px) {
      .modal-content {
        width: 95%;
        margin: 1% auto;
        padding: 20px;
      }
    }
    .admin-sub-section {
      display: none;
    }
    .admin-sub-section.active {
      display: block;
    }
    #admin-dashboard .logout-btn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 30px;
      transition: background-color 0.3s ease;
    }
    #admin-dashboard .logout-btn:hover {
      background-color: #c0392b;
    }
   
    /* Archive Section Styles - MODIFIED TO REMOVE SIDEBAR */
    .archive-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .archive-content {
      flex: 1;
    }
    
    .archive-table-container {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e0e0e0;
    }
    
    .archive-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    
    .archive-table th {
      background-color: #f8fafc;
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .archive-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #f3f4f6;
      color: #374151;
    }
    
    .archive-table tbody tr:hover {
      background-color: #f9fafb;
    }
    
    .archive-empty {
      padding: 30px;
      text-align: center;
      color: #6c757d;
    }
    
    /* Archive Add Student Button Styles */
    .archive-add-btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .archive-add-btn:hover {
      background-color: #218838;
    }
    
    /* Archive Form Styles */
    .archive-form-group {
      margin-bottom: 15px;
    }
    
    .archive-form-group label {
      display: block;
      margin-bottom: 5px;
      color: #374151;
      font-weight: 500;
    }
    
    .archive-form-group input, 
    .archive-form-group select, 
    .archive-form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    
    .archive-form-group input:focus, 
    .archive-form-group select:focus, 
    .archive-form-group textarea:focus {
      outline: none;
      border-color: #28a745;
      box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.1);
    }
    
    .archive-form-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 20px;
    }
    
    .archive-btn-primary {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    
    .archive-btn-primary:hover {
      background-color: #218838;
    }
    
    .archive-btn-secondary {
      background-color: #6b7280;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    
    .archive-btn-secondary:hover {
      background-color: #4b5563;
    }
    
    /* Archive Form Error Message */
    .archive-form-error {
      color: #dc2626;
      font-size: 0.8rem;
      margin-top: 5px;
      display: none;
    }
    
    /* Settings Page Styles */
    .settings-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    
    .settings-tabs {
      display: flex;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 20px;
      position: sticky; /* Make settings tabs sticky */
      top: 0; /* Stick to top of viewport */
      background-color: white; /* Ensure background is solid */
      z-index: 10; /* Ensure it stays above content */
      padding-bottom: 1px; /* Prevent border from being covered */
    }
    
    .settings-tab {
      padding: 12px 20px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
    }
    
    .settings-tab:hover {
      color: #374151;
    }
    
    .settings-tab.active {
      color: #2563eb;
      border-bottom-color: #2563eb;
    }
    
    .settings-section {
      display: none;
    }
    
    .settings-section.active {
      display: block;
    }
    
    .settings-card {
      background: white;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    
    .settings-card h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #111827;
      margin: 0 0 20px 0;
      padding-bottom: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .settings-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .settings-form-group {
      display: flex;
      flex-direction: column;
    }
    
    .settings-form-group label {
      font-weight: 500;
      color: #374151;
      margin-bottom: 6px;
    }
    
    .settings-form-group input,
    .settings-form-group select,
    .settings-form-group textarea {
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 0.95rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .settings-form-group input:focus,
    .settings-form-group select:focus,
    .settings-form-group textarea:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .settings-form-group .description {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 4px;
    }
    
    .settings-form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 24px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }
    
    .settings-switch {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: #2563eb;
    }
    
    input:checked + .slider:before {
      transform: translateX(24px);
    }
    
    .backup-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-bottom: 12px;
    }
    
    .backup-info {
      flex: 1;
    }
    
    .backup-info h4 {
      font-size: 1rem;
      font-weight: 500;
      color: #111827;
      margin: 0 0 4px 0;
    }
    
    .backup-info p {
      font-size: 0.875rem;
      color: #6b7280;
      margin: 0;
    }
    
    .backup-actions {
      display: flex;
      gap: 8px;
    }
    
    .btn-sm {
      padding: 6px 12px;
      font-size: 0.875rem;
      border-radius: 4px;
    }
    
    .notification-template {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .notification-template h4 {
      font-size: 1rem;
      font-weight: 500;
      color: #111827;
      margin: 0 0 12px 0;
    }
    
    .notification-template textarea {
      width: 100%;
      min-height: 100px;
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-family: inherit;
      font-size: 0.95rem;
      resize: vertical;
    }
    
    .template-variables {
      margin-top: 8px;
      font-size: 0.8rem;
      color: #6b7280;
    }
    
    .template-variables code {
      background-color: #f3f4f6;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
    }
    
    .user-roles-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
    }
    
    .user-roles-table th,
    .user-roles-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .user-roles-table th {
      font-weight: 600;
      color: #374151;
      background-color: #f9fafb;
    }
    
    .role-checkbox {
      display: flex;
      justify-content: center;
    }
    
    .role-checkbox input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    /* Student Management Styles */
    .student-management-container {
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    
    /* Subject and Schedule Management Styles */
    .subject-schedule-container {
      display: flex;
      flex-direction: row;
      gap: 20px;
      margin-top: 20px;
    }
    
    .subject-list, .schedule-list {
      flex: 1;
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .subject-list h3, .schedule-list h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #343a40;
      font-size: 1.1rem;
      border-bottom: 1px solid #e9ecef;
      padding-bottom: 10px;
    }
    
    .subject-item, .schedule-item {
      padding: 12px;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .subject-item:last-child, .schedule-item:last-child {
      border-bottom: none;
    }
    
    .subject-info, .schedule-info {
      flex: 1;
    }
    
    .subject-name, .schedule-name {
      font-weight: 600;
      color: #343a40;
      margin-bottom: 4px;
    }
    
    .subject-code, .schedule-time {
      font-size: 0.9rem;
      color: #6c757d;
    }
    
    .add-subject-btn, .add-schedule-btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
      margin-top: 15px;
    }
    
    .add-subject-btn:hover, .add-schedule-btn:hover {
      background-color: #218838;
    }
    
    .assign-subject-btn, .assign-schedule-btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
      margin-left: 10px;
    }
    
    .assign-subject-btn:hover, .assign-schedule-btn:hover {
      background-color: #0056b3;
    }
    
    .remove-subject-btn, .remove-schedule-btn {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
      margin-left: 10px;
    }
    
    .remove-subject-btn:hover, .remove-schedule-btn:hover {
      background-color: #c82333;
    }
    
    .empty-state {
      text-align: center;
      padding: 20px;
      color: #6c757d;
      font-style: italic;
    }
    
    /* Search Bar Styles */
    
.search-container {
  display: flex;
  align-items: center;
  gap: 10px; /* space between input and button */
  margin-right: 20px; /* space from right edge */
  margin-top: 10px;   /* space from top */
}

.search-container input[type="text"] {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.search-container button {
  background-color: #16a34a;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 5px;
  cursor: pointer;
}


.search-btn {
  background-color: #2563eb;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: background-color 0.3s ease;
}

.search-btn:hover {
  background-color: #1d4ed8;
}

.clear-search-btn {
  background-color: #6b7280;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: background-color 0.3s ease;
}

.clear-search-btn:hover {
  background-color: #4b5563;
}

    
    .no-results {
      text-align: center;
      padding: 20px;
      color: #6c757d;
      font-style: italic;
    }
    
    /* Program Subjects Styles */
    .program-subjects-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 20px;
    }
    
    .program-subjects-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .program-subjects-header h3 {
      margin: 0;
      color: #343a40;
      font-size: 1.3rem;
    }
    
    .program-subjects-list {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .program-subject-item {
      padding: 15px;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .program-subject-item:last-child {
      border-bottom: none;
    }
    
    .program-subject-info {
      flex: 1;
    }
    
    .program-subject-name {
      font-weight: 600;
      color: #343a40;
      margin-bottom: 4px;
    }
    
    .program-subject-code {
      font-size: 0.9rem;
      color: #6c757d;
    }
    
    .program-subject-actions {
      display: flex;
      gap: 8px;
    }
    
    .edit-program-subject-btn {
      background-color: #fbbf24;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .edit-program-subject-btn:hover {
      background-color: #f59e0b;
    }
    
    .delete-program-subject-btn {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .delete-program-subject-btn:hover {
      background-color: #c82333;
    }
    
    .add-program-subject-btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .add-program-subject-btn:hover {
      background-color: #218838;
    }
  
.admin-table-container {
  overflow-x: auto; /* Allow horizontal scroll if table is wider than container */
}

.admin-table {
  width: 100%;
  min-width: 1000px; /* Ensure all columns are fully visible */
  border-collapse: collapse;
  table-layout: auto; /* Keep column widths natural */
}

/* Chart container styles */
.chart-container {
  position: relative;
  height: 300px;
  margin-bottom: 30px;
}

.chart-title {
  text-align: center;
  margin-bottom: 15px;
  font-size: 1.2rem;
  font-weight: 600;
  color: #34395e;
}

.chart-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 30px;
  margin-top: 20px;
}

.chart-card {
  background-color: white;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.chart-card h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #34395e;
  text-align: center;
}

/* Image Upload Styles */
.image-upload-container {
  margin-bottom: 15px;
}

.image-preview {
  width: 100px;
  height: 100px;
  border: 1px solid #ddd;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  margin-top: 10px;
  background-color: #f9f9f9;
}

.image-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.image-placeholder {
  color: #999;
  font-size: 14px;
  text-align: center;
}

.student-image-cell {
  width: 50px;
  height: 50px;
}

.student-image-cell img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 4px;
}

/* Student Details Modal Styles */
.student-details-modal .modal-content {
  max-width: 800px;
}

.student-details-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 1px solid #e5e7eb;
}

.student-details-image {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #e5e7eb;
}

.student-details-name {
  flex: 1;
}

.student-details-name h2 {
  margin: 0 0 5px 0;
  font-size: 1.8rem;
  color: #111827;
}

.student-details-name p {
  margin: 0;
  color: #6b7280;
  font-size: 1rem;
}

.student-details-section {
  margin-bottom: 25px;
}

.student-details-section h3 {
  margin: 0 0 15px 0;
  font-size: 1.2rem;
  color: #374151;
  padding-bottom: 8px;
  border-bottom: 1px solid #e5e7eb;
}

.student-details-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

.student-details-field {
  display: flex;
  flex-direction: column;
}

.student-details-field label {
  font-weight: 600;
  color: #4b5563;
  margin-bottom: 5px;
  font-size: 0.9rem;
}

.student-details-field span {
  color: #1f2937;
  font-size: 1rem;
}

.student-details-subjects,
.student-details-schedules {
  margin-top: 10px;
}

.student-details-subjects h4,
.student-details-schedules h4 {
  margin: 0 0 10px 0;
  font-size: 1rem;
  color: #4b5563;
}

.student-details-subjects ul,
.student-details-schedules ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.student-details-subjects li,
.student-details-schedules li {
  padding: 8px 0;
  border-bottom: 1px solid #f3f4f6;
}

.student-details-subjects li:last-child,
.student-details-schedules li:last-child {
  border-bottom: none;
}

.print-btn {
  background-color: #10b981;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.print-btn:hover {
  background-color: #059669;
}

/* Print Styles */
@media print {
  body * {
    visibility: hidden;
  }
  
  .student-details-modal, .student-details-modal * {
    visibility: visible;
  }
  
  .student-details-modal {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    background-color: white;
  }
  
  .modal-header,
  .form-actions {
    display: none;
  }
  
  .student-details-section {
    break-inside: avoid;
  }
}

/* Application Table Specific Styles */
.application-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.application-table th {
  background-color: #f8fafc;
  padding: 12px 15px;
  text-align: left;
  font-weight: 600;
  color: #374151;
  border-bottom: 1px solid #e5e7eb;
}

.application-table td {
  padding: 12px 15px;
  border-bottom: 1px solid #f3f4f6;
  color: #374151;
}

.application-table tbody tr:hover {
  background-color: #f9fafb;
}

.application-documents {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.document-badge {
  background-color: #e5e7eb;
  color: #374151;
  padding: 3px 8px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
}

.application-actions {
  display: flex;
  gap: 5px;
}

.application-actions .action-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.application-actions .approve-btn {
  background-color: #10b981;
}

.application-actions .reject-btn {
  background-color: #ef4444;
}

.application-actions .view-btn {
  background-color: #3b82f6;
}

.application-actions .delete-btn {
  background-color: #6b7280;
}

.application-status {
  font-weight: 600;
}

.application-status.approved {
  color: #166534;
}

.application-status.pending {
  color: #92400e;
}

.application-status.rejected {
  color: #991b1b;
}

.application-details h3 {
  margin-top: 20px;
  margin-bottom: 10px;
  color: #374151;
  border-bottom: 1px solid #e5e7eb;
  padding-bottom: 5px;
}

.application-details p {
  margin-bottom: 8px;
  line-height: 1.5;
}

/* Application Details Modal Styles */
.application-details-modal .modal-content {
  max-width: 700px;
}

.application-details-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid #e5e7eb;
}

.application-details-status {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}

.application-details-status.approved {
  background-color: #dcfce7;
  color: #166534;
}

.application-details-status.pending {
  background-color: #fef3c7;
  color: #92400e;
}

.application-details-status.rejected {
  background-color: #fee2e2;
  color: #991b1b;
}

.application-details-section {
  margin-bottom: 20px;
}

.application-details-section h3 {
  margin: 0 0 15px 0;
  font-size: 1.1rem;
  color: #374151;
  padding-bottom: 8px;
  border-bottom: 1px solid #e5e7eb;
}

.application-details-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

.application-details-field {
  display: flex;
  flex-direction: column;
}

.application-details-field label {
  font-weight: 600;
  color: #4b5563;
  margin-bottom: 5px;
  font-size: 0.9rem;
}

.application-details-field span {
  color: #1f2937;
  font-size: 1rem;
}

.application-details-documents {
  margin-top: 10px;
}

.application-details-documents h4 {
  margin: 0 0 10px 0;
  font-size: 1rem;
  color: #4b5563;
}

.application-details-documents-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.application-details-documents-item {
  background-color: #f3f4f6;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 0.85rem;
  color: #4b5563;
}
/* Dropdown Styles */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropbtn {
  cursor: pointer;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 160px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  z-index: 1;
  border-radius: 8px;
}

.dropdown-content li {
  list-style: none;
}

.dropdown-content li a {
  color: black;
  padding: 10px 14px;
  display: block;
  text-decoration: none;
}

.dropdown-content li a:hover {
  background-color: #f2f2f2;
}

.dropdown:hover .dropdown-content {
  display: block;
}

/* Strand section style */
.strand-container {
  background-color: #f9f9f9;
  margin: 30px auto;
  padding: 20px;
  max-width: 600px;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
}
/* Navbar alignment */
.nav-links {
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 20px;
  margin: 0;
  padding: 0;
}

.nav-links li {
  position: relative;
}

/* Regular menu links */
.nav-links a {
  text-decoration: none;
  color: black;
  font-size: 16px;
  font-weight: 500;
  padding: 8px 12px;
  background: none;
  border: none;
  cursor: pointer;
  display: inline-block;
  transition: color 0.3s;
}

.nav-links a:hover {
  color: #454B1B;
}

/* Dropdown button (Strand) */
.dropbtn {
  background: none;
  border: none;
  color: black;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  padding: 8px 12px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  transition: color 0.3s;
}

.dropbtn:hover {
  color: #454B1B;
}

/* Dropdown menu */
.dropdown-content {
  display: none;
  position: absolute;
  top: 100%; /* right below */
  left: 0;
  background-color: white;
  min-width: 180px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  border-radius: 4px;
  z-index: 100;
}

/* Dropdown list items */
.dropdown-content li {
  list-style: none;
}

.dropdown-content li a {
  color: black;
  padding: 10px 14px;
  display: block;
  text-decoration: none;
}

.dropdown-content li a:hover {
  background-color: #f2f2f2;
}

/* Active dropdown (when clicked) */
.dropdown.active .dropdown-content {
  display: block;
}

/* Strand info box */
.strand-container {
  background-color: #f9f9f9;
  margin: 30px auto;
  padding: 20px;
  max-width: 600px;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
}
/* Fix alignment of Strand dropdown */
.nav-links {
  display: flex;
  align-items: center;
  gap: 25px;
}

.nav-links li {
  list-style: none;
}

.nav-links a {
  text-decoration: none;
  color: black;
  font-weight: 500;
}

.dropdown {
  position: relative;
}

.dropbtn {
  background: none;
  border: none;
  color: black;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 160px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  z-index: 10;
  border-radius: 8px;
  top: 100%;
  left: 0;
}

.dropdown-content li a {
  color: black;
  padding: 10px 14px;
  display: block;
}

.dropdown-content li a:hover {
  background-color: #f2f2f2;
}

.dropdown.active .dropdown-content {
  display: block;
}

/* Strand Info Section */
.strand-section {
  position: relative;
  background-size: cover;
  background-position: center;
  min-height: 90vh;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
}

.strand-overlay {
  background-color: rgba(0, 0, 0, 0.5);
  padding: 50px 20px;
  width: 100%;
}

.strand-content {
  max-width: 900px;
  margin: auto;
}

.strand-content h1 {
  font-size: 3rem;
  margin-bottom: 15px;
  font-weight: bold;
}

.strand-content p {
  font-size: 1.2rem;
  margin-bottom: 30px;
}

.strand-content h2 {
  font-size: 1.8rem;
  margin-bottom: 10px;
}

.strand-content ul {
  list-style: none;
  padding: 0;
}

.strand-content ul li {
  font-size: 1.1rem;
  margin: 5px 0;
}

<!-- âœ… FINAL FIX: Clickable Status Buttons + Archive Integration -->
<style>
.status-btn {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  font-size: 0.8rem;
  font-weight: 600;
  color: white;
  cursor: pointer;
  margin: 2px;
  opacity: 0.6;
  transition: all 0.2s ease;
}
.status-btn:hover {
  opacity: 0.9;
}
.status-graduated {
  background-color: #22c55e; /* green */
}
.status-transferee {
  background-color: #3b82f6; /* blue */
}
.status-dropped {
  background-color: #ef4444; /* red */
}
.status-btn.active {
  opacity: 1;
  box-shadow: 0 0 0 2px #00000020;
}

/* === MENU HOVER AT ACTIVE (may underline line effect) === */
.nav-links a,
.dropbtn {
  position: relative;
  text-decoration: none;
  color: black;
  transition: color 0.3s ease;
}

/* Hover underline animation */
.nav-links a::after,
.dropbtn::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -3px;
  width: 0;
  height: 2px;
  background-color: #006400; /* dark green line */
  transition: width 0.3s ease;
}

/* Lumalabas ang linya pag hover */
.nav-links a:hover::after,
.dropbtn:hover::after {
  width: 100%;
}

/* Active underline */
.nav-links a.active::after,
.dropbtn.active::after {
  width: 100%;
  background-color: #228B22; /* medyo lighter green */
}

/* For dropdown items (STEM, ABM, HUMSS, GAS, TVL) */
.dropdown-content a {
  position: relative;
  text-decoration: none;
  color: black;
  transition: color 0.3s ease;
}

.dropdown-content a::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -3px;
  width: 0;
  height: 2px;
  background-color: #888; /* gray line */
  transition: width 0.3s ease;
}

.dropdown-content a:hover::after,
.dropdown-content a.active::after {
  width: 100%;
  background-color: #333; /* darker gray when active */
}

</style>

</style> </head>
<header class="navbar">
<div class="container">
<div class="logo">
<img src="https://tse2.mm.bing.net/th/id/OIP.G1rpxHjk4LpfHbMzHmuzfwAAAA?rs=1&amp;pid=ImgDetMain&amp;o=7&amp;rm=3"/>
<span>Database Technology College</span>
</div>
<nav>
<ul class="nav-links">
<li><a onclick="showPage('home')">Home</a></li>
<li><a onclick="showPage('about')">About</a></li>
<li><a onclick="showPage('contacts')">Contacts</a></li>
<li><a onclick="showPage('admission')">Admission</a></li>
<!-- ðŸ‘‡ PLACE THE STRAND DROPDOWN HERE, inside the same <ul> -->
<li class="dropdown">
<a class="dropbtn" onclick="toggleDropdown(event)">Strand â–¼</a>
<ul class="dropdown-content">
<li><a onclick="showTrack('STEM')">STEM</a></li>
<li><a onclick="showTrack('ABM')">ABM</a></li>
<li><a onclick="showTrack('HUMSS')">HUMSS</a></li>
<li><a onclick="showTrack('GAS')">GAS</a></li>
<li><a onclick="showTrack('TVL')">TVL</a></li>
</ul>
</li>
<li id="loginLink"><a onclick="showPage('login')">Login</a></li>
<li id="adminDashboardLink" style="display:none;">
<a href="allstudents.html">Overview</a>
</li>
</ul>
</nav>
</div>
</header>
<section class="strand-section" id="strand-info" style="display:none;">
<div class="strand-overlay">
<div class="strand-content">
<h1 id="strand-title"></h1>
<p id="strand-description"></p>
<h2>Possible College Courses:</h2>
<ul id="strand-courses"></ul>
</div>
</div>
</section>
<!-- Where strand info will show -->
<section class="section" id="strand-info" style="display:none;">
<div class="strand-container">
<h1 id="strand-title"></h1>
<p id="strand-description"></p>
</div>
</section>
<!-- Where strand info will appear -->
<section class="section" id="strand-info" style="display:none;">
<div class="strand-container">
<h1 id="strand-title"></h1>
<p id="strand-description"></p>
</div>
</section>

<section class="hero active" id="home">
<div class="overlay">
<div class="hero-content">
<h1>Welcome to DBTC - Gubat, Sorsogon</h1>
<p>Be Skilled.
        Be DBTCian!</p>
<a class="btn enroll-now" href="#" onclick="showPage('admission')">Register Now!</a>
</div>
</div>
</section>
<section class="content-section" id="quality-policy">
<div class="container">
<div class="text-content">
<h2>QUALITY POLICY</h2>
<p><strong>DATA BASE TECHNOLOGY COLLEGE, INC.</strong> in continuous search for excellence in instruction, offers relevant, sustainable and compliant TESDA and DepEd programs;
        pursue realistic plans aligned to its vision, mission and goals for the full satisfaction of its clients.</p>
<p>Founded in 1995, DATA BASE TECHNOLOGY COLLEGE INC set itself to be the First IT School in Gubat, Sorsogon, also had a branch campus in Bulan, Sorsogon way back 1995â€“2000 and moved in Gubat, Sorsogon.</p>
<p>From the time our students begin, and throughout their education, DATA BASE TECHNOLOGY COLLEGE, INC. trains and provides the skills and confidence they need for their careers.</p>
<a class="explore-button" href="#">EXPLORE</a>
</div>
<div class="image-content">
<img alt="Quality Policy Image" src="https://scontent.fmnl13-3.fna.fbcdn.net/v/t39.30808-6/493906885_1158041586337182_295188311571365987_n.jpg?_nc_cat=103&amp;ccb=1-7&amp;_nc_sid=833d8c&amp;_nc_eui2=AeHuRPGQyfUw0ZKsh0nXTD3uJeS-fW9QjVnUFYxIWaPNLnDfrL_0EBAB&amp;_nc_eui2=AeHuRPGQyfUw0ZKsh0nXTD3uJeS-fW9QjVnUFYxIWaPNLnDfrL_0EBAB&amp;_nc_ohc=xdxnc_gwA8MQ7kNvwHskeJo&amp;_nc_oc=AdlZhGNyXH_D8Ycp1k6bhANhks3dAU8R27hYMbGhOmD-kY2FicxUxTHKa6eDnqlXcwE&amp;_nc_zt=23&amp;_nc_ht=scontent.fmnl13-3.fna&amp;_nc_gid=Onk6a2_DBX872w_keVCvww&amp;oh=00_AfS6MvnYBsZUVkklb8VKUIkggqJ9WQAphuj5R2nP_7qQ&amp;oe=6878E774"/>
</div>
</div>
</section>
<section class="content-section" id="programs-offered">
<div class="container">
<div class="text-content">
<h3>DATA BASE TECHNOLOGY COLLEGE, INC. offers the following:</h3>
<strong>COMPUTER SYSTEM SERVICING NC II - CSS NC II<br/>(280 hours)</strong>
<strong>ELECTRICAL INSTALLATION AND MAINTENANCE NC II - EIM NC II<br/>(196 hours)</strong>
<strong>ELECTRONIC PRODUCTS ASSEMBLY &amp; SERVICING NC II - EPAS NC II<br/>(260 hours)</strong>
<p>Data Base Technology College Inc. also caters the K-12 Program of Department of Education - Trabaho, Negosyo at Kolehiyo!</p>
<p>Also offers the Technical courses thru TVL Track and Specialization.
        We added ICT, Computer Programming NC III and General Academic Strand.</p>
<a class="explore-button" href="#">EXPLORE</a>
</div>
<div class="image-content">
<img src="https://scontent.fmnl8-1.fna.fbcdn.net/v/t39.30808-6/492002150_1142110021263672_7032183115713659648_n.jpg?stp=cp6_dst-jpg_tt6&amp;_nc_cat=108&amp;ccb=1-7&amp;_nc_sid=833d8c&amp;_nc_eui2=AeFN3W1phcqlL-n0b1i0lSBQUCpYex67ikZQKlh7HruKRls8nUqBrNQ0S0KK97boYuzfkusrfk_0Op_v9neZzYzg&amp;_nc_ohc=Wkzen4H86TYQ7kNvwFfccZy&amp;_nc_oc=AdnzQRaZWf6bRVSxBbJraP328AmeiIwq-acZHw7YiSmKXFFrsMYmxA6u31c-l-vKYg&amp;_nc_zt=23&amp;_nc_ht=scontent.fmnl8-1.fna&amp;_nc_gid=NDa61-E7CRBLbXQrzS9Rjw&amp;oh=00_AfQ6fwvjAzuHCxfnLWPiRbgzKoajWQAphuj5R2nP_7qQ&amp;oe=68835BA7"/>
</div>
</div>
</section>
<section class="section" id="about">
<div class="about-content">
<h2>About Us</h2>
<p>Database Technology College is committed to providing affordable, quality education in technology and business.
      We aim to produce competent and globally competitive graduates grounded in values and integrity.</p>
<h3>FACILITIES</h3>
<h3>Mission:</h3>
<ul>
<li>Provide students with the technical proficiency to meet the challenges of a dynamic society.
        Produce students imbued with self-discipline and self-determination in order to become productive citizens who can cope with everyday life in our ever-changing world.</li>
</ul>
<h3>Vision:</h3>
<ul>
<li>Envision them committed to providing an excellent education, technical skills, and knowledge responsive to the needs of a highly technical environment and puts premium on personal and social values.</li>
</ul>
<h3>Goals:</h3>
<ul>
<li>To improve the skills of Coordination, control, manipulation and movement this will promote health and well-being.</li>
<li>To acquire integrative learning, analytical thinking skills as well as an an appreciation for diverse perspectives.</li>
<li>To gain emotional and socio growth;
        thus, be able to adapt to a rapidly changing environment.</li>
<li>To enhance value-leader attitudes and to adhere to acceptable norms for respectable life.</li>
</ul>
<p>Data Base Technology College Inc. also caters the K-12 Program of Department of Education - Trabaho, Negosyo at Kolehiyo!
      Also offers the Technical courses thru TVL Track and Specialization.
      We added ICT, Computer Programming NC III and General Academic Strand.</p>
<div class="core-values">
<h3>Core Values:</h3>
<strong>Skills</strong>
<strong>Integrity</strong>
<strong>Competence</strong>
<p>"Be a Skilled Graduate in a 21st Century!"</p>
<div class="grid-container">
<img alt="DBTC Building Exterior" src="https://scontent.fmnl13-1.fna.fbcdn.net/v/t1.6435-9/122250598_2843899252505107_6666575619658118074_n.jpg?_nc_cat=103&amp;ccb=1-7&amp;_nc_sid=127cfc&amp;_nc_eui2=AeEAyGfUmV01aUiLh2TJ5uXpxeaTNeMW2OnF5pM14xbY4lhqFZKpsD2AozoeiZSszoig8EAzbvhoyoYOxC3_j_K&amp;_nc_ohc=7CHfjbmFBDwQ7kNvwE6MhnO&amp;_nc_oc=Adn7Pmxk7xCoJ-QCGCDPW35k5YlTfbAp3kvLTsXtyPSu50Ukbu5fGU052rT5K-iXWs&amp;_nc_zt=23&amp;_nc_ht=scontent.fmnl13-1.fna&amp;_nc_gid=t2DxQbmq9pjMro48lJIdPA&amp;oh=00_AfN6my_8_OsqlxExfO-U4C9LRrXx69h_V90VrQ4xbz-OpA&amp;oe=688EBEDC"/>
</div>
<img alt="Students in a classroom" src="https://scontent.fmnl13-4.fna.fbcdn.net/v/t39.30808-6/508281075_1184356133705727_1698851516793471659_n.jpg?_nc_cat=108&amp;ccb=1-7&amp;_nc_sid=833d8c&amp;_nc_eui2=AeEziBYAfZFZEanDil0yXIs6EqjvW2CwgFQSqNXDYLCAVLZ-e7md12nVbomZ4rTxH19kQV7qnCfEMMpuaCSEqzks&amp;_nc_ohc=0befZ7Vi7T4Q7kNvwEyxi34&amp;_nc_oc=AdmJ9TMZDd0l0DYSkBjdeamY88v6uFA_tp3KR0g644RZEb84TU_B5tVcu2sx6tYbnE&amp;_nc_zt=23&amp;_nc_ht=scontent.fmnl13-4.fna&amp;_nc_gid=64Y34-MNhnQZvzApVSr7Tw&amp;oh=00_AfTH5GrbIldj-MuB_FGcvErnxjNzX_sjA0YNNZmbpbjjjjzg&amp;oe=6878EB99"/>
</div>
</div>
</section>
<section class="section" id="contacts">
<div class="contact-container">
<div class="contact-header">
<h2>WE ARE HERE FOR YOU</h2>
<p>Feel free to reach out to us for inquiries, enrollment, or any assistance you may need.
        We're here to help!</p>
</div>
<div class="contact-content-wrapper">
<div class="contact-info-block">
<p><strong>Roxas Street, Gubat, Sorsogon 4710, Philippines</strong></p>
<p class="view-map"><a href="https://www.google.com/maps/place/Database+Technology+College,+Inc./@12.9241606,124.1207977,17z/data=!3m1!4b1!4m6!3m5!1s0x33a0eb65efb7cb55:0xb40585189ce0b939!8m2!3d12.9241554!4d124.1233726!16s%2Fg%2F11c1qb8nlz?entry=ttu&amp;g_ep=EgoyMDI1MDcwOS4wIKXMDSoASAFQAw%3D%3D" target="_blank">View map â†’</a></p>
<p>Tel No.: (056) 211-02-52/ +639178756791</p>
<p>Email: databasetechnologycollegeinc@gmail.com</p>
</div>
<div class="contact-form-block">
<form id="contactForm">
<div class="form-group">
<label for="contact-name">Name</label>
<input id="contact-name" name="name" required="" type="text"/>
</div>
<div class="form-group">
<label for="contact-email">Email Address</label>
<input id="contact-email" name="email" required="" type="email"/>
</div>
<div class="form-group">
<label for="contact-message">Your Message</label>
<textarea id="contact-message" name="message" required="" rows="5"></textarea>
</div>
<button class="submit-btn" type="submit">Send Message</button>
</form>
</div>
</div>
</div>
</section>
<section class="section" id="admission">
<div class="form-container">
<div class="form-wrapper">
  <!-- ======== CHECK APPLICATION STATUS ======== -->
<section id="check-status">
  <div class="section-header">Check Application Status</div>
  <div class="status-checker">
    <p>Enter your full name below to check your application status:</p>

    <div class="status-form">
      <input type="text" id="statusName" placeholder="Enter your full name" />
      <button type="button" id="checkStatusBtn">Check Status</button>
    </div>

    <div id="statusResult" class="status-result"></div>
  </div>

  <style>
    .section-header { text-align: center; font-size: 1.8rem; font-weight: 700; margin-bottom: 20px; color: #2e7d32; }
    .status-checker { background: #f9f9f9; padding: 25px; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
    .status-checker p { text-align: center; margin-bottom: 15px; font-size: 1rem; color: #444; }
    .status-form { display: flex; gap: 10px; justify-content: center; margin-top: 15px; flex-wrap: wrap; }
    .status-form input { flex: 1; max-width: 400px; border: 2px solid #ccc; border-radius: 8px; padding: 12px; font-size: 16px; }
    .status-form button { background: linear-gradient(135deg, #388e3c 0%, #2e7d32 100%); color: white; font-weight: bold; border: none; border-radius: 8px; padding: 12px 20px; cursor: pointer; transition: 0.2s; }
    .status-form button:hover { opacity: 0.9; }
    .status-result { text-align: center; margin-top: 20px; font-size: 1.1rem; font-weight: 600; }
    .status-pending { color: orange; }
    .status-approved { color: green; }
    .status-rejected { color: red; }
  </style>

  <script>
    document.getElementById('checkStatusBtn').addEventListener('click', function() {
      const inputName = document.getElementById('statusName').value.trim().toLowerCase();

      // Get all submitted applications from localStorage
      const applications = JSON.parse(localStorage.getItem('applications') || '[]');

      // Find all matching applications (partial match)
      const matches = applications.filter(app => app.name.toLowerCase().includes(inputName));

      const statusResult = document.getElementById('statusResult');
      if (matches.length > 0) {
        statusResult.innerHTML = matches.map(app => {
          let statusClass = '';
          if (app.status.toLowerCase() === 'pending') statusClass = 'status-pending';
          else if (app.status.toLowerCase() === 'approved') statusClass = 'status-approved';
          else if (app.status.toLowerCase() === 'rejected') statusClass = 'status-rejected';
          return `Status for <strong>${app.name}</strong>: <span class="${statusClass}">${app.status}</span>`;
        }).join('<br>');
      } else {
        statusResult.innerHTML = `No record found for "<strong>${document.getElementById('statusName').value}</strong>".`;
      }
    });
  </script>
</section>
<style>
:root {
  --green1: #006400;
  --green2: #388e3c;
  --soft-green: #e8f5e8;
}
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f4f6f5;
  margin: 0;
  padding: 40px 10px;
}
.form-wrapper {
  max-width: 1000px;
  margin: auto;
  background: #fff;
  padding: 40px;
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  font-size: 2.2rem;
  color: #1a1a1a;
  margin-bottom: 8px;
}
p.subtitle {
  text-align: center;
  color: #555;
  margin-bottom: 30px;
}
.section-header {
  background: linear-gradient(135deg, var(--green1), var(--green2));
  color: #fff;
  padding: 14px 18px;
  font-weight: 700;
  border-radius: 8px;
  margin: 30px 0 20px;
}
label {
  font-weight: 600;
  display: block;
  margin-bottom: 6px;
  color: #333;
}
input, select {
  width: 100%;
  padding: 10px 12px;
  border: 2px solid #ddd;
  border-radius: 8px;
  font-size: 15px;
}
input:focus, select:focus {
  border-color: var(--green1);
  outline: none;
  box-shadow: 0 0 0 3px rgba(0,100,0,0.1);
}
.grid {
  display: grid;
  gap: 18px;
}
.grid-4 { grid-template-columns: repeat(4, 1fr); }
.grid-3 { grid-template-columns: repeat(3, 1fr); }
.grid-2 { grid-template-columns: repeat(2, 1fr); }
@media (max-width: 800px) {
  .grid-4, .grid-3 { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 560px) {
  .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
}
.button-group {
  display: flex;
  justify-content: center;
  gap: 14px;
  margin-top: 30px;
}
button {
  border: none;
  background: linear-gradient(135deg, var(--green2), var(--green1));
  color: white;
  padding: 14px 28px;
  font-size: 16px;
  border-radius: 25px;
  font-weight: 700;
  cursor: pointer;
}
button:hover { opacity: 0.9; }
.reset-btn {
  background: linear-gradient(135deg, #757575, #616161);
}
.success-popup {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.success-box {
  background: #fff;
  border-radius: 12px;
  padding: 40px 50px;
  text-align: center;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  animation: pop 0.3s ease;
}
@keyframes pop {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
.success-check {
  font-size: 70px;
  color: var(--green2);
  animation: bounce 0.6s ease;
}
@keyframes bounce {
  0% { transform: scale(0); }
  60% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
</style>
</head>
<body>
<div class="form-wrapper">
  <h1>Admission Application</h1>
  <p class="subtitle">Please fill out the form completely to apply for admission.</p>

  <form id="admissionForm">
    <!-- A. Grade Level and School Information -->
    <div class="section-header">A. GRADE LEVEL AND SCHOOL INFORMATION</div>
    <div class="grid grid-4">
      <div>
        <label>School Year *</label>
        <input type="text" name="schoolYear" value="2024-2025" readonly>
      </div>
      <div>
        <label>LRN (if any)</label>
        <input type="text" name="lrn">
      </div>
      <div>
        <label>Returning (Balik-Aral)</label>
        <select name="returning">
          <option>No</option>
          <option>Yes</option>
        </select>
      </div>
      <div>
        <label>Grade Level to Enroll *</label>
        <input type="text" name="gradeLevel" placeholder="e.g., Grade 11" required>
      </div>
    </div>

    <div class="grid grid-4">
      <div>
        <label>Last Grade Level Completed</label>
        <input type="text" name="lastGrade">
      </div>
      <div>
        <label>Last School Year Completed</label>
        <input type="text" name="lastSY">
      </div>
      <div>
        <label>Last School Attended</label>
        <input type="text" name="lastSchool">
      </div>
      <div>
        <label>School Type</label>
        <select name="schoolType">
          <option>PUBLIC</option>
          <option>PRIVATE</option>
        </select>
      </div>
    </div>
    <div class="grid grid-2">
  <div>
    <label>Strand *</label>
    <select name="strand" required>
      <option value="">Select Strand</option>
      <option value="TVL CP NC II">TVL CP NC II</option>
      <option value="TVL CSS NC II">TVL CSS NC II</option>
      <option value="TVL FBS NC II">TVL FBS NC II</option>
      <option value="TVL EPAS NC II">TVL EPAS NC II</option>
      <option value="GAS">GAS</option>
      <option value="HUMMS">HUMMS</option>
      <option value="ABM">ABM</option>
    </select>
  </div>
</div>


    <div class="grid grid-3">
      <div>
        <label>School to Enroll In</label>
        <input type="text" name="schoolName" value="Data Base Technology College, Inc." readonly>
      </div>
      <div>
        <label>School ID</label>
        <input type="text" name="schoolID" value="114581" readonly>
      </div>
      <div>
        <label>School Address</label>
        <input type="text" name="schoolAddress" value="Roxas Street, Gubat, Sorsogon 4710, Philippines" readonly>
      </div>
    </div>

    <!-- B. Student Information -->
    <div class="section-header">B. STUDENT INFORMATION</div>
    <div class="grid grid-4">
      <div>
        <label>PSA Birth Certificate No.</label>
        <input type="text" name="psaNo">
      </div>
      <div>
        <label>LRN (Learner Ref. No.)</label>
        <input type="text" name="studentLRN">
      </div>
      <div>
        <label>Upload Student Photo</label>
        <input type="file" accept="image/*" name="photo">
      </div>
    </div>

    <div class="grid grid-4">
      <div>
        <label>Last Name *</label>
        <input type="text" id="lastName" name="lastName" required>
      </div>
      <div>
        <label>First Name *</label>
        <input type="text" id="firstName" name="firstName" required>
      </div>
      <div>
        <label>Middle Name</label>
        <input type="text" id="middleName" name="middleName">
      </div>
      <div>
        <label>Suffix</label>
        <input type="text" id="suffix" name="suffix">
      </div>
    </div>

    <div class="grid grid-3">
      <div>
        <label>Birthday *</label>
        <input type="date" id="birthDate" name="birthDate" required>
      </div>
      <div>
        <label>Age</label>
        <input type="number" id="age" name="age" readonly>
      </div>
      <div>
        <label>Sex *</label>
        <select name="sex" required>
          <option value="">Select</option>
          <option>Male</option>
          <option>Female</option>
        </select>
      </div>
    </div>

    <div class="grid grid-2">
      <div>
        <label>Mother Tongue</label>
        <input type="text" name="motherTongue">
      </div>
      <div>
        <label>Religion</label>
        <input type="text" name="religion">
      </div>
    </div>

    <!-- C. Student Address -->
    <div class="section-header">C. STUDENT ADDRESS</div>
    <div class="grid grid-4">
      <div>
        <label>Province *</label>
        <select id="province" required>
          <option value="">Select Province</option>
        </select>
      </div>
      <div>
        <label>City / Municipality *</label>
        <select id="city" required>
          <option value="">Select City</option>
        </select>
      </div>
      <div>
        <label>Barangay *</label>
        <select id="barangay" required>
          <option value="">Select Barangay</option>
        </select>
      </div>
      <div>
        <label>House No. & Street *</label>
        <input type="text" id="address" required>
      </div>
    </div>
    <div>
      <label>Region *</label>
      <select id="region" required>
        <option value="">Select Region</option>
        <option value="Region V - Bicol Region">Region V - Bicol Region</option>
        
      </select>
    </div>

    <!-- D. Parent / Guardian Information -->
    <div class="section-header">D. PARENT / GUARDIAN INFORMATION</div>
    <div class="grid grid-3">
      <div>
        <label>Father's Full Name</label>
        <input type="text" name="fatherName">
      </div>
      <div>
        <label>Mother's Full Name</label>
        <input type="text" name="motherName">
      </div>
      <div>
        <label>Guardian's Full Name</label>
        <input type="text" name="guardianName">
      </div>
    </div>

    <div class="grid grid-3">
      <div>
        <label>Father's Contact</label>
        <input type="tel" name="fatherContact">
      </div>
      <div>
        <label>Mother's Contact</label>
        <input type="tel" name="motherContact">
      </div>
      <div>
        <label>Guardian's Contact</label>
        <input type="tel" name="guardianContact">
      </div>
    </div>

    <!-- E. Required Documents -->
    <div class="section-header">E. REQUIRED DOCUMENTS</div>
    <div>
      <label>Upload Required Documents (Transcript, Birth Cert, ID) *</label>
      <input type="file" multiple required accept=".pdf,.jpg,.png,.doc,.docx">
    </div>

    <div class="button-group">
      <button type="submit">Submit Application</button>
      <button type="reset" class="reset-btn">Reset</button>
    </div>
  </form>
</div>

<!-- âœ… Success Popup -->
<div class="success-popup" id="successPopup">
  <div class="success-box">
    <div class="success-check">âœ…</div>
    <h2>Application Submitted Successfully!</h2>
    <p>Thank you for applying. Your information has been received.</p>
    <button onclick="closeSuccess()">OK</button>
  </div>
</div>

<script>
// âœ… Auto Compute Age
document.getElementById('birthDate').addEventListener('change', function() {
  const birthDate = new Date(this.value);
  const today = new Date();
  let age = today.getFullYear() - birthDate.getFullYear();
  const m = today.getMonth() - birthDate.getMonth();
  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;
  document.getElementById('age').value = age >= 0 ? age : '';
});

// âœ… Address Dropdown via PSGC API
const provinceEl = document.getElementById('province');
const cityEl = document.getElementById('city');
const brgyEl = document.getElementById('barangay');

function resetSelect(el, placeholder) {
  el.innerHTML = `<option value="">${placeholder}</option>`;
}

// Load Provinces
fetch('https://psgc.cloud/api/provinces')
  .then(res => res.json())
  .then(data => {
    data.sort((a,b)=>a.name.localeCompare(b.name)).forEach(p=>{
      const opt=document.createElement('option');
      opt.value=p.code; opt.textContent=p.name;
      provinceEl.appendChild(opt);
    });
  });

provinceEl.addEventListener('change', ()=>{
  const provCode=provinceEl.value;
  resetSelect(cityEl,'Select City');
  resetSelect(brgyEl,'Select Barangay');
  if(!provCode) return;
  fetch(`https://psgc.cloud/api/provinces/${provCode}/cities-municipalities`)
    .then(res=>res.json())
    .then(data=>{
      data.sort((a,b)=>a.name.localeCompare(b.name)).forEach(c=>{
        const opt=document.createElement('option');
        opt.value=c.code; opt.textContent=c.name;
        cityEl.appendChild(opt);
      });
    });
});

cityEl.addEventListener('change', ()=>{
  const cityCode=cityEl.value;
  resetSelect(brgyEl,'Select Barangay');
  if(!cityCode) return;
  fetch(`https://psgc.cloud/api/cities-municipalities/${cityCode}/barangays`)
    .then(res=>res.json())
    .then(data=>{
      data.sort((a,b)=>a.name.localeCompare(b.name)).forEach(b=>{
        const opt=document.createElement('option');
        opt.value=b.name; opt.textContent=b.name;
        brgyEl.appendChild(opt);
      });
    });
});

// âœ… Form Submit Animation
document.getElementById('admissionForm').addEventListener('submit', function(e){
  e.preventDefault();
  document.getElementById('successPopup').style.display='flex';
  this.reset();
});
function closeSuccess(){
  document.getElementById('successPopup').style.display='none';
}
</script>

</div></section>
<!-- REPLACE your old <section id="pre-enrollment"> ... </section> WITH THIS -->
<section id="pre-enrollment">
<div class="form-wrapper">
<h1>Pre-Enrollment Form</h1>
<p class="subtitle">Please fill out all the required fields to complete your pre-enrollment application.</p>
<form id="preEnrollmentForm">
<!-- Personal Information -->
<div class="section-header"> Personal Information</div>
<div class="grid grid-4">
<div>
<label for="lastName">Last Name *</label>
<input id="lastName" name="lastName" required="" type="text"/>
</div>
<div>
<label for="firstName">First Name *</label>
<input id="firstName" name="firstName" required="" type="text"/>
</div>s
<div>
<label for="middleName">Middle Name</label>
<input id="middleName" name="middleName" type="text"/>
</div>
<div>
<label for="suffix">Suffix</label>
<input id="suffix" name="suffix" type="text"/>
</div>
</div>
<div class="grid grid-3">
<div>
<label for="gender">Gender *</label>
<select id="gender" name="gender" required="">
<option value="">Select Gender</option>
<option>Male</option><option>Female</option><option>Prefer not to say</option>
</select>
</div>
<div>
<label for="birthDate">Birth Date *</label>
<input id="birthDate" name="birthDate" required="" type="date"/>
</div>
<div>
<label for="age">Age</label>
<input id="age" name="age" required type="number" placeholder="Enter your age"/>
</div>

</div>
<!-- Address Information -->
<div class="section-header"> Address Information</div>
<div class="grid grid-4">
<div>
<label for="province">Province *</label>
<select id="province" required="">
<option value="">Select Province</option>
</select>
</div>
<div>
<label for="city">City/Municipality *</label>
<select id="city" required="">
<option value="">Select Municipality</option>
</select>
</div>
<div>
<label for="barangay">Barangay *</label>
<select id="barangay" required="">
<option value="">Select Barangay</option>
</select>
</div>
<div>
<label for="address">Bldg./House No., Street *</label>
<input id="address" name="address" required="" type="text"/>
</div>
</div>
<div>
<label for="region">Region *</label>
<select id="region" name="region" required="">
<option value="">Select Region</option>
<option value="Region I - Ilocos Region">Region I - Ilocos Region</option>
<option value="Region II - Cagayan Valley">Region II - Cagayan Valley</option>
<option value="Region III - Central Luzon">Region III - Central Luzon</option>
<option value="Region IV-A - CALABARZON">Region IV-A - CALABARZON</option>
<option value="MIMAROPA Region">MIMAROPA Region</option>
<option value="Region V - Bicol Region">Region V - Bicol Region</option>
<option value="Region VI - Western Visayas">Region VI - Western Visayas</option>
<option value="Region VII - Central Visayas">Region VII - Central Visayas</option>
<option value="Region VIII - Eastern Visayas">Region VIII - Eastern Visayas</option>
<option value="Region IX - Zamboanga Peninsula">Region IX - Zamboanga Peninsula</option>
<option value="Region X - Northern Mindanao">Region X - Northern Mindanao</option>
<option value="Region XI - Davao Region">Region XI - Davao Region</option>
<option value="Region XII - SOCCSKSARGEN">Region XII - SOCCSKSARGEN</option>
<option value="Region XIII - Caraga">Region XIII - Caraga</option>
<option value="NCR - National Capital Region">NCR - National Capital Region</option>
<option value="CAR - Cordillera Administrative Region">CAR - Cordillera Administrative Region</option>
<option value="BARMM - Bangsamoro Autonomous Region in Muslim Mindanao">BARMM - Bangsamoro Autonomous Region in Muslim Mindanao</option>
</select>
</div>
<!-- Contact Information -->
<div class="section-header"> Contact Information</div>
<div class="grid grid-2">
<div>
<label for="email">Email *</label>
<input id="email" name="email" required="" type="email"/>
</div>
<div>
<label for="phone">Phone *</label>
<input id="phone" name="phone" required="" type="tel"/>
</div>
</div>
<!-- Educational Background -->
<div class="section-header"> Educational Background</div>
<div class="grid grid-2">
<div>
<label for="lastSchool">Last School Attended *</label>
<input id="lastSchool" name="lastSchool" required="" type="text"/>
</div>
<div>
<label for="yearAttended">Year Attended *</label>
<input id="yearAttended" name="yearAttended" placeholder="e.g., 2022-2024" required="" type="text"/>
</div>
</div>
<!-- Chosen Strand -->
<div class="section-header"> Chosen Strand</div>
<fieldset>
<legend>Select Your Preferred Program *</legend>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" required="" type="radio" value="TVL CP NC II"/> <span class="strand-title">TVL CP NC II</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="TVL CSS NC II"/> <span class="strand-title">TVL CSS NC II</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="TVL FBS NC II"/> <span class="strand-title">TVL FBS NC II</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="TVL EPAS NC II"/> <span class="strand-title">TVL EPAS NC II</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="GAS"/> <span class="strand-title">GAS</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="HUMSS"/> <span class="strand-title">HUMSS</span></label>
</div>
<div class="strand-option" onclick="selectStrand(this)">
<label><input name="strand" type="radio" value="ABM"/> <span class="strand-title">ABM</span></label>
</div>
</fieldset>
<!-- New File Upload Section -->
<div class="section-header"> Required Documents</div>
<div class="form-group">
<label for="preRequiredDocuments">Upload Required Documents (e.g., Transcript, Birth Certificate, ID) *</label>
<input accept=".pdf,.doc,.docx,.jpg,.png" id="preRequiredDocuments" multiple="" name="preRequiredDocuments" required="" type="file"/>
<small class="note">Accepted formats: PDF, Word, JPG, PNG. Max file size: 5MB per file.</small>
</div>
<div class="button-group">
<button type="submit"><i class="fas fa-paper-plane"></i> Submit</button>
<button class="reset-btn" type="reset"><i class="fas fa-undo"></i> Reset</button>
</div>
</form>
</div>
<style>
:root{--green1:#006400;--green2:#388e3c;}
.form-wrapper{max-width:900px;margin:auto;background:#fff;padding:40px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.15);} 
.form-wrapper h1{text-align:center;color:#1a1a1a;margin-bottom:10px;font-size:2.2rem;font-weight:700;}
.subtitle{text-align:center;font-style:italic;margin-bottom:30px;color:#666;font-size:1.05rem;}
.section-header{background:linear-gradient(135deg,var(--green1) 0%,var(--green2) 100%);color:#fff;padding:14px 20px;margin:30px -40px 20px -40px;font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:10px;border-radius:12px;}
label{display:block;font-weight:600;margin:16px 0 8px;color:#333;}
input,select{width:100%;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;background:#fff;}
input:focus,select:focus{outline:none;border-color:var(--green1);box-shadow:0 0 0 3px rgba(0,100,0,.08);} 
.grid{display:grid;gap:20px;} 
.grid-4{grid-template-columns:repeat(4,1fr);} 
.grid-3{grid-template-columns:repeat(3,1fr);} 
.grid-2{grid-template-columns:repeat(2,1fr);} 
.button-group{display:flex;gap:12px;justify-content:center;margin-top:34px;} 
button{background:linear-gradient(135deg,#388e3c 0%,#2e7d32 100%);color:#fff;border:0;padding:14px 24px;font-weight:700;border-radius:25px;cursor:pointer}
.reset-btn{background:linear-gradient(135deg,#757575 0%,#616161 100%);} 
.strand-option{border:2px solid #e0e0e0;border-radius:10px;padding:12px;margin-bottom:10px;cursor:pointer}
.strand-option:hover{border-color:var(--green1);background:#f8fff8}
.strand-option.selected{border-color:var(--green1);background:#e8f5e8}
.strand-title{font-weight:700;color:var(--green1)}
@media (max-width:900px){.grid-4{grid-template-columns:1fr 1fr}.grid-3{grid-template-columns:1fr 1fr}.grid-2{grid-template-columns:1fr}}
@media (max-width:560px){.grid-4,.grid-3{grid-template-columns:1fr}}

.admin-table-container {
  overflow-x: auto; /* Allow horizontal scroll if table is wider than container */
}

.admin-table {
  width: 100%;
  min-width: 1000px; /* Ensure all columns are fully visible */
  border-collapse: collapse;
  table-layout: auto; /* Keep column widths natural */
}

</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const provinceEl = document.getElementById('province');
  const cityEl = document.getElementById('city');
  const brgyEl = document.getElementById('barangay');

  function resetSelect(select, placeholder) {
    select.innerHTML = '';
    const option = document.createElement('option');
    option.value = '';
    option.textContent = placeholder;
    select.appendChild(option);
  }

  // âœ… Load provinces
  fetch('https://psgc.gitlab.io/api/provinces')
    .then(res => res.json())
    .then(provinces => {
      provinces.sort((a, b) => a.name.localeCompare(b.name)).forEach(p => {
        const opt = document.createElement('option');
        opt.value = p.code;
        opt.textContent = p.name;
        provinceEl.appendChild(opt);
      });
    })
    .catch(err => console.error('Error loading provinces:', err));

  // âœ… When province changes â†’ load cities
  provinceEl.addEventListener('change', () => {
    const provCode = provinceEl.value;
    resetSelect(cityEl, 'Select Municipality');
    resetSelect(brgyEl, 'Select Barangay');
    if (!provCode) return;

    fetch(`https://psgc.gitlab.io/api/provinces/${provCode}/cities-municipalities`)
      .then(res => res.json())
      .then(cities => {
        cities.sort((a, b) => a.name.localeCompare(b.name)).forEach(c => {
          const opt = document.createElement('option');
          opt.value = c.code;
          opt.textContent = c.name;
          cityEl.appendChild(opt);
        });
      })
      .catch(err => console.error('Error loading cities:', err));
  });

  // âœ… When city changes â†’ load barangays
  cityEl.addEventListener('change', () => {
    const cityCode = cityEl.value;
    resetSelect(brgyEl, 'Select Barangay');
    if (!cityCode) return;

    fetch(`https://psgc.gitlab.io/api/cities-municipalities/${cityCode}/barangays`)
      .then(res => res.json())
      .then(barangays => {
        barangays.sort((a, b) => a.name.localeCompare(b.name)).forEach(b => {
          const opt = document.createElement('option');
          opt.value = b.name;
          opt.textContent = b.name;
          brgyEl.appendChild(opt);
        });
      })
      .catch(err => console.error('Error loading barangays:', err));
  });
});
</script>
</section>
<!-- end of pre enrollment form-->
<section class="section" id="gallery">
<h2>Gallery</h2>
<p>Coming soon - Photo gallery of our facilities and activities.</p>
</section>
<section class="section" id="login">
<div class="form-container">
<div class="form-wrapper">
<h1>Login</h1>
<form id="loginForm">
<label for="loginUsername">Username:</label>
<input id="loginUsername" name="username" required="" type="text"/>
<label for="loginPassword">Password:</label>
<input id="loginPassword" name="password" required="" type="password"/>
<button type="submit">Login</button>
<div class="forgot-password" style="text-align: center; margin-top: 15px;">
<a href="#" onclick="showForgotPassword()" style="color: #007BFF; text-decoration: none;">Forgot Password?</a>
</div>
</form>
<div id="loginMessage"></div>
</div>
</div>
</section>
<!-- Forgot Password Modal -->
<div class="modal" id="forgotPasswordModal">
<div class="modal-content">
<div class="modal-header">
<h2>Reset Your Password</h2>
<span class="close" onclick="closeModal('forgotPasswordModal')">Ã—</span>
</div>
<form id="forgotPasswordForm">
<div class="form-group">
<label for="resetEmail">Enter your email address:</label>
<input id="resetEmail" name="resetEmail" required="" type="email"/>
</div>
<div class="form-actions">
<button class="btn-secondary" onclick="closeModal('forgotPasswordModal')" type="button">Cancel</button>
<button class="btn-primary" type="submit">Send Reset Link</button>
</div>
</form>
<div id="resetMessage" style="margin-top: 15px; display: none;"></div>
</div>
</div>
<script>
  function showForgotPassword() {
    document.getElementById('forgotPasswordModal').style.display = 'block';
  }
  function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
  }
  document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('resetEmail').value;
    const messageDiv = document.getElementById('resetMessage');
    messageDiv.style.display = 'block';
    messageDiv.style.color = '#10b981';
    messageDiv.innerHTML = '<i class="fas fa-check-circle"></i> Password reset link has been sent to ' + email;
    document.getElementById('forgotPasswordForm').reset();
    setTimeout(() => {
      closeModal('forgotPasswordModal');
      messageDiv.style.display = 'none';
    }, 3000);
  });
  window.onclick = function(event) {
    const modal = document.getElementById('forgotPasswordModal');
    if (event.target === modal) {
      closeModal('forgotPasswordModal');
    }
  }
</script>

<div id="loginMessage"></div>

<section class="section" id="admin-dashboard">
<div class="admin-sidebar">
<h2>Admin Panel</h2>
<ul>
<li><a class="active" href="#" onclick="showAdminSection('admin-overview')">Overview</a></li>
<li><a href="#" onclick="showAdminSection('admin-students')">All Students</a></li>
<li><a href="#" onclick="showAdminSection('admin-applications')">Applications</a></li>
<li><a href="#" onclick="showAdminSection('admin-archive')">Archive</a></li>
<li><a href="#" onclick="showAdminSection('admin-settings')">Settings</a></li>
<li><a href="#" onclick="logout()">Logout</a></li>
</ul>
</div>
<div class="admin-main-content">
<div class="admin-sub-section active" id="admin-overview">
<div class="dashboard-header">
<div class="dashboard-title">
<h1>Dashboard</h1>
<span class="dashboard-date">Thursday, May 16, 2025</span>
</div>
<div class="admin-profile">
<span>Administrator</span>
<div class="profile-avatar">A</div>
</div>
</div>
<!-- Charts Section -->
<div class="chart-grid">
<div class="chart-card">
<h3>Students by Strand</h3>
<div class="chart-container">
<canvas id="strandChart"></canvas>
</div>
</div>
<div class="chart-card">
<h3>Students by Gender</h3>
<div class="chart-container">
<canvas id="genderChart"></canvas>
</div>
</div>
<div class="chart-card">
<h3>Students by Location</h3>
<div class="chart-container">
<canvas id="locationChart"></canvas>
</div>
</div>
<div class="chart-card">
<h3>Students by Grade Level</h3>
<div class="chart-container">
<canvas id="gradeChart"></canvas>
</div>
</div>
</div>
</div>
<!-- Create Student Account Section -->
<!-- Create Student Account Section -->
<div class="admin-sub-section" id="create-student">
<div class="admin-section-header">
<h1>Register Student</h1>
</div>
<!-- Submenu Tabs -->
<div class="tab-menu">
<button class="active" onclick="showTab(event, 'new-enrollee')">New Enrollee</button>
<button onclick="showTab(event, 'transferee')">Transferee</button>
<button onclick="showTab(event, 're-enrollee')">Re-Enrollee</button>
</div>
<!-- âœ… New Enrollee -->
<div class="search-container" id="new-enrollee-search" style="display:none; margin:15px 0;"><input class="search-input" placeholder="Search student (name or ID)..." type="text"/><button id="new-enrollee-search-btn">Search</button></div><div class="tab-content" id="new-enrollee">
<div class="admin-card">
<h3>New Enrollee Form</h3>
<form class="studentForm">
<!-- Upload -->
<div class="form-group">
<label for="studentPhoto">Upload Student Photo *</label>
<input accept="image/*" class="studentPhoto" required="" type="file"/>
<img class="photoPreview" style="max-width: 150px; margin-top: 10px; border-radius: 10px; display: none;"/>
</div>
<!-- Personal Info -->
<div class="grid grid-3">
<div class="form-group"><label>Student ID *</label><input required="" type="text"/></div>
<div class="form-group"><label>LRN *</label><input required="" type="text"/></div>
<div class="form-group"><label>Enrollment Date *</label><input required="" type="date"/></div>
</div>
<div class="grid grid-3">
<div class="form-group"><label>Last Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>First Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Middle Name</label><input type="text"/></div>
</div>
<div class="grid grid-3">
<div class="form-group"><label>Date of Birth *</label><input class="birthDate" required="" type="date"/></div>
<div class="form-group"><label>Age *</label><input class="age" readonly="" type="number"/></div>
<div class="form-group"><label>Place of Birth *</label><input required="" type="text"/></div>
</div>
<div class="grid grid-3">
<div class="form-group">
<label>Sex *</label>
<select required="">
<option value="">Select</option>
<option>Male</option>
<option>Female</option>
</select>
</div>
<div class="form-group"><label>Nationality *</label><input placeholder="e.g., Filipino" required="" type="text"/></div>
<div class="form-group">
<label>Civil Status *</label>
<select required="">
<option value="">Select</option>
<option>Single</option>
<option>Married</option>
<option>Separated</option>
<option>Widowed</option>
</select>
</div>
</div>
<div class="grid grid-3">
<div class="form-group">
<label>Religion *</label>
<select required="">
<option value="">Select</option>
<option>Roman Catholic</option>
<option>Protestant</option>
<option>Mormon</option>
<option>Iglesia ni Cristo</option>
<option>Muslim</option>
<option>Atheist</option>
<option>Other</option>
</select>
</div>
<div class="form-group">
<label>Strand *</label>
<select required="">
<option value="">Select Strand</option>
<option>CSS NC II</option>
<option>EIM NC II</option>
<option>EPAS NC II</option>
<option>ICT</option>
<option>GAS</option>
<option>ABM</option>
</select>
</div>
<div class="form-group">
<label>Grade Level *</label>
<select required="">
<option value="">Select Grade</option>
<option>11</option>
<option>12</option>
</select>
</div>
</div>
<div class="form-group"><label>Complete Address *</label><input required="" type="text"/></div>
<div class="grid grid-2">
<div class="form-group"><label>Mobile Number *</label><input required="" type="tel"/></div>
<div class="form-group"><label>Email Address *</label><input required="" type="email"/></div>
</div>
<!-- Guardian Info -->
<h4>Guardian Information</h4>
<div class="grid grid-2">
<div class="form-group"><label>Guardian Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Guardian Contact *</label><input required="" type="tel"/></div>
</div>
<!-- Family Info -->
<h4>Family Background</h4>
<div class="grid grid-2">
<div class="form-group"><label>Fatherâ€™s Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Fatherâ€™s Occupation</label><input type="text"/></div>
</div>
<div class="grid grid-2">
<div class="form-group"><label>Motherâ€™s Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Motherâ€™s Occupation</label><input type="text"/></div>
</div>
<h4>Emergency Contact</h4>
<div class="form-group"><label>Emergency Contact Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Emergency Contact Number *</label><input required="" type="tel"/></div>
<div class="form-actions">
  <button type="submit" class="register-btn">Register Student</button>
  <button type="reset" class="reset-btn">Reset</button>
  <button type="button" class="close-btn" onclick="closeModal()">Close</button>
</div>

</form>
</div>
</div>
<!-- âœ… Transferee -->
<div class="search-container" id="transferee-search" style="display:none; margin:15px 0;"><input class="search-input" placeholder="Search student (name or ID)..." type="text"/><button id="transferee-search-btn">Search</button></div><div class="tab-content" id="transferee">
<div class="admin-card">
<h3>Transferee Form</h3>
<form class="studentForm">
<!-- Clone from above -->
<div class="form-group">
<label>Upload Student Photo *</label>
<input accept="image/*" class="studentPhoto" required="" type="file"/>
<img class="photoPreview" style="max-width:150px; margin-top:10px; border-radius:10px; display:none;"/>
</div>
<!-- Previous School Info -->
<h4>Previous School Information</h4>
<div class="grid grid-2">
<div class="form-group"><label>Previous School *</label><input required="" type="text"/></div>
<div class="form-group"><label>Last Grade/Strand *</label><input required="" type="text"/></div>
</div>
<div class="form-group"><label>School Address *</label><input required="" type="text"/></div>
<!-- Include rest of fields -->
<div class="form-group"><label>Student ID *</label><input required="" type="text"/></div>
<div class="form-group"><label>LRN *</label><input required="" type="text"/></div>
<div class="form-group"><label>Enrollment Date *</label><input required="" type="date"/></div>
<div class="grid grid-3">
<div class="form-group"><label>Last Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>First Name *</label><input required="" type="text"/></div>
<div class="form-group"><label>Middle Name</label><input type="text"/></div>
</div>
<div class="form-actions">
<button class="btn-primary" type="submit">Register Transferee</button>
<button class="btn-secondary" type="reset">Reset</button>
<button type="button" class="close-btn" onclick="closeModal()">Close</button>

</div>
</form>
</div>
</div>
<!-- âœ… Re-Enrollee -->
<div class="search-container" id="re-enrollee-search" style="display:none; margin:15px 0;"><input class="search-input" placeholder="Search student (name or ID)..." type="text"/><button id="re-enrollee-search-btn">Search</button></div><div class="tab-content" id="re-enrollee">
<div class="admin-card">
<h3>Re-Enrollee Form</h3>
<label>Search previous student:</label><br><input id="reSearchInput" placeholder="Search previous student..." style="padding:8px; width:70%; border:1px solid #ccc; border-radius:6px;"> <button type="button" onclick="reSearchStudent()" style="padding:8px 12px; background:#2563eb; color:white; border:none; border-radius:6px; cursor:pointer;">Search</button><div id="reSearchResult" style="margin-top:10px;">No search yet.</div>
</div>
</div>

<script>
  
// ======== FIXED STUDENT TYPE LOGIC ========
function showTab(e, tabId) {
  // Remove active highlight from all tab buttons
  document.querySelectorAll("#create-student .tab-menu button").forEach(b => b.classList.remove("active"));
  e.target.classList.add("active");

  // Hide all tab contents and search bars
  document.querySelectorAll("#create-student .tab-content").forEach(tc => tc.style.display = "none");
  document.querySelectorAll("#create-student .search-container").forEach(s => s.style.display = "none");

  // Show logic per tab
  if (tabId === 're-enrollee') {
    // Re-Enrollee shows search first
    const searchEl = document.getElementById(tabId + "-search");
    if (searchEl) searchEl.style.display = "block";
  } else {
    // Enrollee & Transferee show their forms instantly
    const targetTab = document.getElementById(tabId);
    if (targetTab) targetTab.style.display = "block";
  }
}

// Attach search button for Re-Enrollee (show form after search click)
document.addEventListener('DOMContentLoaded', function() {
  const searchBtn = document.getElementById('re-enrollee-search-btn');
  if (searchBtn) {
    searchBtn.addEventListener('click', function() {
      const tab = document.getElementById('re-enrollee');
      if (tab) tab.style.display = 'block';
      const search = document.getElementById('re-enrollee-search');
      if (search) search.style.display = 'none';
    });
  }

  // Initialize: hide all forms and searches
  document.querySelectorAll('#create-student .tab-content').forEach(tc => tc.style.display = 'none');
  document.querySelectorAll('#create-student .search-container').forEach(s => s.style.display = 'none');
});
</script>
</div>
<script></script>
<style>
  .tab-menu {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  .tab-menu button {
    flex: 1;
    background: #c8e6c9;
    border: none;
    padding: 12px;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .tab-menu button.active {
    background: #2e7d32;
    color: white;
  }
  .tab-content { display: none; }
  .tab-content.active { display: block; }

  .admin-card {
    background: #fff;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }
  .grid { display: grid; gap: 15px; }
  .grid-3 { grid-template-columns: repeat(3, 1fr); }
  .grid-2 { grid-template-columns: repeat(2, 1fr); }
  .form-group { display: flex; flex-direction: column; }
  .form-group label { font-weight: 600; margin-bottom: 5px; }
  .form-group input, .form-group select {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  .form-actions { margin-top: 20px; text-align: center; }
  .btn-primary, .btn-secondary {
    padding: 12px 20px;
    border: none;
    border-radius: 25px;
    font-weight: bold;
    cursor: pointer;
  }
  .btn-primary {
    background: linear-gradient(135deg, #2e7d32, #1b5e20);
    color: white;
  }
  .btn-secondary { background: #757575; color: white; }
</style>
<style>
:root{
  --primary:#2e7d32;
  --primary-dark:#1b5e20;
  --muted:#757575;
  --card-bg:#fff;
  --page-bg:#f5f7f8;
}
body{
  margin:0;
  font-family:Inter,Arial;
  background:var(--page-bg);
}
.admin-section-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.search-container{
  display:flex;
  gap:5px;
}
.search-input{padding:7px;border-radius:5px;border:1px solid #ccc}
.add-btn{
  background:var(--primary);
  color:#fff;padding:8px 14px;border:none;border-radius:6px;cursor:pointer;
}
.admin-table{
  width:100%;border-collapse:collapse;margin-top:15px;background:white;
}
.admin-table th,.admin-table td{
  border:1px solid #ddd;padding:8px;text-align:center;
}
.modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.4);display:none;justify-content:center;align-items:center;z-index:9999;
}
.modal.open{display:flex}
.modal-content{
  background:#fff;padding:20px;border-radius:10px;width:90%;max-width:800px;
  max-height:90vh;overflow:auto;
}
.tab-menu{display:flex;gap:10px;margin-bottom:15px}
.tab-menu button{
  flex:1;padding:10px;border:none;background:#eee;cursor:pointer;border-radius:8px;
}
.tab-menu button.active{background:var(--primary);color:#fff}
.tab-content{display:none}
.tab-content.active{display:block}
.grid{display:grid;gap:10px}
.grid-2{grid-template-columns:1fr 1fr}
.grid-3{grid-template-columns:1fr 1fr 1fr}

.btn-primary{
  background:var(--primary);color:#fff;padding:10px;border:none;border-radius:6px;cursor:pointer;width:100%;
}
.btn-secondary{
  background:#aaa;color:#fff;padding:8px;border:none;border-radius:6px;cursor:pointer;
}
.form-group{display:flex;flex-direction:column;}
.photoPreview{border-radius:8px;margin-top:10px;max-width:120px;display:none;}
</style>

</head>
<body>
<!-- âœ… ALL STUDENTS SECTION + ADD / EDIT / RE-ENROLL functionality -->
<section class="admin-sub-section" id="admin-students" style="padding:20px;">

  <div class="admin-section-header">
    <h1>All Students</h1>

    <div class="admin-actions">
      <div class="search-container">
        <input class="search-input" id="studentSearchInput" placeholder="Search by name, ID, LRN..." type="text"/>
        <button class="search-btn" id="studentSearchBtn">Search</button>
        <button class="clear-search-btn" id="clearSearchBtn" style="display:none">Clear</button>
      </div>
      <button class="add-btn" id="openAddStudentBtn">+ Add Student</button>
    </div>
  </div>

  <div class="student-management-container">
    <div class="student-management-content">
      <div class="admin-table-container" id="students-table-container">
        <table class="admin-table" id="students-table" role="table">
          <thead>
            <tr>
              <th>No.of Student</th>
              <th>Name</th>
              <th>Strand</th>
              <th>LRN</th>
              <th>School Year</th>
              <th>Actions</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="students-tbody">
            <tr class="placeholder-row">
              <td colspan="6" style="text-align:center;padding:28px;color:#666">No students yet â€” click <strong>+ Add Student</strong>.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- Add Student Modal (hidden by default) -->
<div id="addStudentModal" class="modal" aria-hidden="true" role="dialog">
  <div class="modal-content" role="document">
    <span class="close" id="closeAddModalBtn" title="Close">&times;</span>
    <h2 id="modalTitle">Add Student</h2>

    <div class="tab-menu" role="tablist" aria-label="Student types">
      <button class="active" data-target="add-new-enrollee" type="button">New Enrollee</button>
      <button data-target="add-transferee" type="button">Transferee</button>
      <button data-target="add-re-enrollee" type="button">Re-Enrollee</button>
    </div>

    <!-- New Enrollee -->
    <div class="tab-content active" id="add-new-enrollee">
      <div class="admin-card">
        <h3>New Enrollee Form</h3>
        <form class="studentForm" id="form-new-enrollee">
          <!-- Upload -->
          <div class="form-group">
            <label for="studentPhoto_new">Upload Student Photo *</label>
            <input accept="image/*" id="studentPhoto_new" class="studentPhoto" type="file"/>
            <img class="photoPreview" id="preview_new" style="display:none;"/>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Student ID *</label><input name="studentId" type="text"/></div>
            <div class="form-group"><label>LRN *</label><input name="lrn" type="text"/></div>
            <div class="form-group"><label>Enrollment Date *</label><input name="enrollDate" type="date"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Last Name *</label><input name="lastName" type="text"/></div>
            <div class="form-group"><label>First Name *</label><input name="firstName" type="text"/></div>
            <div class="form-group"><label>Middle Name</label><input name="middleName" type="text"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Date of Birth *</label><input class="birthDate" name="dob" type="date"/></div>
            <div class="form-group"><label>Age *</label><input class="age" name="age" readonly type="number"/></div>
            <div class="form-group"><label>Place of Birth *</label><input name="pob" type="text"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Sex *</label><select name="sex"><option value="">Select</option><option>Male</option><option>Female</option></select></div>
            <div class="form-group"><label>Nationality *</label><input name="nationality" type="text"/></div>
            <div class="form-group"><label>Civil Status *</label>
              <select name="civilStatus"><option value="">Select</option><option>Single</option><option>Married</option></select>
            </div>
          </div>

          <div class="grid grid-3">
            <div class="form-group">
              <label>Religion *</label>
              <select name="religion">
                <option value="">Select</option>
                <option>Roman Catholic</option><option>Protestant</option><option>Mormon</option><option>Iglesia ni Cristo</option><option>Muslim</option><option>Atheist</option><option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label>Strand *</label>
              <select name="strand">
                <option value="">Select Strand</option><option>CSS NC II</option><option>EIM NC II</option><option>EPAS NC II</option><option>ICT</option><option>GAS</option><option>ABM</option>
              </select>
            </div>
            <div class="form-group"><label>Grade Level *</label><select name="gradeLevel"><option value="">Select Grade</option><option>11</option><option>12</option></select></div>
          </div>

          <div class="form-group"><label>Complete Address *</label><input name="address" type="text"/></div>

          <div class="grid grid-2">
            <div class="form-group"><label>Mobile Number *</label><input name="mobile" type="tel"/></div>
            <div class="form-group"><label>Email Address *</label><input name="email" type="email"/></div>
          </div>

          <h4>Guardian Information</h4>
          <div class="grid grid-2">
            <div class="form-group"><label>Guardian Name *</label><input name="guardianName" type="text"/></div>
            <div class="form-group"><label>Guardian Contact *</label><input name="guardianContact" type="tel"/></div>
          </div>

          <h4>Family Background</h4>
          <div class="grid grid-2">
            <div class="form-group"><label>Fatherâ€™s Name *</label><input name="fatherName" type="text"/></div>
            <div class="form-group"><label>Fatherâ€™s Occupation</label><input name="fatherOcc" type="text"/></div>
          </div>

          <div class="grid grid-2">
            <div class="form-group"><label>Motherâ€™s Name *</label><input name="motherName" type="text"/></div>
            <div class="form-group"><label>Motherâ€™s Occupation</label><input name="motherOcc" type="text"/></div>
          </div>

          <h4>Emergency Contact</h4>
          <div class="form-group"><label>Emergency Contact Name *</label><input name="emergencyName" type="text"/></div>
          <div class="form-group"><label>Emergency Contact Number *</label><input name="emergencyNumber" type="tel"/></div>

          <div class="form-actions">
            <button class="btn-primary" type="submit" id="submitNew">Register Student</button>
            <button class="btn-secondary" type="reset">Reset</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Transferee (same full form style) -->
    <div class="tab-content" id="add-transferee">
      <div class="admin-card">
        <h3>Transferee Form</h3>
        <form class="studentForm" id="form-transferee">
          <div class="form-group">
            <label for="studentPhoto_trans">Upload Student Photo *</label>
            <input accept="image/*" id="studentPhoto_trans" class="studentPhoto" type="file"/>
            <img class="photoPreview" id="preview_trans" style="display:none;"/>
          </div>

          <h4>Previous School Information</h4>
          <div class="grid grid-2">
            <div class="form-group"><label>Previous School *</label><input name="prevSchool" type="text"/></div>
            <div class="form-group"><label>Last Grade/Strand *</label><input name="prevGradeStrand" type="text"/></div>
          </div>
          <div class="form-group"><label>School Address *</label><input name="schoolAddress" type="text"/></div>

          <!-- student info fields (same as new) -->
          <div class="grid grid-3">
            <div class="form-group"><label>Student ID *</label><input name="studentId" type="text"/></div>
            <div class="form-group"><label>LRN *</label><input name="lrn" type="text"/></div>
            <div class="form-group"><label>Enrollment Date *</label><input name="enrollDate" type="date"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Last Name *</label><input name="lastName" type="text"/></div>
            <div class="form-group"><label>First Name *</label><input name="firstName" type="text"/></div>
            <div class="form-group"><label>Middle Name</label><input name="middleName" type="text"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Date of Birth *</label><input class="birthDate" name="dob" type="date"/></div>
            <div class="form-group"><label>Age *</label><input class="age" name="age" readonly type="number"/></div>
            <div class="form-group"><label>Place of Birth *</label><input name="pob" type="text"/></div>
          </div>

          <div class="grid grid-3">
            <div class="form-group"><label>Sex *</label>
              <select name="sex"><option value="">Select</option><option>Male</option><option>Female</option></select>
            </div>
            <div class="form-group"><label>Nationality *</label><input name="nationality" type="text"/></div>
            <div class="form-group"><label>Civil Status *</label>
              <select name="civilStatus"><option value="">Select</option><option>Single</option><option>Married</option></select>
            </div>
          </div>

          <div class="grid grid-3">
            <div class="form-group">
              <label>Religion *</label>
              <select name="religion">
                <option value="">Select</option>
                <option>Roman Catholic</option><option>Protestant</option><option>Mormon</option><option>Iglesia ni Cristo</option><option>Muslim</option><option>Atheist</option><option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label>Strand *</label>
              <select name="strand">
                <option value="">Select Strand</option><option>CSS NC II</option><option>EIM NC II</option><option>EPAS NC II</option><option>ICT</option><option>GAS</option><option>ABM</option>
              </select>
            </div>
            <div class="form-group"><label>Grade Level *</label><select name="gradeLevel"><option value="">Select Grade</option><option>11</option><option>12</option></select></div>
          </div>

          <div class="form-group"><label>Complete Address *</label><input name="address" type="text"/></div>

          <div class="grid grid-2">
            <div class="form-group"><label>Mobile Number *</label><input name="mobile" type="tel"/></div>
            <div class="form-group"><label>Email Address *</label><input name="email" type="email"/></div>
          </div>

          <h4>Guardian Information</h4>
          <div class="grid grid-2">
            <div class="form-group"><label>Guardian Name *</label><input name="guardianName" type="text"/></div>
            <div class="form-group"><label>Guardian Contact *</label><input name="guardianContact" type="tel"/></div>
          </div>

          <h4>Family Background</h4>
          <div class="grid grid-2">
            <div class="form-group"><label>Fatherâ€™s Name *</label><input name="fatherName" type="text"/></div>
            <div class="form-group"><label>Fatherâ€™s Occupation</label><input name="fatherOcc" type="text"/></div>
          </div>

          <div class="grid grid-2">
            <div class="form-group"><label>Motherâ€™s Name *</label><input name="motherName" type="text"/></div>
            <div class="form-group"><label>Motherâ€™s Occupation</label><input name="motherOcc" type="text"/></div>
          </div>

          <h4>Emergency Contact</h4>
          <div class="form-group"><label>Emergency Contact Name *</label><input name="emergencyName" type="text"/></div>
          <div class="form-group"><label>Emergency Contact Number *</label><input name="emergencyNumber" type="tel"/></div>

          <div class="form-actions">
            <button class="btn-primary" type="submit">Register Transferee</button>
            <button class="btn-secondary" type="reset">Reset</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Re-Enrollee (search then open the full form prefilled) -->
    <div class="tab-content" id="add-re-enrollee">
      <div class="admin-card">
        <h3>Re-Enrollee</h3>

        <label for="reSearchInput">Search Previous Student (Name or ID)</label>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px;">
          <input id="reSearchInput" placeholder="Enter name or ID" style="flex:1;padding:8px;border:1px solid #ccc;border-radius:6px;">
          <button id="btnReSearch" class="btn-secondary" type="button">Search</button>
        </div>

        <div id="reResult" style="display:none; padding:10px; border:1px solid #ddd; border-radius:6px; margin-bottom:10px;">
          <p><b>Student Found:</b> <span id="reName"></span></p>
          <p><b>LRN:</b> <span id="reLRN"></span></p>
          <p><b>Strand:</b> <span id="reStrand"></span></p>
          <p><b>Grade Level:</b> <span id="reGrade"></span></p>
          <img id="rePhoto" style="width:60px;height:60px;border-radius:6px;display:block;margin-top:8px;">
          <div style="margin-top:10px;">
            <button id="btnOpenReForm" class="btn-primary" type="button">Open Full Form (Edit before Re-Enroll)</button>
            <button id="btnQuickReEnroll" class="btn-secondary" type="button" style="margin-left:10px;">Quick Re-Enroll (no changes)</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Styles (keep / adapt as you have) -->
<style>
  :root{
    --primary:#2e7d32;
    --muted:#757575;
  }
  .admin-section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .search-container{display:flex;gap:8px;align-items:center}
  .search-input{padding:8px;border-radius:6px;border:1px solid #ccc}
  .add-btn{background:var(--primary);color:#fff;padding:8px 14px;border:none;border-radius:6px;cursor:pointer}
  .admin-table{width:100%;border-collapse:collapse;margin-top:15px;background:white}
  .admin-table th,.admin-table td{border:1px solid #eee;padding:10px;text-align:center}
  .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);display:none;justify-content:center;align-items:center;z-index:9999}
  .modal.open{display:flex}
  .modal-content{background:#fff;padding:18px;border-radius:10px;width:92%;max-width:1000px;max-height:90vh;overflow:auto;position:relative}
  .close{position:absolute;right:12px;top:8px;cursor:pointer;font-size:22px}
  .tab-menu{display:flex;gap:8px;margin-bottom:12px}
  .tab-menu button{flex:1;padding:8px;border-radius:8px;border:none;background:#eee;cursor:pointer}
  .tab-menu button.active{background:var(--primary);color:#fff}
  .tab-content{display:none}
  .tab-content.active{display:block}
  .grid{display:grid;gap:12px}
  .grid-2{grid-template-columns:repeat(2,1fr)}
  .grid-3{grid-template-columns:repeat(3,1fr)}
  .form-group{display:flex;flex-direction:column}
  .form-group label{font-weight:600;margin-bottom:6px}
  .form-group input,.form-group select{padding:8px;border-radius:6px;border:1px solid #ccc}
  .btn-primary{background:var(--primary);color:#fff;padding:10px;border:none;border-radius:8px;cursor:pointer}
  .btn-secondary{background:#888;color:#fff;padding:8px;border:none;border-radius:8px;cursor:pointer}
  .photoPreview{margin-top:8px;max-width:120px;border-radius:8px;display:none}
  .admin-card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
  .actions-row button{margin:0 4px}
</style>

<!-- Script -->
<script>
(function(){
  // State
  let students = []; // array of student objects { ...fields..., photoDataURL, status }
  let editingIndex = null; // if editing an existing record
  let reEnrollSourceIndex = null; // if re-enrolling from an existing record
  const STORAGE_KEY = "school_students_v1";

  // Elements
  const modal = document.getElementById("addStudentModal");
  const openBtn = document.getElementById("openAddStudentBtn");
  const closeBtn = document.getElementById("closeAddModalBtn");
  const tabButtons = document.querySelectorAll(".tab-menu button");
  const tabContents = document.querySelectorAll(".tab-content");

  const studentsTbody = document.getElementById("students-tbody");

  // New form elements
  const formNew = document.getElementById("form-new-enrollee");
  const photoNew = document.getElementById("studentPhoto_new");
  const previewNew = document.getElementById("preview_new");
  const submitNewBtn = document.getElementById("submitNew");

  // Transferee form
  const formTrans = document.getElementById("form-transferee");
  const photoTrans = document.getElementById("studentPhoto_trans");
  const previewTrans = document.getElementById("preview_trans");

  // Re-enrollee search area elements
  const reSearchInput = document.getElementById("reSearchInput");
  const btnReSearch = document.getElementById("btnReSearch");
  const reResult = document.getElementById("reResult");
  const reName = document.getElementById("reName");
  const reLRN = document.getElementById("reLRN");
  const reStrand = document.getElementById("reStrand");
  const reGrade = document.getElementById("reGrade");
  const rePhoto = document.getElementById("rePhoto");
  const btnOpenReForm = document.getElementById("btnOpenReForm");
  const btnQuickReEnroll = document.getElementById("btnQuickReEnroll");

  // Top search
  const studentSearchInput = document.getElementById("studentSearchInput");
  const studentSearchBtn = document.getElementById("studentSearchBtn");
  const clearSearchBtn = document.getElementById("clearSearchBtn");

  // Utility: load/save
  function loadStudents(){
    const raw = localStorage.getItem(STORAGE_KEY);
    students = raw ? JSON.parse(raw) : [];
  }
  function saveStudents(){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(students));
  }

  // Render list
  function renderStudents(filter=""){
    studentsTbody.innerHTML = "";
    const list = students.filter(s => {
      if(!filter) return true;
      const q = filter.toLowerCase();
      return (s.lastName + " " + s.firstName + " " + (s.studentId||"") + " " + (s.lrn||"")).toLowerCase().includes(q);
    });

    if(list.length === 0){
      studentsTbody.innerHTML = '<tr class="placeholder-row"><td colspan="6" style="text-align:center;padding:28px;color:#666">No students yet â€” click <strong>+ Add Student</strong>.</td></tr>';
      return;
    }

    list.forEach((s, idx) => {
      const tr = document.createElement("tr");

      const imgSrc = s.photoDataURL || "https://via.placeholder.com/40";
      const fullName = `${s.lastName || ""} ${s.firstName || ""}`.trim();
      const program = s.strand || s.prevGradeStrand || "";
      const grade = s.gradeLevel || "";

      tr.innerHTML = `
        <td><img src="${imgSrc}" style="width:40px;height:40px;border-radius:5px;" alt="photo"></td>
        <td>${fullName}${s.lrn ? ' <small style="color:#666">| '+s.lrn+'</small>' : ''}</td>
        <td>${program}</td>
        <td>${grade}</td>
        <td>${s.status || "N/A"}</td>
        <td class="actions-row">
          <button class="btn-edit" data-idx="${idx}">Edit</button>
          <button class="btn-reenroll" data-idx="${idx}">Re-Enroll</button>
          <button class="btn-del" data-idx="${idx}">Delete</button>
        </td>
      `;

      studentsTbody.appendChild(tr);
    });

    // attach handlers
    document.querySelectorAll(".btn-del").forEach(b=>b.addEventListener("click", (e)=>{
      const i = Number(e.currentTarget.dataset.idx);
      if(!isNaN(i)) {
        if(confirm("Delete this student? This will remove the record.")){
          students.splice(i,1);
          saveStudents();
          renderStudents(studentSearchInput.value.trim());
        }
      }
    }));

    document.querySelectorAll(".btn-edit").forEach(b=>b.addEventListener("click", (e)=>{
      const i = Number(e.currentTarget.dataset.idx);
      if(!isNaN(i)) openEditForm(i);
    }));

    document.querySelectorAll(".btn-reenroll").forEach(b=>b.addEventListener("click", (e)=>{
      const i = Number(e.currentTarget.dataset.idx);
      if(!isNaN(i)) openReEnrollFromRow(i);
    }));
  }

  // Helpers: switch tabs in modal
  function openModalTab(targetId){
    tabButtons.forEach(b=>b.classList.remove("active"));
    tabContents.forEach(tc=>tc.classList.remove("active"));
    const btn = Array.from(tabButtons).find(b=>b.dataset.target === targetId);
    if(btn) btn.classList.add("active");
    const content = document.getElementById(targetId);
    if(content) content.classList.add("active");
  }

  // Open modal (Add)
  openBtn.addEventListener("click", ()=> {
    editingIndex = null;
    reEnrollSourceIndex = null;
    document.getElementById("modalTitle").innerText = "Add Student";
    openModalTab("add-new-enrollee");
    resetForms();
    // ensure enrollDate is editable
    const enrollInput = formNew.querySelector('input[name="enrollDate"]');
    if(enrollInput) enrollInput.readOnly = false;
    submitNewBtn.innerText = "Register Student";
    modal.classList.add("open");
  });
  closeBtn.addEventListener("click", ()=> modal.classList.remove("open"));
  window.addEventListener("click", (ev)=> { if(ev.target === modal) modal.classList.remove("open"); });

  // Tab button clicks
  tabButtons.forEach(btn=> btn.addEventListener("click", ()=>{
    const targ = btn.dataset.target;
    openModalTab(targ);
  }));

  // Image preview helpers
  function setupPreview(inputEl, imgEl){
    if(!inputEl || !imgEl) return;
    inputEl.addEventListener("change", (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f){ imgEl.style.display = "none"; imgEl.src = ""; return; }
      imgEl.src = URL.createObjectURL(f);
      imgEl.style.display = "block";
    });
  }
  setupPreview(photoNew, previewNew);
  setupPreview(photoTrans, previewTrans);

  // Age calc for every birthDate input in modal (delegated)
  function attachAgeCalc(container){
    container.querySelectorAll(".birthDate").forEach(inp=>{
      inp.addEventListener("change", (e)=>{
        const b = new Date(e.target.value), t = new Date();
        let a = t.getFullYear() - b.getFullYear();
        if(t.getMonth() < b.getMonth() || (t.getMonth() === b.getMonth() && t.getDate() < b.getDate())) a--;
        const ageInput = e.target.closest("form").querySelector(".age");
        if(ageInput) ageInput.value = a > 0 ? a : "";
      });
    });
  }
  attachAgeCalc(document);

  // Reset forms
  function resetForms(){
    formNew.reset();
    formTrans.reset();
    previewNew.style.display = "none";
    previewTrans.style.display = "none";
    editingIndex = null;
    reEnrollSourceIndex = null;
    // make enrollDate editable
    const enrollInput = formNew.querySelector('input[name="enrollDate"]');
    if(enrollInput) enrollInput.readOnly = false;
    submitNewBtn.innerText = "Register Student";
  }

  // Convert file to dataURL promise
  function fileToDataURL(file){
    return new Promise((resolve, reject)=>{
      if(!file) return resolve(null);
      const fr = new FileReader();
      fr.onload = ()=> resolve(fr.result);
      fr.onerror = ()=> reject("File read error");
      fr.readAsDataURL(file);
    });
  }

  // Build student object from a form element
  async function buildStudentFromForm(formEl, statusLabel, existingPhotoDataURL){
    const fd = new FormData(formEl);
    const obj = {};
    // copy fields (we accept all named inputs in the form)
    for(const [k,v] of fd.entries()){
      obj[k] = v;
    }
    // default status
    obj.status = statusLabel || "New Enrollee";
    // Photo handling: if a file chosen, convert to dataURL; otherwise preserve existingPhotoDataURL if provided
    const fileInput = formEl.querySelector('input[type="file"]');
    if(fileInput && fileInput.files && fileInput.files[0]){
      obj.photoDataURL = await fileToDataURL(fileInput.files[0]);
    } else {
      obj.photoDataURL = existingPhotoDataURL || "";
    }
    return obj;
  }

  // Add / Update New student submit handler
  async function submitNewHandler(e){
    e.preventDefault();
    const isEditing = (editingIndex !== null);
    // determine existing photo to preserve if no new file:
    const existingPhoto = (isEditing ? (students[editingIndex] && students[editingIndex].photoDataURL) : (reEnrollSourceIndex !== null ? (students[reEnrollSourceIndex] && students[reEnrollSourceIndex].photoDataURL) : null));
    const statusLabel = isEditing ? students[editingIndex].status : (reEnrollSourceIndex !== null ? "Re-Enrollee" : "New Enrollee");
    const student = await buildStudentFromForm(formNew, statusLabel, existingPhoto);

    // If this is a re-enroll flow we must keep the old enrollment date â€” ensure formNew had enrollDate set to original and readonly
    // (the form already contains the value as readonly, so the built student will have the original enrollDate)
    if(isEditing){
      // update existing record
      students[editingIndex] = {...students[editingIndex], ...student};
    } else {
      // new record (either regular new or re-enroll new record)
      students.push(student);
    }

    saveStudents();
    renderStudents(studentSearchInput.value.trim());

    // reset
    formNew.reset();
    previewNew.style.display = "none";
    editingIndex = null;
    reEnrollSourceIndex = null;
    submitNewBtn.innerText = "Register Student";
    modal.classList.remove("open");
  }

  // Transferee submit (same pattern but status Transferee)
  async function submitTransHandler(e){
    e.preventDefault();
    const student = await buildStudentFromForm(formTrans, "Transferee", null);
    students.push(student);
    saveStudents();
    renderStudents(studentSearchInput.value.trim());
    formTrans.reset();
    previewTrans.style.display = "none";
    modal.classList.remove("open");
  }

  // Hook form submits
  formNew.addEventListener("submit", submitNewHandler);
  formTrans.addEventListener("submit", submitTransHandler);

  // Edit: open modal and populate form with existing student data,
  // set editingIndex so submit updates record.
  function openEditForm(index){
    const s = students[index];
    if(!s) return;
    editingIndex = index;
    reEnrollSourceIndex = null;
    document.getElementById("modalTitle").innerText = "Edit Student";
    openModalTab("add-new-enrollee");

    // populate formNew fields
    const f = formNew;
    const fields = f.querySelectorAll("input[name], select[name], textarea[name]");
    fields.forEach(el=>{
      const name = el.name;
      if(!name) return;
      // skip file input
      if(el.type === "file") return;
      el.value = s[name] !== undefined ? s[name] : "";
    });

    // photo preview (use dataURL if present)
    if(s.photoDataURL){
      previewNew.src = s.photoDataURL;
      previewNew.style.display = "block";
    } else {
      previewNew.style.display = "none";
    }

    // make enrollDate editable when editing existing
    const enrollInput = f.querySelector('input[name="enrollDate"]');
    if(enrollInput) enrollInput.readOnly = false;

    submitNewBtn.innerText = "Update Student";
    modal.classList.add("open");
  }

  // Re-Enroll from table: open New form prefilled (but do NOT set editingIndex),
  // on submit it will create a new record (keeps old).
  function openReEnrollFromRow(index){
    const s = students[index];
    if(!s) return;
    // prepare New form prefilled
    editingIndex = null; // ensure we will create new record
    reEnrollSourceIndex = index;
    document.getElementById("modalTitle").innerText = "Re-Enroll Student"; // per your choice C
    openModalTab("add-new-enrollee");

    // populate fields in formNew
    const f = formNew;
    const fields = f.querySelectorAll("input[name], select[name], textarea[name]");
    fields.forEach(el=>{
      const name = el.name;
      if(!name) return;
      if(el.type === "file") return; // don't set file input
      // Fill value; keep enrollDate from source
      el.value = s[name] !== undefined ? s[name] : "";
    });

    // Make enrollDate readonly so it's preserved (but still submitted)
    const enrollInput = f.querySelector('input[name="enrollDate"]');
    if(enrollInput){
      enrollInput.readOnly = true; // readonly (will still be included in form submission)
      enrollInput.value = s.enrollDate || enrollInput.value || "";
    }

    // preview the photo
    if(s.photoDataURL){
      previewNew.src = s.photoDataURL;
      previewNew.style.display = "block";
    } else previewNew.style.display = "none";

    // Ensure submit button says "Register" per choice C
    submitNewBtn.innerText = "Register";

    modal.classList.add("open");
  }

  // Re-Enrollee modal tab: search existing records, open full form prefilled or quick reenroll
  btnReSearch.addEventListener("click", ()=>{
    const q = (reSearchInput.value || "").toLowerCase().trim();
    if(!q){ alert("Enter a name or ID to search."); return; }
    const found = students.find(s => {
      const fullname = `${(s.lastName||"")} ${(s.firstName||"")}`.toLowerCase();
      return fullname.includes(q) || (s.studentId && s.studentId.toLowerCase().includes(q)) || (s.lrn && s.lrn.toLowerCase().includes(q));
    });
    if(found){
      reResult.style.display = "block";
      reName.innerText = `${found.lastName || ""} ${found.firstName || ""}`.trim();
      reLRN.innerText = found.lrn || "N/A";
      reStrand.innerText = found.strand || found.prevGradeStrand || "";
      reGrade.innerText = found.gradeLevel || "";
      rePhoto.src = found.photoDataURL || "https://via.placeholder.com/60";
      // store current found reference on buttons
      btnOpenReForm.dataset.idx = students.indexOf(found);
      btnQuickReEnroll.dataset.idx = students.indexOf(found);
      // enable actions
      btnOpenReForm.disabled = false;
      btnQuickReEnroll.disabled = false;
    } else {
      alert("No previous student found.");
      reResult.style.display = "none";
      btnOpenReForm.disabled = true;
      btnQuickReEnroll.disabled = true;
    }
  });

  // Open full form prefilled (re-enroll)
  btnOpenReForm.addEventListener("click", (e)=>{
    const i = Number(e.currentTarget.dataset.idx);
    if(isNaN(i)) return;
    openReEnrollFromRow(i);
  });

  // Quick re-enroll: clone student and push new record (no edit). Keep enrollDate.
  btnQuickReEnroll.addEventListener("click", (e)=>{
    const i = Number(e.currentTarget.dataset.idx);
    if(isNaN(i)) return;
    const s = students[i];
    const clone = JSON.parse(JSON.stringify(s));
    clone.status = "Re-Enrollee";
    students.push(clone);
    saveStudents();
    renderStudents(studentSearchInput.value.trim());
    alert("Quick re-enroll done (no changes).");
  });

  // Top search behavior
  studentSearchBtn.addEventListener("click", ()=>{
    const q = (studentSearchInput.value || "").trim();
    clearSearchBtn.style.display = q ? "inline-block" : "none";
    renderStudents(q);
  });
  clearSearchBtn.addEventListener("click", ()=>{
    studentSearchInput.value = "";
    clearSearchBtn.style.display = "none";
    renderStudents();
  });

  // initial load
  loadStudents();
  renderStudents();

  // Accessibility: ensure re-enroll buttons disabled initially
  if(btnOpenReForm) btnOpenReForm.disabled = true;
  if(btnQuickReEnroll) btnQuickReEnroll.disabled = true;

  // debug console
  console.log("Student management module initialized.");

})();
</script>


<div class="admin-sub-section" id="admin-applications">
<div class="admin-section-header">
<h1>Application Management</h1>
</div>
<div class="admin-table-container">
<table class="application-table" id="applications-table">
<thead>
<tr>
<th>Name</th>
<th>Phone No.</th>
<th>Program</th>
<th>Submitted</th>
<th>Documents</th>
<th>Action</th>
<th>Status</th>
</tr>
</thead>
<tbody id="applications-tbody">
</tbody>
</table>
</div>
</div>
<!-- New Archive Section - MODIFIED TO REMOVE SIDEBAR -->
<div class="admin-sub-section" id="admin-archive">
<div class="admin-section-header">
<h1>Archived Students</h1>
<button class="archive-add-btn" onclick="adminPanel.showAddArchivedStudentModal()">
<i class="fas fa-plus"></i> Add Student to Archive
              </button>
</div>
<div class="archive-container">
<div class="archive-content">
<div class="archive-table-container">
<table class="archive-table" id="archive-students-table">
<thead>
<tr>
<th>Name</th>
<th>Phone no.</th>
<th>Program</th>
<th>Year</th>
<th>Remarks</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="archive-students-tbody">
</tbody>
</table>
</div>
</div>
</div>
</div>
<!-- âœ… FINAL SCRIPT: Move clicked students to Archived Students -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const addArchiveBtn = document.querySelector(".archive-add-btn");
  const archiveModal = document.getElementById("archiveModal");
  const closeArchiveModal = document.getElementById("closeArchiveModal");
  const archiveFilter = document.getElementById("archiveFilter");
  const archiveStudentTable = document
    .getElementById("archiveStudentTable")
    .getElementsByTagName("tbody")[0];
  const archivedTbody = document.getElementById("archive-students-tbody");

  // âœ… Open / Close modal
  if (addArchiveBtn) {
    addArchiveBtn.addEventListener("click", () => {
      archiveModal.style.display = "block";
    });
  }
  if (closeArchiveModal) {
    closeArchiveModal.addEventListener("click", () => {
      archiveModal.style.display = "none";
    });
  }
  window.addEventListener("click", (event) => {
    if (event.target === archiveModal) {
      archiveModal.style.display = "none";
    }
  });

  // âœ… Clickable buttons â€“ move to Archived Students
  document.querySelectorAll(".status-cell").forEach((cell) => {
    const buttons = cell.querySelectorAll(".status-btn");
    const row = cell.closest("tr");

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        // Remove all active buttons in this cell
        buttons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        // Get student info
        const name = row.cells[0].innerText.trim();
        const year = row.cells[2].innerText.trim();
        const status = btn.textContent.trim();

        // âœ… Create new archived row
        const newRow = document.createElement("tr");
        newRow.innerHTML = `
          <td>${name}</td>
          <td>-</td>
          <td>-</td>
          <td>${year}</td>
          <td>${status}</td>
          <td><button class="btn btn-danger btn-sm" onclick="this.closest('tr').remove()">Remove</button></td>
        `;

        // Add to archived table
        archivedTbody.appendChild(newRow);

        // Remove from student list
        row.remove();

        console.log(`${name} moved to Archived Students as ${status}`);
      });
    });
  });

  // âœ… Filter by Status inside modal
  archiveFilter.addEventListener("change", () => {
    const selected = archiveFilter.value;
    const rows = archiveStudentTable.querySelectorAll("tr");
    rows.forEach((row) => {
      const status =
        row.querySelector(".status-cell")?.getAttribute("data-status") || "";
      row.style.display =
        selected === "All" || status === selected ? "" : "none";
    });
  });
});
</script>

<!-- End New Archive Section -->
<!-- Settings Section -->
<div class="admin-sub-section" id="admin-settings">
<div class="admin-section-header">
<h1>System Settings</h1>
</div>
<div class="settings-container">
<div class="settings-tabs">
<div class="settings-tab active" onclick="showSettingsSection('general')">General</div>
<div class="settings-tab" onclick="showSettingsSection('academic')">Academic</div>

</div>
<!-- General Settings -->
<div class="settings-section active" id="settings-general">
<div class="settings-card">
<h3>School Information</h3>
<form class="settings-form" id="generalSettingsForm">
<div class="settings-form-group">
<label for="schoolName">School Name</label>
<input id="schoolName" name="schoolName" required="" type="text" value="Database Technology College, Inc."/>
</div>
<div class="settings-form-group">
<label for="schoolAddress">Address</label>
<input id="schoolAddress" name="schoolAddress" required="" type="text" value="Roxas Street, Gubat, Sorsogon 4710, Philippines"/>
</div>
<div class="settings-form-group">
<label for="schoolPhone">Phone Number</label>
<input id="schoolPhone" name="schoolPhone" required="" type="text" value="(056) 211-02-52"/>
</div>
<div class="settings-form-group">
<label for="schoolEmail">Email Address</label>
<input id="schoolEmail" name="schoolEmail" required="" type="email" value="databasetechnologycollegeinc@gmail.com"/>
</div>
<div class="settings-form-group">
<label for="schoolWebsite">Website</label>
<input id="schoolWebsite" name="schoolWebsite" required="" type="text" value="https://dbtc.edu.ph"/>
</div>
<div class="settings-form-actions">
<button class="btn-secondary" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Changes</button>
</div>
</form>
</div>
<div class="settings-form-group">
<label for="dateFormat">Date Format</label>
<select id="dateFormat" name="dateFormat" required="">
<option selected="" value="MM/DD/YYYY">MM/DD/YYYY</option>
<option value="DD/MM/YYYY">DD/MM/YYYY</option>
<option value="YYYY-MM-DD">YYYY-MM-DD</option>
</select>
</div>
<div class="settings-form-group">
<label for="language">Default Language</label>
<select id="language" name="language" required="">
<option selected="" value="en">English</option>
<option value="fil">Filipino</option>
</select>
</div>
<div class="settings-form-actions">
<button class="btn-secondary" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Changes</button>
</div>
</form>
</div>
</div>
<!-- Academic Settings -->
<div class="settings-section" id="settings-academic">
<div class="settings-card">
<h3>Academic Year</h3>
<form class="settings-form" id="academicYearForm">
<div class="settings-form-group">
<label for="currentAcademicYear">Current Academic Year</label>
<input id="currentAcademicYear" name="currentAcademicYear" required="" type="text" value="2024-2025"/>
</div>
<div class="settings-form-group">
<label for="currentSemester">Current Semester</label>
<select id="currentSemester" name="currentSemester" required="">
<option selected="" value="1">First Semester</option>
<option value="2">Second Semester</option>
<option value="summer">Summer</option>
</select>
</div>
<div class="settings-form-group">
<label for="semesterStartDate">Semester Start Date</label>
<input id="semesterStartDate" name="semesterStartDate" required="" type="date" value="2024-08-01"/>
</div>
<div class="settings-form-group">
<label for="semesterEndDate">Semester End Date</label>
<input id="semesterEndDate" name="semesterEndDate" required="" type="date" value="2024-12-15"/>
</div>
<div class="settings-form-actions">
<button class="btn-secondary" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Changes</button>
</div>
</form>


<!-- End Settings Section -->
<div class="admin-sub-section" id="admin-reports">
<h1>Reports</h1>
<p>System reports and analytics will be displayed here.</p>
</div>
</div>
</section>
<footer class="main-footer">
<div class="footer-top">
<div class="footer-content-wrapper">
<div class="footer-column">
<p><strong>Database Technology College</strong></p>
<p>Roxas Street, Gubat, Sorsogon 4710, Philippines</p>
<p>Tel: (056) 211-02-52</p>
<p>Mobile: +639178756791</p>
<p>Email: databasetechnologycollegeinc@gmail.com</p>
<p><strong>Follow Us</strong></p>
<div class="social-icons">
<a href="https://www.facebook.com/databasetechnologycollege" target="_blank">
  <i class="fab fa-facebook"></i>
</a>

</div>
</div>
</div>
<div class="footer-bottom">
<p>Â© 2024 Database Technology College. All rights reserved.</p>
</div>
</footer>
<!-- Modals for Forms -->
<!-- Student Form Modal -->
<div class="modal" id="studentModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="studentModalTitle">Add Student</h2>
<span class="close" onclick="closeModal('studentModal')">Ã—</span>
</div>
<form id="studentForm" onsubmit="handleStudentFormSubmit(event); return false;">
<div class="image-upload-container">
<label for="studentImage">Student Picture (1x1):</label>
<input accept="image/*" id="studentImage" name="studentImage" onchange="previewImage(event)" type="file"/>
<div class="image-preview" id="imagePreview">
<div class="image-placeholder">No image selected</div>
</div>
</div>
<div class="form-group">
<label for="firstName">First Name:</label>
<input id="firstName" name="firstName" required="" type="text"/>
</div>
<div class="form-group">
<label for="lastName">Last Name:</label>
<input id="lastName" name="lastName" required="" type="text"/>
</div>
<div class="form-group">
<label for="email">Email:</label>
<input id="email" name="email" required="" type="email"/>
</div>
<div class="form-group">
<label for="religion">Religion:</label>
<select id="religion" name="religion" required="">
<option value="">Select Religion</option>
<option value="Roman Catholic">Roman Catholic</option>
<option value="Christian">Christian</option>
<option value="Muslim">Muslim</option>
<option value="Iglesia Ni Cristo">Iglesia Ni Cristo</option>
</select>
</div>
<div class="form-group">
<label for="program">Program:</label>
<select id="program" name="program" required="">
<option value="">Select Program</option>
<option value="Computer System Servicing NC II">Computer System Servicing NC II</option>
<option value="Electrical Installation and Maintenance NC II">Electrical Installation and Maintenance NC II</option>
<option value="Electronic Products Assembly &amp; Servicing NC II">Electronic Products Assembly &amp; Servicing NC II</option>
<option value="Computer Programming NC III">Computer Programming NC III</option>
<option value="General Academic Strand">General Academic Strand</option>
<option value="Accountancy Business Management">Accountancy Business Management</option>
</select>
</div>
<div class="form-group">
<label for="GradeLevel">Grade Level:</label>
<select id="GradeLevel" name="GradeLevel" required="">
<option value="">Select Grade Level</option>
<option value="11">Grade 11</option>
<option value="12">Grade 12</option>
</select>
</div>
<div class="form-group">
<label for="status">Status:</label>
<select id="status" name="status" required="">
<option value="active">Active</option>
<option value="inactive">Inactive</option>
</select>
</div>
<div class="form-actions">
<button class="btn-secondary" onclick="closeModal('studentModal')" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Student</button>
</div>
</form>
</div>
</div>
<!-- Student Details Modal -->
<div class="modal student-details-modal" id="studentDetailsModal">
<div class="modal-content">
<div class="modal-header">
<h2>Student Details</h2>
<span class="close" onclick="closeModal('studentDetailsModal')">Ã—</span>
</div>
<div class="student-details-header">
<div class="student-details-image" id="studentDetailsImage">
<i class="fas fa-user-circle fa-5x" style="color: #ccc;"></i>
</div>
<div class="student-details-name">
<h2 id="studentDetailsFullName">Loading...</h2>
<p id="studentDetailsProgram">Loading...</p>
</div>
</div>
<div class="student-details-section">
<h3>Personal Information</h3>
<div class="student-details-grid">
<div class="student-details-field">
<label>First Name</label>
<span id="studentDetailsFirstName">-</span>
</div>
<div class="student-details-field">
<label>Last Name</label>
<span id="studentDetailsLastName">-</span>
</div>
<div class="student-details-field">
<label>Email</label>
<span id="studentDetailsEmail">-</span>
</div>
<div class="student-details-field">
<label>Religion</label>
<span id="studentDetailsReligion">-</span>
</div>
<div class="student-details-field">
<label>Phone</label>
<span id="studentDetailsPhone">-</span>
</div>
<div class="student-details-field">
<label>Address</label>
<span id="studentDetailsAddress">-</span>
</div>
<div class="student-details-field">
<label>Status</label>
<span id="studentDetailsStatus">-</span>
</div>
<div class="student-details-field">
<label>Enrolled Date</label>
<span id="studentDetailsEnrolledDate">-</span>
</div>
</div>
</div>
<div class="student-details-section">
<h3>Academic Information</h3>
<div class="student-details-grid">
<div class="student-details-field">
<label>Program</label>
<span id="studentDetailsProgramInfo">-</span>
</div>
<div class="student-details-field">
<label>Grade Level</label>
<span id="studentDetailsGradeLevel">-</span>
</div>
</div>
<div class="student-details-subjects">
<h4>Subjects</h4>
<ul id="studentDetailsSubjectsList">
<li>No subjects assigned</li>
</ul>
</div>
<div class="student-details-schedules">
<h4>Schedules</h4>
<ul id="studentDetailsSchedulesList">
<li>No schedules assigned</li>
</ul>
</div>
</div>
<div class="form-actions">
<button class="print-btn" onclick="adminPanel.printStudentDetails()" type="button">
<i class="fas fa-print"></i> Print
        </button>
<button class="btn-secondary" onclick="closeModal('studentDetailsModal')" type="button">Close</button>
</div>
</div>
</div>
<!-- Archive Student Modal -->
<div class="modal" id="archiveStudentModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="archiveStudentModalTitle">Add Student to Archive</h2>
<span class="close" onclick="closeModal('archiveStudentModal')">Ã—</span>
</div>
<div class="archive-form-group">
<label for="archiveFirstName">First Name:</label>
<input id="archiveFirstName" name="firstName" required="" type="text"/>
</div>
<div class="archive-form-group">
<label for="archiveLastName">Last Name:</label>
<input id="archiveLastName" name="lastName" required="" type="text"/>
</div>
<div class="archive-form-group">
<label for="archiveEmail">Email:</label>
<input id="archiveEmail" name="email" required="" type="email"/>
</div>
<div class="archive-form-group">
<label for="archiveUsername">Username:</label>
<input id="archiveUsername" name="username" required="" type="text"/>
</div>
<div class="archive-form-group">
<label for="archiveProgram">Program:</label>
<select id="archiveProgram" name="program" required="">
<option value="">Select Program</option>
<option value="Computer System Servicing NC II">Computer System Servicing NC II</option>
<option value="Electrical Installation and Maintenance NC II">Electrical Installation and Maintenance NC II</option>
<option value="Electronic Products Assembly &amp; Servicing NC II">Electronic Products Assembly &amp; Servicing NC II</option>
<option value="Computer Programming NC III">Computer Programming NC III</option>
<option value="General Academic Strand">General Academic Strand</option>
<option value="Accountancy Business Management">Accountancy Business Management</option>
</select>
</div>
<div class="archive-form-group">
<label for="archiveYear">Year:</label>
<select id="archiveYear" name="year" required="">
<option value="">Select Year</option>
<option value="1">Grade 11</option>
<option value="2">Grade 12</option>
<option value="3">Year 1</option>
<option value="4">Year 2</option>
</select>
</div>
<div class="archive-form-group">
<label for="archiveStatus">Archive Status:</label>
<select id="archiveStatus" name="status" required="">
<option value="">Select Status</option>
<option value="graduated">Graduated</option>
<option value="dropped-out">Dropped Out</option>
<option value="transferred-out">Transferred Out</option>
</select>
</div>
<div class="archive-form-group">
<label for="archiveReason">Reason:</label>
<textarea id="archiveReason" name="reason" placeholder="Provide a reason for archiving this student" required="" rows="3"></textarea>
</div>
<div class="archive-form-group">
<label for="archivePhone">Phone:</label>
<input id="archivePhone" name="phone" required="" type="tel"/>
</div>
<div class="archive-form-group">
<label for="archiveAddress">Address:</label>
<textarea id="archiveAddress" name="address" required="" rows="2"></textarea>
</div>
<div class="archive-form-error" id="archiveFormError">
          This student already exists in the archive.
        </div>
<div class="archive-form-actions">
<button class="archive-btn-secondary" onclick="closeModal('archiveStudentModal')" type="button">Cancel</button>
<button class="archive-btn-primary" type="submit">Add to Archive</button>
</div>
</form>
</div>
</div>
<!-- Subject Modal -->
<div class="modal" id="subjectModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="subjectModalTitle">Add Subject</h2>
<span class="close" onclick="closeModal('subjectModal')">Ã—</span>
</div>
<form id="subjectForm" onsubmit="handleSubjectFormSubmit(event); return false;">
<input id="subjectStudentId" name="studentId" type="hidden"/>
<div class="form-group">
<label for="subjectName">Subject Name:</label>
<input id="subjectName" name="subjectName" required="" type="text"/>
</div>
<div class="form-group">
<label for="subjectCode">Subject Code:</label>
<input id="subjectCode" name="subjectCode" required="" type="text"/>
</div>
<div class="form-group">
<label for="subjectInstructor">Instructor:</label>
<input id="subjectInstructor" name="subjectInstructor" required="" type="text"/>
</div>
<div class="form-group">
<label for="subjectCredits">Credits:</label>
<input id="subjectCredits" max="5" min="1" name="subjectCredits" required="" type="number"/>
</div>
<div class="form-actions">
<button class="btn-secondary" onclick="closeModal('subjectModal')" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Subject</button>
</div>
</form>
</div>
</div>
<!-- Schedule Modal -->
<div class="modal" id="scheduleModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="scheduleModalTitle">Add Schedule</h2>
<span class="close" onclick="closeModal('scheduleModal')">Ã—</span>
</div>
<form id="scheduleForm" onsubmit="handleScheduleFormSubmit(event); return false;">
<input id="scheduleStudentId" name="studentId" type="hidden"/>
<div class="form-group">
<label for="scheduleSubject">Subject:</label>
<select id="scheduleSubject" name="subjectId" required="">
<option value="">Select Subject</option>
</select>
</div>
<div class="form-group">
<label for="scheduleDay">Day:</label>
<select id="scheduleDay" name="day" required="">
<option value="">Select Day</option>
<option value="Monday">Monday</option>
<option value="Tuesday">Tuesday</option>
<option value="Wednesday">Wednesday</option>
<option value="Thursday">Thursday</option>
<option value="Friday">Friday</option>
</select>
</div>
<div class="form-group">
<label for="scheduleStartTime">Start Time:</label>
<input id="scheduleStartTime" name="startTime" required="" type="time"/>
</div>
<div class="form-group">
<label for="scheduleEndTime">End Time:</label>
<input id="scheduleEndTime" name="endTime" required="" type="time"/>
</div>
<div class="form-group">
<label for="scheduleRoom">Room:</label>
<input id="scheduleRoom" name="room" required="" type="text"/>
</div>
<div class="form-actions">
<button class="btn-secondary" onclick="closeModal('scheduleModal')" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Schedule</button>
</div>
</form>
</div>
</div>
<!-- Program Subject Modal -->
<div class="modal" id="programSubjectModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="programSubjectModalTitle">Add Program Subject</h2>
<span class="close" onclick="closeModal('programSubjectModal')">Ã—</span>
</div>
<form id="programSubjectForm" onsubmit="handleProgramSubjectFormSubmit(event); return false;">
<input id="programSubjectProgram" name="program" type="hidden"/>
<div class="form-group">
<label for="programSubjectName">Subject Name:</label>
<input id="programSubjectName" name="subjectName" required="" type="text"/>
</div>
<div class="form-group">
<label for="programSubjectCode">Subject Code:</label>
<input id="programSubjectCode" name="subjectCode" required="" type="text"/>
</div>
<div class="form-group">
<label for="programSubjectInstructor">Instructor:</label>
<input id="programSubjectInstructor" name="instructor" required="" type="text"/>
</div>
<div class="form-group">
<label for="programSubjectCredits">Credits:</label>
<input id="programSubjectCredits" max="5" min="1" name="credits" required="" type="number"/>
</div>
<div class="form-actions">
<button class="btn-secondary" onclick="closeModal('programSubjectModal')" type="button">Cancel</button>
<button class="btn-primary" type="submit">Save Subject</button>
</div>
</form>
</div>
</div>
<!-- Application Details Modal -->
<div class="modal application-details-modal" id="applicationDetailsModal">
<div class="modal-content">
<div class="modal-header">
<h2>Application Details</h2>
<span class="close" onclick="closeModal('applicationDetailsModal')">Ã—</span>
</div>
<div class="application-details-header">
<div class="application-details-name">
<h2 id="applicationDetailsName">Loading...</h2>
<p id="applicationDetailsProgram">Loading...</p>
</div>
<div class="application-details-status" id="applicationDetailsStatus">Pending</div>
</div>
<div class="application-details-section">
<h3>Personal Information</h3>
<div class="application-details-grid">
<div class="application-details-field">
<label>Full Name</label>
<span id="applicationDetailsFullName">-</span>
</div>
<div class="application-details-field">
<label>Email</label>
<span id="applicationDetailsEmail">-</span>
</div>
<div class="application-details-field">
<label>Phone</label>
<span id="applicationDetailsPhone">-</span>
</div>
<div class="application-details-field">
<label>Address</label>
<span id="applicationDetailsAddress">-</span>
</div>
<div class="application-details-field">
<label>Date of Birth</label>
<span id="applicationDetailsDOB">-</span>
</div>
<div class="application-details-field">
<label>Gender</label>
<span id="applicationDetailsGender">-</span>
</div>
</div>
</div>
<div class="application-details-section">
<h3>Educational Background</h3>
<div class="application-details-grid">
<div class="application-details-field">
<label>Last School Attended</label>
<span id="applicationDetailsLastSchool">-</span>
</div>
<div class="application-details-field">
<label>Year Attended</label>
<span id="applicationDetailsYearAttended">-</span>
</div>
</div>
</div>
<div class="application-details-section">
<h3>Application Information</h3>
<div class="application-details-grid">
<div class="application-details-field">
<label>Program Applied</label>
<span id="applicationDetailsProgramApplied">-</span>
</div>
<div class="application-details-field">
<label>Date Submitted</label>
<span id="applicationDetailsDateSubmitted">-</span>
</div>
<div class="application-details-field">
<label>Status</label>
<span id="applicationDetailsStatusText">-</span>
</div>
</div>
</div>
<div class="application-details-section">
<h3>Submitted Documents</h3>
<div class="application-details-documents">
<div class="application-details-documents-list" id="applicationDetailsDocumentsList">
<!-- Documents will be loaded here -->
</div>
</div>
</div>
<div class="form-actions">
<button class="btn-danger" id="deleteApplicationBtn" onclick="adminPanel.deleteApplicationFromDetails()" type="button">
<i class="fas fa-trash"></i> Delete Application
        </button>
<button class="btn-secondary" onclick="closeModal('applicationDetailsModal')" type="button">Close</button>
</div>
</div>
</div>
<script>
    let currentUser = null;
    let userRole = null;
    let currentArchiveCategory = 'graduated'; // Default archive category
    let currentProgramFilter = 'all'; // Default program filter
    let currentImageData = null; // Variable to store uploaded image data
    let currentApplicationId = null; // Variable to store the current application ID being viewed
    
    function showPage(pageId) {
      const sections = document.querySelectorAll('.hero, .section, .content-section, #pre-enrollment, #admin-dashboard, #login, #gallery');
      sections.forEach(section => {
        section.classList.remove('active');
      });
      if (pageId === 'home') {
        document.getElementById('home').classList.add('active');
      } else {
        const targetSection = document.getElementById(pageId);
        if (targetSection) {
          targetSection.classList.add('active');
          if (pageId === 'admin-dashboard') {
            setTimeout(() => {
              showAdminSection('admin-overview');
            }, 50);
          }
        }
      }
    }
    function showAdminSection(sectionId) {
    
      const adminSections = document.querySelectorAll('.admin-sub-section');
      adminSections.forEach(section => {
        section.classList.remove('active');
      });
      
      const targetSection = document.getElementById(sectionId);
      if (targetSection) {
        targetSection.classList.add('active');
      }
      
      const sidebarLinks = document.querySelectorAll('.admin-sidebar a');
      sidebarLinks.forEach(link => {
        link.classList.remove('active');
      });
      
      if (event && event.target) {
        event.target.classList.add('active');
      }
      
      setTimeout(() => {
        if (sectionId === 'admin-students') {
          adminPanel.loadStudentsTable();
        } else if (sectionId === 'admin-applications') {
          adminPanel.loadApplicationsTable();
        } else if (sectionId === 'admin-archive') {
          adminPanel.loadArchivedStudentsTable();
          showArchiveCategory(currentArchiveCategory); // Load the default category
        } else if (sectionId === 'admin-overview') {
          // Initialize charts when overview is shown
          adminPanel.initializeCharts();
        }
      }, 100);
    }
    
    function handleLogin(username, password) {
      
      if (username === 'admin@dbtc.com' && password === 'admin123') {
        currentUser = username;
        userRole = 'admin';
        
        document.querySelector('.nav-links').classList.add('hide-nav-links');
        
        document.getElementById('loginLink').style.display = 'none';
        document.getElementById('adminDashboardLink').style.display = 'block';
       
        showPage('admin-dashboard');
       
        setTimeout(() => {
          showAdminSection('admin-overview');
        }, 100);
        return true;
      }
      return false;
    }
    
    function logout() {
      currentUser = null;
      userRole = null;
      
      document.querySelector('.nav-links').classList.remove('hide-nav-links');
      
      document.getElementById('loginLink').style.display = 'block';
      document.getElementById('adminDashboardLink').style.display = 'none';
  
      document.getElementById('loginLink').style.display = 'block';
      
      showPage('home');
      alert('You have been logged out successfully.');
    }
 
    document.addEventListener('DOMContentLoaded', function() {
      
      showPage('home');
      
      document.getElementById('adminDashboardLink').style.display = 'none';
      document.getElementById('admin-dashboard').classList.remove('active');
      document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;
        const messageDiv = document.getElementById('loginMessage');
        if (handleLogin(username, password)) {
          messageDiv.innerHTML = '<p style="color: green;">Login successful! Redirecting...</p>';
          document.getElementById('loginForm').reset();
          setTimeout(() => {
            messageDiv.innerHTML = '';
          }, 2000);
        } else {
          messageDiv.innerHTML = '<p style="color: red;">Invalid username or password. Please try again.</p>';
          setTimeout(() => {
            messageDiv.innerHTML = '';
          }, 3000);
        }
      });
      document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Thank you for your message! We will get back to you soon.');
        this.reset();
      });
      
      document.getElementById('admissionForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const requiredDocumentsInput = document.getElementById('requiredDocuments');
        const uploadedFiles = [];
        for (let i = 0; i < requiredDocumentsInput.files.length; i++) {
          uploadedFiles.push(requiredDocumentsInput.files[i].name); // Store file names
        }
        const applicationData = {
          id: Date.now(),
          name: `${formData.get('firstName')} ${formData.get('lastName')}`, // Combine first and last name
          email: formData.get('email'),
          phone: formData.get('phone'),
          program: formData.get('strand'), // Use 'strand' for program
          status: 'Pending',
          submitted: new Date().toISOString().split('T')[0],
          address: `${formData.get('address')}, ${formData.get('barangay')}, ${formData.get('city')}, ${formData.get('province')}, ${formData.get('region')}`,
          dob: formData.get('birthDate'),
          gender: formData.get('gender'),
          lastSchool: formData.get('lastSchool'),
          yearAttended: formData.get('yearAttended'),
          requiredDocuments: uploadedFiles.length > 0 ? uploadedFiles : 'No documents uploaded' // Store uploaded file names
        };
        adminPanel.applications.push(applicationData);
        localStorage.setItem('applications', JSON.stringify(adminPanel.applications));
        alert('Application submitted successfully! We will contact you soon.');
        this.reset();
        adminPanel.loadApplicationsTable(); 
      });
      
      document.getElementById('preEnrollmentForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const preRequiredDocumentsInput = document.getElementById('preRequiredDocuments');
        const uploadedFiles = [];
        for (let i = 0; i < preRequiredDocumentsInput.files.length; i++) {
          uploadedFiles.push(preRequiredDocumentsInput.files[i].name); // Store file names
        }
        const applicationData = {
          id: Date.now(),
          name: `${formData.get('firstName')} ${formData.get('lastName')}`, // Combine first and last name
          email: formData.get('email'),
          phone: formData.get('phone'),
          program: formData.get('strand'), // Use 'strand' for program
          status: 'Pending',
          submitted: new Date().toISOString().split('T')[0],
          address: `${formData.get('address')}, ${formData.get('barangay')}, ${formData.get('city')}, ${formData.get('province')}, ${formData.get('region')}`,
          dob: formData.get('birthDate'),
          gender: formData.get('gender'),
          lastSchool: formData.get('lastSchool'),
          yearAttended: formData.get('yearAttended'),
          requiredDocuments: uploadedFiles.length > 0 ? uploadedFiles : 'No documents uploaded' // Store uploaded file names
        };
        adminPanel.applications.push(applicationData);
        localStorage.setItem('applications', JSON.stringify(adminPanel.applications));
        alert('Pre-enrollment submitted successfully! We will contact you soon.');
        this.reset();
        adminPanel.loadApplicationsTable(); 
      });
      
      // Handle Create Student Account form submission
      document.getElementById('createStudentForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        // Get form data
        const formData = new FormData(this);
        const studentData = {
          username: formData.get('username'),
          firstName: formData.get('firstName'),
          lastName: formData.get('lastName'),
          email: formData.get('email'),
          password: formData.get('password'),
          confirmPassword: formData.get('confirmPassword'),
          course: formData.get('course'),
          yearLevel: formData.get('GradeLevel') // Corrected to GradeLevel
        };
        
        // Validate password match
        if (studentData.password !== studentData.confirmPassword) {
          alert('Passwords do not match!');
          return;
        }
        
        // Create student account
        const newStudent = {
          id: Date.now(),
          username: studentData.username,
          firstName: studentData.firstName,
          lastName: studentData.lastName,
          email: studentData.email,
          password: studentData.password, // In a real application, this should be hashed
          program: studentData.course,
          year: studentData.yearLevel,
          status: 'active',
          enrolledDate: new Date().toISOString().split('T')[0]
        };
        
        // Add to students array using the addStudent method
        adminPanel.addStudent(newStudent);
        
        // Reset form
        this.reset();
      });
      
      // Settings form submissions
      document.getElementById('generalSettingsForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          schoolName: formData.get('schoolName'),
          schoolAddress: formData.get('schoolAddress'),
          schoolPhone: formData.get('schoolPhone'),
          schoolEmail: formData.get('schoolEmail'),
          schoolWebsite: formData.get('schoolWebsite')
        };
        localStorage.setItem('generalSettings', JSON.stringify(settings));
        adminPanel.showNotification('General settings saved successfully!', 'success');
      });
      
      document.getElementById('systemConfigForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          timezone: formData.get('timezone'),
          dateFormat: formData.get('dateFormat'),
          currency: formData.get('currency'),
          language: formData.get('language')
        };
        localStorage.setItem('systemConfig', JSON.stringify(settings));
        adminPanel.showNotification('System configuration saved successfully!', 'success');
      });
      
      document.getElementById('academicYearForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          currentAcademicYear: formData.get('currentAcademicYear'),
          currentSemester: formData.get('currentSemester'),
          semesterStartDate: formData.get('semesterStartDate'),
          semesterEndDate: formData.get('semesterEndDate')
        };
        localStorage.setItem('academicYear', JSON.stringify(settings));
        adminPanel.showNotification('Academic year settings saved successfully!', 'success');
      });
      
      document.getElementById('gradingSystemForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          gradingScale: formData.get('gradingScale'),
          passingGrade: formData.get('passingGrade'),
          classParticipation: document.getElementById('classParticipation').checked,
          quizzes: document.getElementById('quizzes').checked,
          exams: document.getElementById('exams').checked,
          projects: document.getElementById('projects').checked
        };
        localStorage.setItem('gradingSystem', JSON.stringify(settings));
        adminPanel.showNotification('Grading system settings saved successfully!', 'success');
      });
      
      document.getElementById('userManagementForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          accountApproval: document.getElementById('accountApproval').checked,
          passwordPolicy: document.getElementById('passwordPolicy').checked,
          minPasswordLength: formData.get('minPasswordLength'),
          passwordExpiry: formData.get('passwordExpiry')
        };
        localStorage.setItem('userManagement', JSON.stringify(settings));
        adminPanel.showNotification('User management settings saved successfully!', 'success');
      });
      
      document.getElementById('emailNotificationsForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          enableEmailNotifications: document.getElementById('enableEmailNotifications').checked,
          smtpServer: formData.get('smtpServer'),
          smtpPort: formData.get('smtpPort'),
          smtpUsername: formData.get('smtpUsername'),
          smtpPassword: formData.get('smtpPassword')
        };
        localStorage.setItem('emailNotifications', JSON.stringify(settings));
        adminPanel.showNotification('Email notification settings saved successfully!', 'success');
      });
      
      document.getElementById('backupConfigForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const settings = {
          enableAutoBackup: document.getElementById('enableAutoBackup').checked,
          backupFrequency: formData.get('backupFrequency'),
          backupTime: formData.get('backupTime'),
          backupRetention: formData.get('backupRetention')
        };
        localStorage.setItem('backupConfig', JSON.stringify(settings));
        adminPanel.showNotification('Backup configuration saved successfully!', 'success');
      });
      
      // Add event listener for Enter key on search input
      document.getElementById('studentSearchInput').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          adminPanel.searchStudents();
        }
      });
    });
    
    async function apiRequest(url, options = {}) {
        console.log('Simulated API Request:', url, options);
        
        await new Promise(resolve => setTimeout(500));
        if (url.startsWith('/api/students')) {
            if (options.method === 'GET') {
                return adminPanel.students;
            } else if (options.method === 'POST') {
                const newStudent = JSON.parse(options.body);
                adminPanel.addStudent(newStudent); 
                return { success: true, message: 'Student added (simulated)' };
            } else if (options.method === 'PUT') {
                const id = url.split('/').pop();
                const updatedData = JSON.parse(options.body);
                adminPanel.updateStudent(parseInt(id), updatedData); 
                return { success: true, message: 'Student updated (simulated)' };
            } else if (options.method === 'DELETE') {
                const id = url.split('/').pop();
                adminPanel.deleteStudent(parseInt(id)); 
                return { success: true, message: 'Student deleted (simulated)' };
            }
        } else if (url.startsWith('/api/courses')) {
            if (options.method === 'GET') {
                return adminPanel.courses;
            } else if (options.method === 'POST') {
                const newCourse = JSON.parse(options.body);
                adminPanel.addCourse(newCourse); 
                return { success: true, message: 'Course added (simulated)' };
            } else if (options.method === 'PUT') {
                const id = url.split('/').pop();
                const updatedData = JSON.parse(options.body);
                adminPanel.updateCourse(parseInt(id), updatedData); 
                return { success: true, message: 'Course updated (simulated)' };
            } else if (options.method === 'DELETE') {
                const id = url.split('/').pop();
                adminPanel.deleteCourse(parseInt(id)); 
                return { success: true, message: 'Course deleted (simulated)' };
            }
        } else if (url.startsWith('/api/applications')) {
            if (options.method === 'GET') {
                return adminPanel.applications;
            } else if (options.method === 'PUT') {
                const id = url.split('/').pop();
                const updatedData = JSON.parse(options.body);
                adminPanel.updateApplicationStatus(parseInt(id), updatedData.status); 
                return { success: true, message: 'Application updated (simulated)' };
            } else if (options.method === 'DELETE') {
                const id = url.split('/').pop();
                adminPanel.deleteApplication(parseInt(id)); 
                return { success: true, message: 'Application deleted (simulated)' };
            }
        } else if (url.includes('/schedules')) {
            
            return [
                { course: { courseCode: 'CS101', courseName: 'Intro to Programming' }, room: 'Room 201', startTime: '08:00 AM', endTime: '09:00 AM', dayOfWeek: 'Monday' },
                { course: { courseCode: 'MATH201', courseName: 'Discrete Math' }, room: 'FF 10', startTime: '10:30 AM', endTime: '11:30 AM', dayOfWeek: 'Monday' },
                { course: { courseCode: 'CS201', courseName: 'Data Structures' }, room: 'Lab 301', startTime: '01:00 PM', endTime: '02:00 PM', dayOfWeek: 'Tuesday' },
                { course: { courseCode: 'ENG101', courseName: 'Technical Writing', status: 'postponed' }, room: 'Room 205', startTime: '03:00 PM', endTime: '04:00 PM', dayOfWeek: 'Wednesday' }
            ];
        } else if (url.includes('/enrollments')) {
        
            return [
                { course: { courseCode: 'CS101', courseName: 'Intro to Programming', credits: 3, instructor: 'Prof. Smith' }, status: 'Enrolled', grade: 'A' },
                { course: { courseCode: 'MATH201', courseName: 'Discrete Math', credits: 3, instructor: 'Dr. Jones' }, status: 'Enrolled', grade: 'B+' }
            ];
        }
        throw new Error('Simulated API: Endpoint not found or method not supported.');
    }
    function showModal(modalId) {
      document.getElementById(modalId).style.display = 'block';
    }
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
   
    }
    
    // Function to preview uploaded image
    function previewImage(event) {
      const file = event.target.files[0];
      const preview = document.getElementById('imagePreview');
      
      if (file) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
          currentImageData = e.target.result;
          preview.innerHTML = `<img src="${currentImageData}" alt="Student Picture">`;
        }
        
        reader.readAsDataURL(file);
      } else {
        currentImageData = null;
        preview.innerHTML = '<div class="image-placeholder">No image selected</div>';
      }
    }
    
    function handleStudentFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const mode = form.dataset.mode;
      const id = form.dataset.id;
      const formData = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        religion: document.getElementById('religion').value,
        program: document.getElementById('program').value,
        year: document.getElementById('GradeLevel').value,
        status: document.getElementById('status').value,
        image: currentImageData // Include the image data
      };
      
      if (mode === 'add') {
        adminPanel.addStudent(formData);
      } else if (mode === 'edit') {
        adminPanel.updateStudent(parseInt(id), formData);
      }
      closeModal('studentModal');
    }
 
    function handleArchiveStudentFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const formData = {
        firstName: document.getElementById('archiveFirstName').value,
        lastName: document.getElementById('archiveLastName').value,
        email: document.getElementById('archiveEmail').value,
        username: document.getElementById('archiveUsername').value,
        program: document.getElementById('archiveProgram').value,
        year: document.getElementById('archiveYear').value,
        status: document.getElementById('archiveStatus').value,
        reason: document.getElementById('archiveReason').value,
        phone: document.getElementById('archivePhone').value,
        address: document.getElementById('archiveAddress').value
      };
      
      // Check if student already exists in archive
      const existingStudent = adminPanel.checkArchivedStudentExists(formData.username, formData.email);
      
      if (existingStudent) {
        // Show error message
        document.getElementById('archiveFormError').style.display = 'block';
        return;
      }
      
      // Hide error message if it was previously shown
      document.getElementById('archiveFormError').style.display = 'none';
      
      // Add student to archive
      adminPanel.addArchivedStudent(formData);
      closeModal('archiveStudentModal');
    }
   
    function handleSubjectFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const studentId = document.getElementById('subjectStudentId').value;
      const formData = {
        subjectName: document.getElementById('subjectName').value,
        subjectCode: document.getElementById('subjectCode').value,
        instructor: document.getElementById('subjectInstructor').value,
        credits: parseInt(document.getElementById('subjectCredits').value)
      };
      
      // Add subject to student
      adminPanel.addSubjectToStudent(parseInt(studentId), formData);
      closeModal('subjectModal');
    }
    
    function handleScheduleFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const studentId = document.getElementById('scheduleStudentId').value;
      const formData = {
        subjectId: parseInt(document.getElementById('scheduleSubject').value),
        day: document.getElementById('scheduleDay').value,
        startTime: document.getElementById('scheduleStartTime').value,
        endTime: document.getElementById('scheduleEndTime').value,
        room: document.getElementById('scheduleRoom').value
      };
      
      // Add schedule to student
      adminPanel.addScheduleToStudent(parseInt(studentId), formData);
      closeModal('scheduleModal');
    }
    
    function handleProgramSubjectFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const program = document.getElementById('programSubjectProgram').value;
      const formData = {
        subjectName: document.getElementById('programSubjectName').value,
        subjectCode: document.getElementById('programSubjectCode').value,
        instructor: document.getElementById('programSubjectInstructor').value,
        credits: parseInt(document.getElementById('programSubjectCredits').value)
      };
      
      // Add subject to program
      adminPanel.addSubjectToProgram(program, formData);
      closeModal('programSubjectModal');
    }
   
    document.addEventListener('DOMContentLoaded', function() {
      const studentForm = document.getElementById('studentForm');
      if (studentForm) {
        studentForm.addEventListener('submit', handleStudentFormSubmit);
      }
      const archiveStudentForm = document.getElementById('archiveStudentForm');
      if (archiveStudentForm) {
        archiveStudentForm.addEventListener('submit', handleArchiveStudentFormSubmit);
      }
      const subjectForm = document.getElementById('subjectForm');
      if (subjectForm) {
        subjectForm.addEventListener('submit', handleSubjectFormSubmit);
      }
      const scheduleForm = document.getElementById('scheduleForm');
      if (scheduleForm) {
        scheduleForm.addEventListener('submit', handleScheduleFormSubmit);
      }
      const programSubjectForm = document.getElementById('programSubjectForm');
      if (programSubjectForm) {
        programSubjectForm.addEventListener('submit', handleProgramSubjectFormSubmit);
      }
    });
   
    let currentWeek = new Date();
    let currentCalendarMonth = new Date();
    
    function resetForm(formId) {
      const form = document.getElementById(formId);
      if (form) {
        form.reset();
      }
    }
    
    // Function to handle archive category navigation
    function showArchiveCategory(category) {
      // Update current category
      currentArchiveCategory = category;
      
      // Load the appropriate archive data
      adminPanel.loadArchivedStudentsTable(category);
    }
    
    // Function to handle program navigation in student management
    function showProgramStudents(program) {
      // Update active state in sidebar
      const programNavLinks = document.querySelectorAll('.program-nav a');
      programNavLinks.forEach(link => {
        link.classList.remove('active');
      });
      
      const activeLink = Array.from(programNavLinks).find(link => 
        link.getAttribute('onclick').includes(program)
      );
      if (activeLink) {
        activeLink.classList.add('active');
      }
      
      // Update current program filter
      currentProgramFilter = program;
      
      // Load the filtered students
      adminPanel.loadStudentsTable(program);
      
      // Show program subjects if not "all"
      if (program !== 'all') {
        adminPanel.showProgramSubjects(program);
      } else {
        // Hide program subjects and show students table
        document.getElementById('students-table-container').style.display = 'block';
        document.getElementById('program-subjects-container').style.display = 'none';
      }
    }
    
    // Function to show subject and schedule management for a student
    function showStudentSubjectSchedule(studentId) {
      // Hide the main table and program subjects
      document.getElementById('students-table-container').style.display = 'none';
      document.getElementById('program-subjects-container').style.display = 'none';
      
      // Show the subject/schedule container
      document.getElementById('student-subject-schedule').style.display = 'flex';
      
      // Set the student ID for the subject and schedule forms
      document.getElementById('subjectStudentId').value = studentId;
      document.getElementById('scheduleStudentId').value = studentId;
      
      // Load student's subjects and schedules
      adminPanel.loadStudentSubjects(studentId);
      adminPanel.loadStudentSchedules(studentId);
      
      // Populate the subject dropdown in the schedule form
      const scheduleSubjectSelect = document.getElementById('scheduleSubject');
      scheduleSubjectSelect.innerHTML = '<option value="">Select Subject</option>';
      
      // Get student's subjects
      const student = adminPanel.students.find(s => s.id === parseInt(studentId));
      if (student && student.subjects) {
        student.subjects.forEach(subject => {
          const option = document.createElement('option');
          option.value = subject.id;
          option.textContent = `${subject.subjectCode} - ${subject.subjectName}`;
          scheduleSubjectSelect.appendChild(option);
        });
      }
    }
    
    // Function to go back to the student list
    function backToStudentList() {
      // Show the main table and hide the subject/schedule container
      document.getElementById('students-table-container').style.display = 'block';
      document.getElementById('student-subject-schedule').style.display = 'block';
    }
    
    // Function to handle settings section navigation
    function showSettingsSection(sectionId) {
      // Update active state in tabs
      const settingsTabs = document.querySelectorAll('.settings-tab');
      settingsTabs.forEach(tab => {
        tab.classList.remove('active');
      });
      
      const activeTab = Array.from(settingsTabs).find(tab => 
        tab.getAttribute('onclick').includes(sectionId)
      );
      if (activeTab) {
        activeTab.classList.add('active');
      }
      
      // Show the selected section
      const settingsSections = document.querySelectorAll('.settings-section');
      settingsSections.forEach(section => {
        section.classList.remove('active');
      });
      
      const targetSection = document.getElementById(`settings-${sectionId}`);
      if (targetSection) {
        targetSection.classList.add('active');
      }
      
      // Load settings for the selected section
      adminPanel.loadSettings(sectionId);
    }
    
    window.onclick = function(event) {
      const modals = document.querySelectorAll('.modal');
      modals.forEach(modal => {
        if (event.target === modal) {
          closeModal(modal.id);
        }
      });
    };
   
    class AdminPanel {
      constructor() {
        this.students = JSON.parse(localStorage.getItem('students') || '[]');
        this.courses = JSON.parse(localStorage.getItem('courses') || '[]');
        this.applications = JSON.parse(localStorage.getItem('applications') || '[]');
        this.archivedStudents = JSON.parse(localStorage.getItem('archivedStudents') || '[]'); // Initialize archived students
        this.subjects = JSON.parse(localStorage.getItem('subjects') || '[]');
        this.schedules = JSON.parse(localStorage.getItem('schedules') || '[]');
        this.programSubjects = JSON.parse(localStorage.getItem('programSubjects') || '{}'); // Initialize program subjects
        this.currentUser = null;
        this.adminCredentials = { username: 'admin', password: 'admin123' };
        this.settings = {
          general: JSON.parse(localStorage.getItem('generalSettings') || '{}'),
          system: JSON.parse(localStorage.getItem('systemConfig') || '{}'),
          academic: JSON.parse(localStorage.getItem('academicYear') || '{}'),
          grading: JSON.parse(localStorage.getItem('gradingSystem') || '{}'),
          users: JSON.parse(localStorage.getItem('userManagement') || '{}'),
          notifications: JSON.parse(localStorage.getItem('emailNotifications') || '{}'),
          backup: JSON.parse(localStorage.getItem('backupConfig') || '{}')
        };
        this.charts = {
          strand: null,
          gender: null,
          location: null,
          grade: null
        };
        this.initializeSampleData();
        
      }
      initializeSampleData() {
        if (this.students.length === 0) {
          this.students = [
            {
              id: 1, firstName: 'Juan', lastName: 'dela Cruz', email: 'juan.delacruz@email.com',
              religion: 'Roman Catholic',
              program: 'CSS NC II', year: '1', status: 'active', enrolledDate: '2024-01-15',
              phone: '+63 912 345 6789', address: '123 Rizal Street, Manila, Philippines',
              subjects: [
                { id: 1, subjectName: 'Computer Fundamentals', subjectCode: 'CS101', instructor: 'Prof. Tech', credits: 3 }
              ],
              schedules: [
                { id: 1, subjectId: 1, day: 'Monday', startTime: '08:00', endTime: '09:00', room: 'Room 101' }
              ]
            },
            {
              id: 2, firstName: 'Maria', lastName: 'Santos', email: 'maria.santos@email.com',
              religion: 'Christian',
              program: 'EIM NC II', year: '2', status: 'active', enrolledDate: '2023-08-20',
              phone: '+63 923 456 7890', address: '456 Bonifacio Avenue, Quezon City, Philippines',
              subjects: [
                { id: 2, subjectName: 'Electrical Circuits', subjectCode: 'EIM101', instructor: 'Engr. Power', credits: 4 }
              ],
              schedules: [
                { id: 2, subjectId: 2, day: 'Tuesday', startTime: '10:00', endTime: '12:00', room: 'Workshop A' }
              ]
            },
            {
              id: 3, firstName: 'Jose', lastName: 'Rizal', email: 'jose.rizal@email.com',
              religion: 'Muslim',
              program: 'EPAS NC II', year: '3', status: 'inactive', enrolledDate: '2022-06-10',
              phone: '+63 934 567 8901', address: '789 Mabini Street, Cebu City, Philippines',
              subjects: [
                { id: 3, subjectName: 'Electronics Assembly', subjectCode: 'EPAS101', instructor: 'Tech Expert', credits: 3 }
              ],
              schedules: [
                { id: 3, subjectId: 3, day: 'Wednesday', startTime: '13:00', endTime: '15:00', room: 'Lab B' }
              ]
            },
            {
              id: 4, firstName: 'Anna', lastName: 'Garcia', email: 'anna.garcia@email.com',
              religion: 'Iglesia Ni Cristo',
              program: 'ABM', year: '1', status: 'active', enrolledDate: '2024-01-15',
              phone: '+63 945 678 9012', address: '321 Luna Street, Davao City, Philippines',
              subjects: [
                { id: 4, subjectName: 'Business Management', subjectCode: 'ABM101', instructor: 'Prof. Manager', credits: 3 }
              ],
              schedules: [
                { id: 4, subjectId: 4, day: 'Thursday', startTime: '09:00', endTime: '10:00', room: 'Room 201' }
              ]
            },
            {
              id: 5, firstName: 'Carlos', lastName: 'Reyes', email: 'carlos.reyes@email.com',
              religion: 'Roman Catholic',
              program: 'HUMSS', year: '2', status: 'active', enrolledDate: '2023-08-20',
              phone: '+63 956 789 0123', address: '654 Aurora Boulevard, Manila, Philippines',
              subjects: [
                { id: 5, subjectName: 'Philippine Literature', subjectCode: 'HUM101', instructor: 'Prof. Lit', credits: 3 }
              ],
              schedules: [
                { id: 5, subjectId: 5, day: 'Friday', startTime: '11:00', endTime: '12:00', room: 'Room 301' }
              ]
            },
            {
              id: 6, firstName: 'Rosa', lastName: 'Mendoza', email: 'rosa.mendoza@email.com',
              religion: 'Christian',
              program: 'GAS', year: '1', status: 'active', enrolledDate: '2024-01-15',
              phone: '+63 967 890 1234', address: '987 Tandang Sora, Quezon City, Philippines',
              subjects: [
                { id: 6, subjectName: 'Earth Science', subjectCode: 'GAS101', instructor: 'Prof. Science', credits: 3 }
              ],
              schedules: [
                { id: 6, subjectId: 6, day: 'Monday', startTime: '13:00', endTime: '14:00', room: 'Room 401' }
              ]
            },
            {
              id: 7, firstName: 'Miguel', lastName: 'Santos', email: 'miguel.santos@email.com',
              religion: 'Muslim',
              program: 'PROGRAMMING', year: '2', status: 'active', enrolledDate: '2023-08-20',
              phone: '+63 978 901 2345', address: '147 EspaÃ±a Boulevard, Manila, Philippines',
              subjects: [
                { id: 7, subjectName: 'Web Development', subjectCode: 'PROG101', instructor: 'Prof. Web', credits: 3 }
              ],
              schedules: [
                { id: 7, subjectId: 7, day: 'Tuesday', startTime: '14:00', endTime: '15:00', room: 'Lab 201' }
              ]
            },
            {
              id: 8, firstName: 'Liza', lastName: 'Cruz', email: 'liza.cruz@email.com',
              religion: 'Iglesia Ni Cristo',
              program: 'TVL', year: '1', status: 'active', enrolledDate: '2024-01-15',
              phone: '+63 989 012 3456', address: '258 Taft Avenue, Manila, Philippines',
              subjects: [
                { id: 8, subjectName: 'Technical Drawing', subjectCode: 'TVL101', instructor: 'Prof. Draft', credits: 3 }
              ],
              schedules: [
                { id: 8, subjectId: 8, day: 'Wednesday', startTime: '10:00', endTime: '11:00', room: 'Room 501' }
              ]
            }
          ];
          localStorage.setItem('students', JSON.stringify(this.students));
        }
        if (this.courses.length === 0) {
          this.courses = [
            {
              id: 1, courseCode: 'CSS101', courseName: 'Computer System Servicing Fundamentals',
              credits: 3, instructor: 'Prof. Tech Master', schedule: 'MWF 8:00-9:00 AM',
              room: 'Lab 1', capacity: 30, enrolled: 25
            },
            {
              id: 2, courseCode: 'EIM101', courseName: 'Electrical Installation Basics',
              credits: 4, instructor: 'Engr. Power Expert', schedule: 'TTh 10:00-12:00 PM',
              room: 'Workshop A', capacity: 20, enrolled: 18
            }
          ];
          localStorage.setItem('courses', JSON.stringify(this.courses));
        }
        if (this.applications.length === 0) {
          this.applications = [
            {
              id: 1, name: 'John Doe', email: 'john.doe@email.com',
              phone: '+63 912 345 6789', program: 'BS Computer Science', status: 'Approved',
              submitted: '2025-10-10', address: '123 University Ave, Manila, Philippines',
              requiredDocuments: ['Transcript', 'ID']
            },
            {
              id: 2, name: 'Mary Jane', email: 'mary.jane@email.com',
              phone: '+63 923 456 7890', program: 'BS Information Tech', status: 'Pending',
              submitted: '2025-10-09', address: '456 College St., Quezon City, Philippines',
              requiredDocuments: ['Form 137', 'ID']
            }
          ];
          localStorage.setItem('applications', JSON.stringify(this.applications));
        }
        // Initialize archivedStudents if empty
        if (this.archivedStudents.length === 0) {
            this.archivedStudents = [
              {
                id: 101, username: 'anna.garcia', firstName: 'Anna', lastName: 'Garcia', email: 'anna.garcia@email.com',
                program: 'CSS NC II', year: '2', status: 'graduated', enrolledDate: '2022-06-10',
                phone: '+63 911 223 3445', address: '123 University Ave, Manila, Philippines',
                archiveDate: '2024-01-15', archiveReason: 'Graduated'
              },
              {
                id: 102, username: 'carlos.reyes', firstName: 'Carlos', lastName: 'Reyes', email: 'carlos.reyes@email.com',
                program: 'EIM NC II', year: '1', status: 'dropped-out', enrolledDate: '2023-08-20',
                phone: '+63 922 334 4556', address: '456 College St., Quezon City, Philippines',
                archiveDate: '2023-10-15', archiveReason: 'Dropped out due to personal reasons'
              },
              {
                id: 103, username: 'santos.maria', firstName: 'Maria', lastName: 'Santos', email: 'maria.santos@email.com',
                program: 'EPAS NC II', year: '2', status: 'transferred-out', enrolledDate: '2022-06-10',
                phone: '+63 933 445 5667', address: '789 Academic Rd., Cebu City, Philippines',
                archiveDate: '2023-09-20', archiveReason: 'Transferred to another institution'
              }
            ]; 
            localStorage.setItem('archivedStudents', JSON.stringify(this.archivedStudents));
        }
        
        // Initialize programSubjects if empty
        if (Object.keys(this.programSubjects).length === 0) {
          this.programSubjects = {
            'ABM': [
              { id: 101, subjectName: 'Accounting Principles', subjectCode: 'ABM101', instructor: 'Prof. Account', credits: 3 },
              { id: 102, subjectName: 'Business Mathematics', subjectCode: 'ABM102', instructor: 'Prof. Math', credits: 3 },
              { id: 103, subjectName: 'Business Management', subjectCode: 'ABM103', instructor: 'Prof. Manager', credits: 3 }
            ],
            'HUMSS': [
              { id: 201, subjectName: 'Introduction to Philosophy', subjectCode: 'HUM101', instructor: 'Prof. Philosopher', credits: 3 },
              { id: 202, subjectName: 'Creative Writing', subjectCode: 'HUM102', instructor: 'Prof. Writer', credits: 3 },
              { id: 203, subjectName: 'Understanding Culture, Society and Politics', subjectCode: 'HUM103', instructor: 'Prof. Sociologist', credits: 3 }
            ],
            'GAS': [
              { id: 301, subjectName: 'Earth Science', subjectCode: 'GAS101', instructor: 'Prof. Scientist', credits: 3 },
              { id: 302, subjectName: 'Dissemination and Application', subjectCode: 'GAS102', instructor: 'Prof. Researcher', credits: 3 },
              { id: 303, subjectName: 'Community Engagement', subjectCode: 'GAS103', instructor: 'Prof. Community', credits: 3 }
            ],
            'CSS': [
              { id: 401, subjectName: 'Computer Hardware Servicing', subjectCode: 'CSS101', instructor: 'Prof. Tech', credits: 3 },
              { id: 402, subjectName: 'Operating System', subjectCode: 'CSS102', instructor: 'Prof. OS', credits: 3 },
              { id: 403, subjectName: 'Networking', subjectCode: 'CSS103', instructor: 'Prof. Network', credits: 3 }
            ],
            'EIM': [
              { id: 501, subjectName: 'Electrical Installation', subjectCode: 'EIM101', instructor: 'Engr. Power', credits: 4 },
              { id: 502, subjectName: 'Motor Control', subjectCode: 'EIM102', instructor: 'Engr. Motor', credits: 3 },
              { id: 503, subjectName: 'Building Wiring', subjectCode: 'EIM103', instructor: 'Engr. Builder', credits: 3 }
            ],
            'EPAS': [
              { id: 601, subjectName: 'Electronics Components', subjectCode: 'EPAS101', instructor: 'Prof. Electronics', credits: 3 },
              { id: 602, subjectName: 'Circuit Design', subjectCode: 'EPAS102', instructor: 'Prof. Designer', credits: 3 },
              { id: 603, subjectName: 'Product Assembly', subjectCode: 'EPAS103', instructor: 'Prof. Assembler', credits: 3 }
            ],
            'PROGRAMMING': [
              { id: 701, subjectName: 'Introduction to Programming', subjectCode: 'PROG101', instructor: 'Prof. Coder', credits: 3 },
              { id: 702, subjectName: 'Data Structures', subjectCode: 'PROG102', instructor: 'Prof. Data', credits: 3 },
              { id: 703, subjectName: 'Web Development', subjectCode: 'PROG103', instructor: 'Prof. Web', credits: 3 }
            ],
            'TVL': [
              { id: 801, subjectName: 'Technical Drawing', subjectCode: 'TVL101', instructor: 'Prof. Draft', credits: 3 },
              { id: 802, subjectName: 'Work Immersion', subjectCode: 'TVL102', instructor: 'Prof. Work', credits: 3 },
              { id: 803, subjectName: 'Entrepreneurship', subjectCode: 'TVL103', instructor: 'Prof. Entrepreneur', credits: 3 }
            ]
          };
          localStorage.setItem('programSubjects', JSON.stringify(this.programSubjects));
        }
        
        // Initialize default settings if empty
        if (Object.keys(this.settings.general).length === 0) {
          this.settings.general = {
            schoolName: 'Database Technology College, Inc.',
            schoolAddress: 'Roxas Street, Gubat, Sorsogon 4710, Philippines',
            schoolPhone: '(056) 211-02-52',
            schoolEmail: 'databasetechnologycollegeinc@gmail.com',
            schoolWebsite: 'https://dbtc.edu.ph'
          };
          localStorage.setItem('generalSettings', JSON.stringify(this.settings.general));
        }
      }
      handleLogin(username, password) {
        if (username === this.adminCredentials.username && password === this.adminCredentials.password) {
          this.currentUser = { type: 'admin', username: 'Administrator' };
          sessionStorage.setItem('currentUser', JSON.stringify(this.currentUser));
          this.showAdminDashboard();
          return true;
        }
        return false;
      }
      
      showAdminDashboard() {
        document.getElementById('loginLink').style.display = 'none';
        document.getElementById('adminDashboardLink').style.display = 'block';
        document.querySelector('.navbar').style.display = 'none';
        showPage('admin-dashboard');
        this.loadStudentsTable();
        this.loadCoursesTable();
        this.loadApplicationsTable();
        this.loadArchivedStudentsTable();
      }
      logout() {
        this.currentUser = null;
        sessionStorage.removeItem('currentUser');
        document.getElementById('loginLink').style.display = 'block';
        document.getElementById('adminDashboardLink').style.display = 'none';
        document.querySelector('.navbar').style.display = 'block';
        showPage('home');
      }
      loadStudentsTable(programFilter = 'all', searchTerm = '') {
        const tbody = document.getElementById('students-tbody');
        if (!tbody) return;
        
        // Filter students by program if specified
        let filteredStudents = programFilter === 'all' 
          ? this.students 
          : this.students.filter(student => student.program.toUpperCase().includes(programFilter.toUpperCase()));
        
        // Filter students by search term if specified
        if (searchTerm) {
          const lowerSearchTerm = searchTerm.toLowerCase();
          filteredStudents = filteredStudents.filter(student => 
            student.firstName.toLowerCase().includes(lowerSearchTerm) ||
            student.lastName.toLowerCase().includes(lowerSearchTerm) ||
            student.email.toLowerCase().includes(lowerSearchTerm)
          );
        }
        
        if (filteredStudents.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6" class="no-results">No students found matching your search criteria.</td></tr>';
          return;
        }
        
        tbody.innerHTML = filteredStudents.map((student, index) => `
          <tr>
            <td>${index + 1}</td>
            <td>${student.firstName} ${student.lastName}</td>
            <td>${student.program}</td>
            <td>Grade ${student.year}</td>
            <td><span class="status-badge status-${student.status.toLowerCase()}">${student.status}</span></td>
            <td>
              <button class="action-btn edit-btn" onclick="adminPanel.showEditStudentModal(${student.id})">Edit</button>
              <button class="action-btn view-btn" onclick="adminPanel.viewStudent(${student.id})">
                <i class="fas fa-eye"></i>
              </button>
            </td>
          </tr>
        `).join('');
      }
      loadArchivedStudentsTable(category = 'graduated') {
        const tbody = document.getElementById('archive-students-tbody');
        if (!tbody) return;
        
        // Filter archived students by category
        const filteredStudents = this.archivedStudents.filter(student => student.status === category);
        
        if (filteredStudents.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="6" class="archive-empty">
                No ${category.replace('-', ' ')} students found.
              </td>
            </tr>
          `;
          return;
        }
        
       tbody.innerHTML = filteredStudents.map((student, index) => `
  <tr>
    <td>${index + 1}</td>
    <td>${student.firstName} ${student.lastName}</td>
    <td>${student.program}</td>
    <td>Grade ${student.year}</td>
    <td><span class="status-badge status-${student.status.toLowerCase()}">${student.status}</span></td>
    <td>
      <button class="action-btn edit-btn" onclick="adminPanel.showEditStudentModal(${student.id})">Edit</button>
      <button class="action-btn view-btn" onclick="adminPanel.viewStudent(${student.id})">
        <i class="fas fa-eye"></i>
      </button>
    </td>
  </tr>
`).join('');

      }
      loadCoursesTable() {
        const tbody = document.getElementById('courses-tbody');
        if (!tbody) return;
        tbody.innerHTML = this.courses.map(course => `
          <tr>
            <td>${course.courseCode}</td>
            <td>${course.courseName}</td>
            <td>${course.credits}</td>
            <td>${course.instructor}</td>
            <td>${course.schedule}</td>
            <td>${course.room}</td>
            <td>${course.capacity}</td>
            <td>${course.enrolled}</td>
            <td>
              <button class="action-btn edit-btn" onclick="adminPanel.showEditCourseModal(${course.id})">Edit</button>
              <button class="action-btn delete-btn" onclick="adminPanel.deleteCourse(${course.id})">Delete</button>
            </td>
          </tr>
        `).join('');
      }
      loadApplicationsTable() {
        const tbody = document.getElementById('applications-tbody');
        if (!tbody) return;
        tbody.innerHTML = this.applications.map(app => `
          <tr>
            <td>${app.name}</td>
            <td>${app.phone}</td>
            <td>${app.program}</td>
            <td>${app.submitted}</td>
            <td>
              <div class="application-documents">
                ${app.requiredDocuments && app.requiredDocuments.length > 0 ?
                  app.requiredDocuments.map(doc => `<span class="document-badge">${doc}</span>`).join('') :
                  '<span class="document-badge">No documents</span>'
                }
              </div>
            </td>
            <td>
              <div class="application-actions">
                ${app.status === 'Pending' ? `
                  <button class="action-btn approve-btn" onclick="adminPanel.approveApplication(${app.id})" title="Approve">
                    <i class="fas fa-check"></i>
                  </button>
                  <button class="action-btn reject-btn" onclick="adminPanel.rejectApplication(${app.id})" title="Reject">
                    <i class="fas fa-times"></i>
                  </button>
                ` : ''}
                <button class="action-btn view-btn" onclick="adminPanel.viewApplication(${app.id})" title="View Application">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </td>
            <td><span class="application-status ${app.status.toLowerCase()}">${app.status}</span></td>
          </tr>
        `).join('');
      }
      addStudent(studentData) {
        const newStudent = {
          id: Date.now(),
          ...studentData,
          enrolledDate: new Date().toISOString().split('T')[0],
          subjects: [],
          schedules: []
        };
        this.students.push(newStudent);
        localStorage.setItem('students', JSON.stringify(this.students));
        this.loadStudentsTable();
        this.showNotification('Student added successfully!', 'success');
      }
      updateStudent(id, updatedData) {
        const index = this.students.findIndex(s => s.id == id);
        if (index !== -1) {
          // Keep the existing image if no new image is provided
          if (!updatedData.image && this.students[index].image) {
            updatedData.image = this.students[index].image;
          }
          
          this.students[index] = { ...this.students[index], ...updatedData };
          localStorage.setItem('students', JSON.stringify(this.students));
          this.loadStudentsTable();
          this.showNotification('Student updated successfully!', 'success');
        }
      }
      archiveStudent(id) { // New archive method
          if (confirm('Are you sure you want to archive this student?')) {
              const studentIndex = this.students.findIndex(s => s.id == id);
              if (studentIndex !== -1) {
                  const [archivedStudent] = this.students.splice(studentIndex, 1);
                  archivedStudent.status = 'graduated'; // Default to graduated
                  archivedStudent.archiveDate = new Date().toISOString().split('T')[0];
                  archivedStudent.archiveReason = 'Archived by admin';
                  this.archivedStudents.push(archivedStudent);
                  localStorage.setItem('students', JSON.stringify(this.students));
                  localStorage.setItem('archivedStudents', JSON.stringify(this.archivedStudents));
                  this.loadStudentsTable();
                  this.loadArchivedStudentsTable();
                  this.showNotification('Student archived successfully!', 'success');
              }
          }
      }
      restoreStudent(id) { // New restore method
          if (confirm('Are you sure you want to restore this student?')) {
              const archivedStudentIndex = this.archivedStudents.findIndex(s => s.id == id);
              if (archivedStudentIndex !== -1) {
                  const [restoredStudent] = this.archivedStudents.splice(archivedStudentIndex, 1);
                  restoredStudent.status = 'active'; // Restore status to active
                  delete restoredStudent.archiveDate;
                  delete restoredStudent.archiveReason;
                  this.students.push(restoredStudent);
                  localStorage.setItem('students', JSON.stringify(this.students));
                  localStorage.setItem('archivedStudents', JSON.stringify(this.archivedStudents));
                  this.loadStudentsTable();
                  this.loadArchivedStudentsTable();
                  this.showNotification('Student restored successfully!', 'success');
              }
          }
      }
      deleteStudent(id) { // Modified delete method for permanent deletion from active list
        if (confirm('Are you sure you want to permanently delete this student? This action cannot be undone.')) {
          this.students = this.students.filter(s => s.id != id);
          localStorage.setItem('students', JSON.stringify(this.students));
          this.loadStudentsTable();
          this.showNotification('Student permanently deleted successfully!', 'success');
        }
      }
      addCourse(courseData) {
        const newCourse = { id: Date.now(), ...courseData, enrolled: 0 };
        this.courses.push(newCourse);
        localStorage.setItem('courses', JSON.stringify(this.courses));
        this.loadCoursesTable();
        this.showNotification('Course added successfully!', 'success');
      }
      editCourse(id) {
        const course = this.courses.find(c => c.id === id);
        if (course) {
          const courseCode = prompt('Course Code:', course.courseCode);
          const courseName = prompt('Course Name:', course.courseName);
          const credits = prompt('Credits:', course.credits);
          const instructor = prompt('Instructor:', course.instructor);
          const schedule = prompt('Schedule:', course.schedule);
          const room = prompt('Room:', course.room);
          const capacity = prompt('Capacity:', course.capacity);
          if (courseCode && courseName && credits && instructor && schedule && room && capacity) {
            course.courseCode = courseCode; course.courseName = courseName;
            course.credits = parseInt(credits); course.instructor = instructor;
            course.schedule = schedule; course.room = room; course.capacity = parseInt(capacity);
            localStorage.setItem('courses', JSON.stringify(this.courses));
            this.loadCoursesTable();
            this.showNotification('Course updated successfully!', 'success');
          }
        }
      }
      updateCourse(id, updatedData) {
        const index = this.courses.findIndex(c => c.id == id);
        if (index !== -1) {
          this.courses[index] = { ...this.courses[index], ...updatedData };
          localStorage.setItem('courses', JSON.stringify(this.courses));
          this.loadCoursesTable();
          this.showNotification('Course updated successfully!', 'success');
        }
      }
      deleteCourse(id) {
        if (confirm('Are you sure you want to delete this course?')) {
          this.courses = this.courses.filter(c => c.id !== id);
          localStorage.setItem('courses', JSON.stringify(this.courses));
          this.loadCoursesTable();
          this.showNotification('Course deleted successfully!', 'success');
        }
      }
      approveApplication(id) {
        const application = this.applications.find(a => a.id === id);
        if (application) {
          application.status = 'Approved';
          const names = application.name.split(' ');
          const newStudent = {
            id: Date.now(),
            username: names[0].toLowerCase() + '.' + names.slice(1).join('').toLowerCase(),
            firstName: names[0],
            lastName: names.slice(1).join(' '),
            email: application.email,
            program: application.program,
            year: '1', // Default to Year 1 upon approval
            status: 'active',
            phone: application.phone,
            address: application.address,
            dob: application.dob,
            gender: application.gender,
            lastSchool: application.lastSchool,
            enrolledDate: new Date().toLocaleDateString(),
            subjects: [],
            schedules: []
          };
          this.addStudent(newStudent);
          localStorage.setItem('applications', JSON.stringify(this.applications));
          this.loadApplicationsTable();
          this.showNotification('Application approved and student added!', 'success');
        }
      }
      rejectApplication(id) {
        if (confirm('Are you sure you want to reject this application?')) {
          const application = this.applications.find(a => a.id === id);
          if (application) {
            application.status = 'Rejected';
            localStorage.setItem('applications', JSON.stringify(this.applications));
            this.loadApplicationsTable();
            this.showNotification('Application rejected!', 'warning');
          }
        }
      }
      deleteApplication(id) {
        if (confirm('Are you sure you want to delete this application?')) {
          this.applications = this.applications.filter(a => a.id != id);
          localStorage.setItem('applications', JSON.stringify(this.applications));
          this.loadApplicationsTable();
          this.showNotification('Application deleted successfully!', 'success');
        }
      }
      showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed; top: 20px; right: 20px; z-index: 10000;
          background: ${type === 'success' ? '#4CAF50' : type === 'warning' ? '#ff9800' : '#f44336'};
          color: white; padding: 15px 20px; border-radius: 5px;
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => { document.body.removeChild(notification); }, 3000);
      }
      checkExistingSession() {
        const savedUser = sessionStorage.getItem('currentUser');
        if (savedUser) {
          this.currentUser = JSON.parse(savedUser);
          if (this.currentUser.type === 'admin') {
            this.showAdminDashboard();
          }
        }
      }
      
      showAddStudentModal() {
          document.getElementById('studentModalTitle').textContent = 'Add Student';
          document.getElementById('studentForm').reset();
          document.getElementById('studentForm').dataset.mode = 'add';
          document.getElementById('studentForm').dataset.id = '';
          
          // Reset image preview
          currentImageData = null;
          document.getElementById('imagePreview').innerHTML = '<div class="image-placeholder">No image selected</div>';
          
          showModal('studentModal');
      }
      showEditStudentModal(id) {
          const student = this.students.find(s => s.id === id);
          if (student) {
              document.getElementById('studentModalTitle').textContent = 'Edit Student';
              document.getElementById('firstName').value = student.firstName;
              document.getElementById('lastName').value = student.lastName;
              document.getElementById('email').value = student.email;
              document.getElementById('religion').value = student.religion;
              document.getElementById('program').value = student.program;
              document.getElementById('GradeLevel').value = student.year; // Corrected to Grade Level
              document.getElementById('status').value = student.status;
              
              // Display existing image if available
              const preview = document.getElementById('imagePreview');
              if (student.image) {
                currentImageData = student.image;
                preview.innerHTML = `<img src="${student.image}" alt="Student Picture">`;
              } else {
                currentImageData = null;
                preview.innerHTML = '<div class="image-placeholder">No image selected</div>';
              }
              
              document.getElementById('studentForm').dataset.mode = 'edit';
              document.getElementById('studentForm').dataset.id = id;
              showModal('studentModal');
          }
      }
      showAddCourseModal() {
          document.getElementById('courseModalTitle').textContent = 'Add Course';
          document.getElementById('courseForm').reset();
          document.getElementById('courseForm').dataset.mode = 'add';
          document.getElementById('courseForm').dataset.id = '';
          showModal('courseModal');
      }
      showEditCourseModal(id) {
          const course = this.courses.find(c => c.id === id);
          if (course) {
              document.getElementById('courseModalTitle').textContent = 'Edit Course';
              document.getElementById('courseCode').value = course.courseCode;
              document.getElementById('courseName').value = course.courseName;
              document.getElementById('credits').value = course.credits;
              document.getElementById('instructor').value = course.instructor;
              document.getElementById('schedule').value = course.schedule;
              document.getElementById('room').value = course.room;
              document.getElementById('capacity').value = course.capacity;
              document.getElementById('courseForm').dataset.mode = 'edit';
              document.getElementById('courseForm').dataset.id = id;
              showModal('courseModal');
          }
      }
      
      // New method to show the Add Archived Student modal
      showAddArchivedStudentModal() {
          document.getElementById('archiveStudentModalTitle').textContent = 'Add Student to Archive';
          document.getElementById('archiveStudentForm').reset();
          // Hide any previous error message
          document.getElementById('archiveFormError').style.display = 'none';
          showModal('archiveStudentModal');
      }
      
      // New method to show the Add Subject modal
      showAddSubjectModal(studentId) {
          document.getElementById('subjectModalTitle').textContent = 'Add Subject';
          document.getElementById('subjectForm').reset();
          document.getElementById('subjectStudentId').value = studentId;
          showModal('subjectModal');
      }
      
      // New method to show the Add Schedule modal
      showAddScheduleModal(studentId) {
          document.getElementById('scheduleModalTitle').textContent = 'Add Schedule';
          document.getElementById('scheduleForm').reset();
          document.getElementById('scheduleStudentId').value = studentId;
          showModal('scheduleModal');
      }
      
      // New method to show the Add Program Subject modal
      showAddProgramSubjectModal() {
          document.getElementById('programSubjectModalTitle').textContent = 'Add Program Subject';
          document.getElementById('programSubjectForm').reset();
          // Set the current program
          document.getElementById('programSubjectProgram').value = currentProgramFilter;
          showModal('programSubjectModal');
      }
      
      // New method to check if a student already exists in the archive
      checkArchivedStudentExists(username, email) {
          return this.archivedStudents.some(student => 
              student.username === username || student.email === email
          );
      }
      
      // New method to add a student directly to the archive
      addArchivedStudent(studentData) {
          const newArchivedStudent = {
              id: Date.now(),
              username: studentData.username,
              firstName: studentData.firstName,
              lastName: studentData.lastName,
              email: studentData.email,
              program: studentData.program,
              year: studentData.year,
              status: studentData.status,
              phone: studentData.phone,
              address: studentData.address,
              archiveDate: new Date().toISOString().split('T')[0],
              archiveReason: studentData.reason
          };
          
          this.archivedStudents.push(newArchivedStudent);
          localStorage.setItem('archivedStudents', JSON.stringify(this.archivedStudents));
          this.loadArchivedStudentsTable(studentData.status);
          this.showNotification('Student added to archive successfully!', 'success');
      }
      
      // New method to add a subject to a student
      addSubjectToStudent(studentId, subjectData) {
          const studentIndex = this.students.findIndex(s => s.id === studentId);
          if (studentIndex !== -1) {
              const newSubject = {
                  id: Date.now(),
                  ...subjectData
              };
              
              if (!this.students[studentIndex].subjects) {
                  this.students[studentIndex].subjects = [];
              }
              
              this.students[studentIndex].subjects.push(newSubject);
              localStorage.setItem('students', JSON.stringify(this.students));
              this.loadStudentSubjects(studentId);
              this.showNotification('Subject added successfully!', 'success');
          }
      }
      
      // New method to add a schedule to a student
      addScheduleToStudent(studentId, scheduleData) {
          const studentIndex = this.students.findIndex(s => s.id === studentId);
          if (studentIndex !== -1) {
              const newSchedule = {
                  id: Date.now(),
                  ...scheduleData
              };
              
              if (!this.students[studentIndex].schedules) {
                  this.students[studentIndex].schedules = [];
              }
              
              this.students[studentIndex].schedules.push(newSchedule);
              localStorage.setItem('students', JSON.stringify(this.students));
              this.loadStudentSchedules(studentId);
              this.showNotification('Schedule added successfully!', 'success');
          }
      }
      
      // New method to add a subject to a program
      addSubjectToProgram(program, subjectData) {
          if (!this.programSubjects[program]) {
              this.programSubjects[program] = [];
          }
          
          const newSubject = {
              id: Date.now(),
              ...subjectData
          };
          
          this.programSubjects[program].push(newSubject);
          localStorage.setItem('programSubjects', JSON.stringify(this.programSubjects));
          this.showProgramSubjects(program);
          this.showNotification('Subject added to program successfully!', 'success');
      }
      
      // New method to load a student's subjects
      loadStudentSubjects(studentId) {
          const student = this.students.find(s => s.id === studentId);
          const subjectsList = document.getElementById('student-subjects-list');
          
          if (!student || !student.subjects || student.subjects.length === 0) {
              subjectsList.innerHTML = '<div class="empty-state">No subjects assigned to this student</div>';
              return;
          }
          
          subjectsList.innerHTML = student.subjects.map(subject => `
              <div class="subject-item">
                  <div class="subject-info">
                      <div class="subject-name">${subject.subjectName}</div>
                      <div class="subject-code">${subject.subjectCode}</div>
                  </div>
                  <button class="remove-subject-btn" onclick="adminPanel.removeSubjectFromStudent(${studentId}, ${subject.id})">Remove</button>
              </div>
          `).join('');
      }
      
      // New method to load a student's schedules
      loadStudentSchedules(studentId) {
          const student = this.students.find(s => s.id === studentId);
          const schedulesList = document.getElementById('student-schedules-list');
          
          if (!student || !student.schedules || student.schedules.length === 0) {
              schedulesList.innerHTML = '<div class="empty-state">No schedules assigned to this student</div>';
              return;
          }
          
          schedulesList.innerHTML = student.schedules.map(schedule => {
              // Find subject name
              const subject = student.subjects ? student.subjects.find(s => s.id === schedule.subjectId) : null;
              const subjectName = subject ? subject.subjectName : 'Unknown Subject';
              
              return `
                  <div class="schedule-item">
                      <div class="schedule-info">
                          <div class="schedule-name">${subjectName}</div>
                          <div class="schedule-time">${schedule.day}, ${schedule.startTime} - ${schedule.endTime}</div>
                      </div>
                      <button class="remove-schedule-btn" onclick="adminPanel.removeScheduleFromStudent(${studentId}, ${schedule.id})">Remove</button>
                  </div>
              `;
          }).join('');
      }
      
      // New method to show program subjects
      showProgramSubjects(program) {
          // Hide students table and show program subjects
          document.getElementById('students-table-container').style.display = 'none';
          document.getElementById('program-subjects-container').style.display = 'block';
          
          // Update title
          document.getElementById('program-subjects-title').textContent = `${program} Subjects`;
          
          // Load subjects for the program
          const subjectsList = document.getElementById('program-subjects-list');
          
          if (!this.programSubjects[program] || this.programSubjects[program].length === 0) {
              subjectsList.innerHTML = '<div class="empty-state">No subjects available for this program</div>';
              return;
          }
          
          subjectsList.innerHTML = this.programSubjects[program].map(subject => `
              <div class="program-subject-item">
                  <div class="program-subject-info">
                      <div class="program-subject-name">${subject.subjectName}</div>
                      <div class="program-subject-code">${subject.subjectCode}</div>
                  </div>
                  <div class="program-subject-actions">
                      <button class="edit-program-subject-btn" onclick="adminPanel.editProgramSubject('${program}', ${subject.id})">Edit</button>
                      <button class="delete-program-subject-btn" onclick="adminPanel.deleteProgramSubject('${program}', ${subject.id})">Delete</button>
                  </div>
              </div>
          `).join('');
      }
      
      // New method to edit a program subject
      editProgramSubject(program, subjectId) {
          const subject = this.programSubjects[program].find(s => s.id === subjectId);
          if (subject) {
              document.getElementById('programSubjectModalTitle').textContent = 'Edit Program Subject';
              document.getElementById('programSubjectProgram').value = program;
              document.getElementById('programSubjectName').value = subject.subjectName;
              document.getElementById('programSubjectCode').value = subject.subjectCode;
              document.getElementById('programSubjectInstructor').value = subject.instructor;
              document.getElementById('programSubjectCredits').value = subject.credits;
              showModal('programSubjectModal');
          }
      }
      
      // New method to delete a program subject
      deleteProgramSubject(program, subjectId) {
          if (confirm('Are you sure you want to delete this subject?')) {
              this.programSubjects[program] = this.programSubjects[program].filter(s => s.id !== subjectId);
              localStorage.setItem('programSubjects', JSON.stringify(this.programSubjects));
              this.showProgramSubjects(program);
              this.showNotification('Subject deleted successfully!', 'success');
          }
      }
      
      // New method to remove a subject from a student
      removeSubjectFromStudent(studentId, subjectId) {
          if (confirm('Are you sure you want to remove this subject?')) {
              const studentIndex = this.students.findIndex(s => s.id === studentId);
              if (studentIndex !== -1 && this.students[studentIndex].subjects) {
                  this.students[studentIndex].subjects = this.students[studentIndex].subjects.filter(s => s.id !== subjectId);
                  localStorage.setItem('students', JSON.stringify(this.students));
                  this.loadStudentSubjects(studentId);
                  this.showNotification('Subject removed successfully!', 'success');
              }
          }
      }
      
      // New method to remove a schedule from a student
      removeScheduleFromStudent(studentId, scheduleId) {
          if (confirm('Are you sure you want to remove this schedule?')) {
              const studentIndex = this.students.findIndex(s => s.id === studentId);
              if (studentIndex !== -1 && this.students[studentIndex].schedules) {
                  this.students[studentIndex].schedules = this.students[studentIndex].schedules.filter(s => s.id !== scheduleId);
                  localStorage.setItem('students', JSON.stringify(this.students));
                  this.loadStudentSchedules(studentId);
                  this.showNotification('Schedule removed successfully!', 'success');
              }
          }
      }
      
      // New method to load settings for a specific section
      loadSettings(sectionId) {
        switch(sectionId) {
          case 'general':
            // Load general settings
            const generalSettings = this.settings.general;
            if (Object.keys(generalSettings).length > 0) {
              document.getElementById('schoolName').value = generalSettings.schoolName || '';
              document.getElementById('schoolAddress').value = generalSettings.schoolAddress || '';
              document.getElementById('schoolPhone').value = generalSettings.schoolPhone || '';
              document.getElementById('schoolEmail').value = generalSettings.schoolEmail || '';
              document.getElementById('schoolWebsite').value = generalSettings.schoolWebsite || '';
            }
            break;
            
          case 'academic':
            // Load academic settings
            const academicSettings = this.settings.academic;
            if (Object.keys(academicSettings).length > 0) {
              document.getElementById('currentAcademicYear').value = academicSettings.currentAcademicYear || '';
              document.getElementById('currentSemester').value = academicSettings.currentSemester || '';
              document.getElementById('semesterStartDate').value = academicSettings.semesterStartDate || '';
              document.getElementById('semesterEndDate').value = academicSettings.semesterEndDate || '';
            }
            break;
            
          case 'users':
            // Load user management settings
            const userSettings = this.settings.users;
            if (Object.keys(userSettings).length > 0) {
              document.getElementById('accountApproval').checked = userSettings.accountApproval || false;
              document.getElementById('passwordPolicy').checked = userSettings.passwordPolicy || false;
              document.getElementById('minPasswordLength').value = userSettings.minPasswordLength || 8;
              document.getElementById('passwordExpiry').value = userSettings.passwordExpiry || 90;
            }
            break;
            
          case 'notifications':
            // Load notification settings
            const notificationSettings = this.settings.notifications;
            if (Object.keys(notificationSettings).length > 0) {
              document.getElementById('enableEmailNotifications').checked = notificationSettings.enableEmailNotifications || false;
              document.getElementById('smtpServer').value = notificationSettings.smtpServer || '';
              document.getElementById('smtpPort').value = notificationSettings.smtpPort || '';
              document.getElementById('smtpUsername').value = notificationSettings.smtpUsername || '';
              document.getElementById('smtpPassword').value = notificationSettings.smtpPassword || '';
            }
            break;
            
          case 'backup':
            // Load backup settings
            const backupSettings = this.settings.backup;
            if (Object.keys(backupSettings).length > 0) {
              document.getElementById('enableAutoBackup').checked = backupSettings.enableAutoBackup || false;
              document.getElementById('backupFrequency').value = backupSettings.backupFrequency || 'daily';
              document.getElementById('backupTime').value = backupSettings.backupTime || '02:00';
              document.getElementById('backupRetention').value = backupSettings.backupRetention || 30;
            }
            break;
        }
      }
      
      // New method to create a backup
      createBackup() {
        const backupData = {
          students: this.students,
          courses: this.courses,
          applications: this.applications,
          archivedStudents: this.archivedStudents,
          programSubjects: this.programSubjects,
          settings: this.settings,
          timestamp: new Date().toISOString()
        };
        
        // In a real application, this would be sent to a server
        // For this demo, we'll just save it to localStorage
        const backupId = Date.now();
        localStorage.setItem(`backup_${backupId}`, JSON.stringify(backupData));
        
        this.showNotification('Backup created successfully!', 'success');
      }
      
      // New method to search students
      searchStudents() {
        const searchTerm = document.getElementById('studentSearchInput').value.trim();
        
        // Show clear button if there's a search term
        const clearBtn = document.getElementById('clearSearchBtn');
        if (searchTerm) {
          clearBtn.style.display = 'inline-flex';
        } else {
          clearBtn.style.display = 'none';
        }
        
        // Load students table with search term
        this.loadStudentsTable(currentProgramFilter, searchTerm);
      }
      
      // New method to clear student search
      clearStudentSearch() {
        // Clear search input
        document.getElementById('studentSearchInput').value = '';
        
        // Hide clear button
        document.getElementById('clearSearchBtn').style.display = 'none';
        
        // Reload students table without search term
        this.loadStudentsTable(currentProgramFilter);
      }
      
      // New method to initialize charts
      initializeCharts() {
        // Destroy existing charts if they exist
        if (this.charts.strand) {
          this.charts.strand.destroy();
        }
        if (this.charts.gender) {
          this.charts.gender.destroy();
        }
        if (this.charts.location) {
          this.charts.location.destroy();
        }
        if (this.charts.grade) {
          this.charts.grade.destroy();
        }
        
        // Initialize strand chart
        const strandCtx = document.getElementById('strandChart').getContext('2d');
        const strandData = this.getStrandData();
        this.charts.strand = new Chart(strandCtx, {
          type: 'bar',
          data: {
            labels: strandData.labels,
            datasets: [{
              label: 'Number of Students',
              data: strandData.values,
              backgroundColor: [
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(153, 102, 255, 0.7)',
                'rgba(255, 159, 64, 0.7)',
                'rgba(199, 199, 199, 0.7)',
                'rgba(83, 102, 255, 0.7)'
              ],
              borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgba(199, 199, 199, 1)',
                'rgba(83, 102, 255, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  precision: 0
                }
              }
            }
          }
        });
        
        // Initialize gender chart
        const genderCtx = document.getElementById('genderChart').getContext('2d');
        const genderData = this.getGenderData();
        this.charts.gender = new Chart(genderCtx, {
          type: 'pie',
          data: {
            labels: genderData.labels,
            datasets: [{
              data: genderData.values,
              backgroundColor: [
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 99, 132, 0.7)',
                'rgba(255, 206, 86, 0.7)'
              ],
              borderColor: [
                'rgba(54, 162, 235, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(255, 206, 86, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false
          }
        });
        
        // Initialize location chart
        const locationCtx = document.getElementById('locationChart').getContext('2d');
        const locationData = this.getLocationData();
        this.charts.location = new Chart(locationCtx, {
          type: 'doughnut',
          data: {
            labels: locationData.labels,
            datasets: [{
              data: locationData.values,
              backgroundColor: [
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(153, 102, 255, 0.7)'
              ],
              borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false
          }
        });
        
        // Initialize grade chart
        const gradeCtx = document.getElementById('gradeChart').getContext('2d');
        const gradeData = this.getGradeData();
        this.charts.grade = new Chart(gradeCtx, {
          type: 'bar',
          data: {
            labels: gradeData.labels,
            datasets: [{
              label: 'Number of Students',
              data: gradeData.values,
              backgroundColor: [
                'rgba(75, 192, 192, 0.7)',
                'rgba(153, 102, 255, 0.7)'
              ],
              borderColor: [
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  precision: 0
                }
              }
            }
          }
        });
      }
      
      // Method to get strand data
      getStrandData() {
        const strands = {
          'ABM': 0,
          'HUMSS': 0,
          'GAS': 0,
          'CSS': 0,
          'EIM': 0,
          'EPAS': 0,
          'PROGRAMMING': 0,
          'TVL': 0
        };
        
        this.students.forEach(student => {
          if (strands.hasOwnProperty(student.program)) {
            strands[student.program]++;
          }
        });
        
        return {
          labels: Object.keys(strands),
          values: Object.values(strands)
        };
      }
      
      // Method to get gender data
      getGenderData() {
        const genderCounts = {
          'Male': 0,
          'Female': 0,
          'Prefer not to say': 0
        };
        
        // Since we don't have gender data in our sample students, we'll simulate it
        this.students.forEach((student, index) => {
          // Simulate gender distribution
          if (index % 3 === 0) {
            genderCounts['Male']++;
          } else if (index % 3 === 1) {
            genderCounts['Female']++;
          } else {
            genderCounts['Prefer not to say']++;
          }
        });
        
        return {
          labels: Object.keys(genderCounts),
          values: Object.values(genderCounts)
        };
      }
      
      // Method to get location data
      getLocationData() {
        const locations = {
          'Manila': 0,
          'Quezon City': 0,
          'Davao City': 0,
          'Cebu City': 0,
          'Others': 0
        };
        
        this.students.forEach(student => {
          // Extract location from address
          const address = student.address || '';
          if (address.includes('Manila')) {
            locations['Manila']++;
          } else if (address.includes('Quezon City')) {
            locations['Quezon City']++;
          } else if (address.includes('Davao City')) {
            locations['Davao City']++;
          } else if (address.includes('Cebu City')) {
            locations['Cebu City']++;
          } else {
            locations['Others']++;
          }
        });
        
        return {
          labels: Object.keys(locations),
          values: Object.values(locations)
        };
      }
      
      // Method to get grade data
      getGradeData() {
        const grades = {
          'Grade 11': 0,
          'Grade 12': 0
        };
        
        this.students.forEach(student => {
          if (student.year === '1') {
            grades['Grade 11']++;
          } else if (student.year === '2') {
            grades['Grade 12']++;
          }
        });
        
        return {
          labels: Object.keys(grades),
          values: Object.values(grades)
        };
      }
      
      // New method to view student details
      viewStudent(id) {
        const student = this.students.find(s => s.id === id);
        if (student) {
          // Populate student details modal
          document.getElementById('studentDetailsFullName').textContent = `${student.firstName} ${student.lastName}`;
          document.getElementById('studentDetailsProgram').textContent = `${student.program} - Grade ${student.year}`;
          
          // Set student image if available
          const imageContainer = document.getElementById('studentDetailsImage');
          if (student.image) {
            imageContainer.innerHTML = `<img src="${student.image}" alt="${student.firstName} ${student.lastName}">`;
          } else {
            imageContainer.innerHTML = '<i class="fas fa-user-circle fa-5x" style="color: #ccc;"></i>';
          }
          
          // Personal Information
          document.getElementById('studentDetailsFirstName').textContent = student.firstName;
          document.getElementById('studentDetailsLastName').textContent = student.lastName;
          document.getElementById('studentDetailsEmail').textContent = student.email;
          document.getElementById('studentDetailsReligion').textContent = student.religion || 'Not specified';
          document.getElementById('studentDetailsPhone').textContent = student.phone || 'Not specified';
          document.getElementById('studentDetailsAddress').textContent = student.address || 'Not specified';
          document.getElementById('studentDetailsStatus').textContent = student.status;
          document.getElementById('studentDetailsEnrolledDate').textContent = student.enrolledDate;
          
          // Academic Information
          document.getElementById('studentDetailsProgramInfo').textContent = student.program;
          document.getElementById('studentDetailsGradeLevel').textContent = `Grade ${student.year}`;
          
          // Subjects
          const subjectsList = document.getElementById('studentDetailsSubjectsList');
          if (student.subjects && student.subjects.length > 0) {
            subjectsList.innerHTML = student.subjects.map(subject => 
              `<li>${subject.subjectCode} - ${subject.subjectName} (${subject.credits} credits) - ${subject.instructor}</li>`
            ).join('');
          } else {
            subjectsList.innerHTML = '<li>No subjects assigned</li>';
          }
          
          // Schedules
          const schedulesList = document.getElementById('studentDetailsSchedulesList');
          if (student.schedules && student.schedules.length > 0) {
            schedulesList.innerHTML = student.schedules.map(schedule => {
              const subject = student.subjects ? student.subjects.find(s => s.id === schedule.subjectId) : null;
              const subjectName = subject ? subject.subjectName : 'Unknown Subject';
              return `<li>${subjectName} - ${schedule.day}, ${schedule.startTime}-${schedule.endTime} (${schedule.room})</li>`;
            }).join('');
          } else {
            schedulesList.innerHTML = '<li>No schedules assigned</li>';
          }
          
          // Show the modal
          showModal('studentDetailsModal');
        }
      }
      
      // New method to print student details
      printStudentDetails() {
        window.print();
      }
      
      // New method to view application details
      viewApplication(id) {
        const application = this.applications.find(a => a.id === id);
        if (application) {
          // Store the current application ID
          currentApplicationId = id;
          
          // Create a modal to display application details
          const modal = document.getElementById('applicationDetailsModal');
          
          // Set application details
          document.getElementById('applicationDetailsName').textContent = application.name;
          document.getElementById('applicationDetailsProgram').textContent = application.program;
          
          // Set status badge
          const statusElement = document.getElementById('applicationDetailsStatus');
          statusElement.textContent = application.status;
          statusElement.className = `application-details-status ${application.status.toLowerCase()}`;
          
          // Personal Information
          document.getElementById('applicationDetailsFullName').textContent = application.name;
          document.getElementById('applicationDetailsEmail').textContent = application.email;
          document.getElementById('applicationDetailsPhone').textContent = application.phone;
          document.getElementById('applicationDetailsAddress').textContent = application.address;
          document.getElementById('applicationDetailsDOB').textContent = application.dob || 'Not provided';
          document.getElementById('applicationDetailsGender').textContent = application.gender || 'Not provided';
          
          // Educational Background
          document.getElementById('applicationDetailsLastSchool').textContent = application.lastSchool || 'Not provided';
          document.getElementById('applicationDetailsYearAttended').textContent = application.yearAttended || 'Not provided';
          
          // Application Information
          document.getElementById('applicationDetailsProgramApplied').textContent = application.program;
          document.getElementById('applicationDetailsDateSubmitted').textContent = application.submitted;
          document.getElementById('applicationDetailsStatusText').textContent = application.status;
          
          // Documents
          const documentsList = document.getElementById('applicationDetailsDocumentsList');
          if (application.requiredDocuments && application.requiredDocuments.length > 0) {
            documentsList.innerHTML = application.requiredDocuments.map(doc => 
              `<div class="application-details-documents-item">${doc}</div>`
            ).join('');
          } else {
            documentsList.innerHTML = '<div class="application-details-documents-item">No documents</div>';
          }
          
          // Show the modal
          showModal('applicationDetailsModal');
        }
      }
      
      // New method to delete application from details modal
      deleteApplicationFromDetails() {
        if (currentApplicationId && confirm('Are you sure you want to delete this application?')) {
          this.deleteApplication(currentApplicationId);
          closeModal('applicationDetailsModal');
        }
      }
    }
    const adminPanel = new AdminPanel();
    function handleLoginSubmit(event) {
      event.preventDefault();
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      const messageDiv = document.getElementById('loginMessage');
      if (adminPanel.handleLogin(username, password)) {
        messageDiv.innerHTML = '<div style="color: green;">Login successful!</div>';
        setTimeout(() => { messageDiv.innerHTML = ''; }, 2000);
      } else {
        messageDiv.innerHTML = '<div style="color: red;">Invalid credentials! Try admin/admin123</div>';
        setTimeout(() => { messageDiv.innerHTML = ''; }, 3000);
      }
    }
  
    function logout() { adminPanel.logout(); }
  
    document.addEventListener('DOMContentLoaded', function() {
      adminPanel.checkExistingSession();
      const loginForm = document.getElementById('loginForm');
      if (loginForm) { loginForm.addEventListener('submit', handleLoginSubmit); }
      
    });
   
  </script>
<script>
/* Toggle dropdown on click */
function toggleDropdown(event) {
  event.stopPropagation(); // prevent closing immediately
  const dropdown = event.currentTarget.parentElement;
  dropdown.classList.toggle("active");

  // Close others if open
  document.querySelectorAll(".dropdown").forEach(d => {
    if (d !== dropdown) d.classList.remove("active");
  });
}

/* Close dropdown when clicking outside */
window.onclick = function(e) {
  if (!e.target.matches('.dropbtn')) {
    document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
  }
};

/* Show track info */
function showTrack(track) {
  const strandInfo = document.getElementById('strand-info');
  const title = document.getElementById('strand-title');
  const desc = document.getElementById('strand-description');

  const info = {
    STEM: "Science, Technology, Engineering, and Mathematics â€” This strand is for students interested in pursuing science and technology-related fields.",
    ABM: "Accountancy, Business, and Management â€” Designed for students who aim to be future entrepreneurs, managers, or business professionals.",
    HUMSS: "Humanities and Social Sciences â€” For students who are interested in writing, communication, education, or social work.",
    GAS: "General Academic Strand â€” Offers flexibility for students who are still exploring their interests before college.",
    TVL: "Technical-Vocational-Livelihood â€” Provides hands-on experience and certifications for technical and vocational skills."
  };

  title.textContent = track + " Strand";
  desc.textContent = info[track];
  strandInfo.style.display = "block";
  window.scrollTo({ top: strandInfo.offsetTop - 80, behavior: "smooth" });
}
</script>
<script>
function toggleDropdown(event) {
  event.stopPropagation();
  const dropdown = event.currentTarget.parentElement;
  dropdown.classList.toggle("active");
  document.querySelectorAll(".dropdown").forEach(d => {
    if (d !== dropdown) d.classList.remove("active");
  });
}

window.onclick = function(e) {
  if (!e.target.matches('.dropbtn')) {
    document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
  }
};

function showTrack(track) {
  const strandInfo = document.getElementById('strand-info');
  const title = document.getElementById('strand-title');
  const desc = document.getElementById('strand-description');
  const coursesList = document.getElementById('strand-courses');
  const homeSection = document.getElementById('home');

  if (homeSection) homeSection.style.display = "none";

  const info = {
    STEM: {
      desc: "Science, Technology, Engineering, and Mathematics â€” perfect for students who love innovation, problem-solving, and scientific inquiry.",
      bg: "https://images.unsplash.com/photo-1581093588401-22e8a2c1a3ee?auto=format&fit=crop&w=1350&q=80",
      courses: [
        "BS Computer Science",
        "BS Civil Engineering",
        "BS Information Technology",
        "BS Architecture"
      ]
    },
    ABM: {
      desc: "The ABM Strand is for those who plan to take up business-related courses in higher education or engage in business, entrepreneurship, and other business-related careers.The Accountancy, Business and Management (ABM) strand would focus on the basic concepts of financial management, business management, corporate operations, and all things that are accounted for.",
      bg: "https://th.bing.com/th/id/OIP.03SA97fyr-pjmz1A-HWovwHaE8?w=274&h=183&c=7&r=0&o=7&cb=12&dpr=1.5&pid=1.7&rm=3",
      courses: [
        "BS Accountancy",
        "BSBA in Marketing",
        "BSBA in Financial Management",
        "Entrepreneurship"
      ]
    },
    HUMSS: {
      desc: "Humanities and Social Sciences â€” for students interested in communication, education, and social service.",
      bg: "https://images.unsplash.com/photo-1529078155058-5d716f45d604?auto=format&fit=crop&w=1350&q=80",
      courses: [
        "BA Communication",
        "BS Psychology",
        "BSEd English",
        "BA Political Science"
      ]
    },
    GAS: {
      desc: "General Academic Strand â€” provides a flexible path for students who are still exploring their college options.",
      bg: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?auto=format&fit=crop&w=1350&q=80",
      courses: [
        "BS Criminology",
        "BS Tourism",
        "BS Psychology",
        "AB English"
      ]
    },
    TVL: {
      desc: "Technical-Vocational-Livelihood â€” for students interested in practical, hands-on skills and immediate employment opportunities.",
      bg: "https://images.unsplash.com/photo-1517694712202-14dd9538aa97?auto=format&fit=crop&w=1350&q=80",
      courses: [
        "BS Industrial Technology",
        "Hotel and Restaurant Management",
        "Automotive Technology",
        "Culinary Arts"
      ]
    }
  };

  const data = info[track];
  if (!data) return;

  title.textContent = track + " Strand";
  desc.textContent = data.desc;
  strandInfo.style.backgroundImage = `url(${data.bg})`;

  coursesList.innerHTML = "";
  data.courses.forEach(course => {
    const li = document.createElement("li");
    li.textContent = course;
    coursesList.appendChild(li);
  });

  strandInfo.style.display = "block";
  window.scrollTo({ top: strandInfo.offsetTop - 80, behavior: "smooth" });
}
</script>
<script src="login.js"></script>

</html>
<!-- âœ… Archive Modal Popup for Add Student to Archive -->
<div class="modal" id="archiveModal">
  <div class="modal-content">
    <span class="close" id="closeArchiveModal">&times;</span>
    <h2>Student List</h2>
    <div class="filter-container">
      <label for="archiveFilter">Filter by Status:</label>
      <select id="archiveFilter">
        <option value="All">All</option>
        <option value="Graduated">Graduated</option>
        <option value="Dropped Out">Dropped Out</option>
        <option value="Transferee">Transferee</option>
      </select>
    </div>
    <table id="archiveStudentTable" class="archive-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Status</th>
          <th>Year Level</th>
        </tr>
      </thead>
      <tbody>
         <td>Juan Dela Cruz</td>
          <td class="status-cell" data-status="Graduated">
            <button class="status-btn status-graduated active">Graduated</button>
            <button class="status-btn status-transferee">Transferee</button>
            <button class="status-btn status-dropped">Dropped Out</button>
          </td>
          <td>12</td>
        </tr>
        <tr>
         <td>Maria Santos</td>
          <td class="status-cell" data-status="Dropped Out">
            <button class="status-btn status-graduated">Graduated</button>
            <button class="status-btn status-transferee">Transferee</button>
            <button class="status-btn status-dropped active">Dropped Out</button>
          </td>
          <td>11</td>
        </tr>
        <tr>
         <td>Ana Lopez</td>
          <td class="status-cell" data-status="Graduated">
            <button class="status-btn status-graduated active">Graduated</button>
            <button class="status-btn status-transferee">Transferee</button>
            <button class="status-btn status-dropped">Dropped Out</button>
          </td>
          <td>12</td>
        </tr>
        <tr>
         <td>Carlos Reyes</td>
          <td class="status-cell" data-status="Transferee">
            <button class="status-btn status-graduated">Graduated</button>
            <button class="status-btn status-transferee active">Transferee</button>
            <button class="status-btn status-dropped">Dropped Out</button>
          </td>
          <td>12</td>
        </tr>
        <tr>
        <td>Jose Ramos</td>
          <td class="status-cell" data-status="Dropped Out">
            <button class="status-btn status-graduated">Graduated</button>
            <button class="status-btn status-transferee">Transferee</button>
            <button class="status-btn status-dropped active">Dropped Out</button>
          </td>
          <td>10</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- âœ… NEW SCRIPT -->
<script>
// âœ… FULLY FUNCTIONAL SCRIPT FOR ARCHIVE MODAL + CLICKABLE STATUS
document.addEventListener('DOMContentLoaded', function() {

  const addArchiveBtn = document.querySelector('.archive-add-btn');
  const archiveModal = document.getElementById('archiveModal');
  const closeArchiveModal = document.getElementById('closeArchiveModal');
  const archiveFilter = document.getElementById('archiveFilter');
  const archiveStudentTable = document
    .getElementById('archiveStudentTable')
    .getElementsByTagName('tbody')[0];

  if (addArchiveBtn) {
    addArchiveBtn.addEventListener('click', () => {
      archiveModal.style.display = 'block';
    });
  }

  if (closeArchiveModal) {
    closeArchiveModal.addEventListener('click', () => {
      archiveModal.style.display = 'none';
    });
  }

  window.addEventListener('click', (event) => {
    if (event.target === archiveModal) {
      archiveModal.style.display = 'none';
    }
  });
  

  // --- CLICKABLE STATUS BUTTONS ---
  document.querySelectorAll('.status-cell').forEach(cell => {
    const buttons = cell.querySelectorAll('.status-btn');
    const row = cell.closest('tr');

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        cell.setAttribute('data-status', btn.textContent.trim());
        console.log(`${row.cells[0].textContent} â†’ ${btn.textContent}`);
      });
    });
  });

  // --- FILTER BY STATUS ---
  archiveFilter.addEventListener('change', () => {
    const selected = archiveFilter.value;
    const rows = archiveStudentTable.querySelectorAll('tr');

    rows.forEach(row => {
      const status = row.querySelector('.status-cell')?.getAttribute('data-status') || '';
      row.style.display = (selected === 'All' || status === selected) ? '' : 'none';
    });
  });

});
</script>

<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
  
</script>
<script>
// Load applications into dashboard table
async function loadApplications() {
  const tableBody = document.querySelector("#applicationsTable tbody");
  if (!tableBody) return;

  try {
    const res = await fetch("backend/fetch_applications.php");
    const data = await res.json();

    tableBody.innerHTML = "";

    if (data.length === 0) {
      tableBody.innerHTML = `<tr><td colspan="6" style="text-align:center;">No applications found</td></tr>`;
      return;
    }

    data.forEach((app, index) => {
      const row = `
        <tr>
          <td>${index + 1}</td>
          <td>${app.fullname}</td>
          <td>${app.email}</td>
          <td>${app.strand}</td>
          <td><span class="application-status pending">${app.status || 'Pending'}</span></td>
          <td>
            <button class="view-btn" onclick="viewApplication(${app.id})"><i class="fas fa-eye"></i></button>
          </td>
        </tr>`;
      tableBody.insertAdjacentHTML("beforeend", row);
    });
  } catch (error) {
    console.error("Error loading applications:", error);
    tableBody.innerHTML = `<tr><td colspan="6" style="text-align:center;color:red;">Error loading data</td></tr>`;
  }
}

// Call this function when dashboard loads
document.addEventListener("DOMContentLoaded", () => {
  if (document.querySelector("#applicationsTable")) {
    loadApplications();
  }
});

</script>

</body>
</html>



<!-- âœ… FINAL FIX: Clickable Status Buttons + Archive Integration -->
<style>
.status-btn {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  font-size: 0.8rem;
  font-weight: 600;
  color: white;
  cursor: pointer;
  margin: 2px;
  opacity: 0.6;
  transition: all 0.2s ease;
}
.status-btn:hover {
  opacity: 0.9;
}
.status-graduated {
  background-color: #22c55e; /* green */
}
.status-transferee {
  background-color: #3b82f6; /* blue */
}
.status-dropped {
  background-color: #ef4444; /* red */
}
.status-btn.active {
  opacity: 1;
  box-shadow: 0 0 0 2px #00000020;
  
}


</style>
